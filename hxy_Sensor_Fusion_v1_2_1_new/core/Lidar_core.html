<!DOCTYPE html>
<!-- Generated by Cython 0.28.2 -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Cython: Lidar_core.pyx</title>
    <style type="text/css">
    
body.cython { font-family: courier; font-size: 12; }

.cython.tag  {  }
.cython.line { margin: 0em }
.cython.code { font-size: 9; color: #444444; display: none; margin: 0px 0px 0px 8px; border-left: 8px none; }

.cython.line .run { background-color: #B0FFB0; }
.cython.line .mis { background-color: #FFB0B0; }
.cython.code.run  { border-left: 8px solid #B0FFB0; }
.cython.code.mis  { border-left: 8px solid #FFB0B0; }

.cython.code .py_c_api  { color: red; }
.cython.code .py_macro_api  { color: #FF7000; }
.cython.code .pyx_c_api  { color: #FF3000; }
.cython.code .pyx_macro_api  { color: #FF7000; }
.cython.code .refnanny  { color: #FFA000; }
.cython.code .trace  { color: #FFA000; }
.cython.code .error_goto  { color: #FFA000; }

.cython.code .coerce  { color: #008000; border: 1px dotted #008000 }
.cython.code .py_attr { color: #FF0000; font-weight: bold; }
.cython.code .c_attr  { color: #0000FF; }
.cython.code .py_call { color: #FF0000; font-weight: bold; }
.cython.code .c_call  { color: #0000FF; }

.cython.score-0 {background-color: #FFFFff;}
.cython.score-1 {background-color: #FFFFe7;}
.cython.score-2 {background-color: #FFFFd4;}
.cython.score-3 {background-color: #FFFFc4;}
.cython.score-4 {background-color: #FFFFb6;}
.cython.score-5 {background-color: #FFFFaa;}
.cython.score-6 {background-color: #FFFF9f;}
.cython.score-7 {background-color: #FFFF96;}
.cython.score-8 {background-color: #FFFF8d;}
.cython.score-9 {background-color: #FFFF86;}
.cython.score-10 {background-color: #FFFF7f;}
.cython.score-11 {background-color: #FFFF79;}
.cython.score-12 {background-color: #FFFF73;}
.cython.score-13 {background-color: #FFFF6e;}
.cython.score-14 {background-color: #FFFF6a;}
.cython.score-15 {background-color: #FFFF66;}
.cython.score-16 {background-color: #FFFF62;}
.cython.score-17 {background-color: #FFFF5e;}
.cython.score-18 {background-color: #FFFF5b;}
.cython.score-19 {background-color: #FFFF57;}
.cython.score-20 {background-color: #FFFF55;}
.cython.score-21 {background-color: #FFFF52;}
.cython.score-22 {background-color: #FFFF4f;}
.cython.score-23 {background-color: #FFFF4d;}
.cython.score-24 {background-color: #FFFF4b;}
.cython.score-25 {background-color: #FFFF48;}
.cython.score-26 {background-color: #FFFF46;}
.cython.score-27 {background-color: #FFFF44;}
.cython.score-28 {background-color: #FFFF43;}
.cython.score-29 {background-color: #FFFF41;}
.cython.score-30 {background-color: #FFFF3f;}
.cython.score-31 {background-color: #FFFF3e;}
.cython.score-32 {background-color: #FFFF3c;}
.cython.score-33 {background-color: #FFFF3b;}
.cython.score-34 {background-color: #FFFF39;}
.cython.score-35 {background-color: #FFFF38;}
.cython.score-36 {background-color: #FFFF37;}
.cython.score-37 {background-color: #FFFF36;}
.cython.score-38 {background-color: #FFFF35;}
.cython.score-39 {background-color: #FFFF34;}
.cython.score-40 {background-color: #FFFF33;}
.cython.score-41 {background-color: #FFFF32;}
.cython.score-42 {background-color: #FFFF31;}
.cython.score-43 {background-color: #FFFF30;}
.cython.score-44 {background-color: #FFFF2f;}
.cython.score-45 {background-color: #FFFF2e;}
.cython.score-46 {background-color: #FFFF2d;}
.cython.score-47 {background-color: #FFFF2c;}
.cython.score-48 {background-color: #FFFF2b;}
.cython.score-49 {background-color: #FFFF2b;}
.cython.score-50 {background-color: #FFFF2a;}
.cython.score-51 {background-color: #FFFF29;}
.cython.score-52 {background-color: #FFFF29;}
.cython.score-53 {background-color: #FFFF28;}
.cython.score-54 {background-color: #FFFF27;}
.cython.score-55 {background-color: #FFFF27;}
.cython.score-56 {background-color: #FFFF26;}
.cython.score-57 {background-color: #FFFF26;}
.cython.score-58 {background-color: #FFFF25;}
.cython.score-59 {background-color: #FFFF24;}
.cython.score-60 {background-color: #FFFF24;}
.cython.score-61 {background-color: #FFFF23;}
.cython.score-62 {background-color: #FFFF23;}
.cython.score-63 {background-color: #FFFF22;}
.cython.score-64 {background-color: #FFFF22;}
.cython.score-65 {background-color: #FFFF22;}
.cython.score-66 {background-color: #FFFF21;}
.cython.score-67 {background-color: #FFFF21;}
.cython.score-68 {background-color: #FFFF20;}
.cython.score-69 {background-color: #FFFF20;}
.cython.score-70 {background-color: #FFFF1f;}
.cython.score-71 {background-color: #FFFF1f;}
.cython.score-72 {background-color: #FFFF1f;}
.cython.score-73 {background-color: #FFFF1e;}
.cython.score-74 {background-color: #FFFF1e;}
.cython.score-75 {background-color: #FFFF1e;}
.cython.score-76 {background-color: #FFFF1d;}
.cython.score-77 {background-color: #FFFF1d;}
.cython.score-78 {background-color: #FFFF1c;}
.cython.score-79 {background-color: #FFFF1c;}
.cython.score-80 {background-color: #FFFF1c;}
.cython.score-81 {background-color: #FFFF1c;}
.cython.score-82 {background-color: #FFFF1b;}
.cython.score-83 {background-color: #FFFF1b;}
.cython.score-84 {background-color: #FFFF1b;}
.cython.score-85 {background-color: #FFFF1a;}
.cython.score-86 {background-color: #FFFF1a;}
.cython.score-87 {background-color: #FFFF1a;}
.cython.score-88 {background-color: #FFFF1a;}
.cython.score-89 {background-color: #FFFF19;}
.cython.score-90 {background-color: #FFFF19;}
.cython.score-91 {background-color: #FFFF19;}
.cython.score-92 {background-color: #FFFF19;}
.cython.score-93 {background-color: #FFFF18;}
.cython.score-94 {background-color: #FFFF18;}
.cython.score-95 {background-color: #FFFF18;}
.cython.score-96 {background-color: #FFFF18;}
.cython.score-97 {background-color: #FFFF17;}
.cython.score-98 {background-color: #FFFF17;}
.cython.score-99 {background-color: #FFFF17;}
.cython.score-100 {background-color: #FFFF17;}
.cython.score-101 {background-color: #FFFF16;}
.cython.score-102 {background-color: #FFFF16;}
.cython.score-103 {background-color: #FFFF16;}
.cython.score-104 {background-color: #FFFF16;}
.cython.score-105 {background-color: #FFFF16;}
.cython.score-106 {background-color: #FFFF15;}
.cython.score-107 {background-color: #FFFF15;}
.cython.score-108 {background-color: #FFFF15;}
.cython.score-109 {background-color: #FFFF15;}
.cython.score-110 {background-color: #FFFF15;}
.cython.score-111 {background-color: #FFFF15;}
.cython.score-112 {background-color: #FFFF14;}
.cython.score-113 {background-color: #FFFF14;}
.cython.score-114 {background-color: #FFFF14;}
.cython.score-115 {background-color: #FFFF14;}
.cython.score-116 {background-color: #FFFF14;}
.cython.score-117 {background-color: #FFFF14;}
.cython.score-118 {background-color: #FFFF13;}
.cython.score-119 {background-color: #FFFF13;}
.cython.score-120 {background-color: #FFFF13;}
.cython.score-121 {background-color: #FFFF13;}
.cython.score-122 {background-color: #FFFF13;}
.cython.score-123 {background-color: #FFFF13;}
.cython.score-124 {background-color: #FFFF13;}
.cython.score-125 {background-color: #FFFF12;}
.cython.score-126 {background-color: #FFFF12;}
.cython.score-127 {background-color: #FFFF12;}
.cython.score-128 {background-color: #FFFF12;}
.cython.score-129 {background-color: #FFFF12;}
.cython.score-130 {background-color: #FFFF12;}
.cython.score-131 {background-color: #FFFF12;}
.cython.score-132 {background-color: #FFFF11;}
.cython.score-133 {background-color: #FFFF11;}
.cython.score-134 {background-color: #FFFF11;}
.cython.score-135 {background-color: #FFFF11;}
.cython.score-136 {background-color: #FFFF11;}
.cython.score-137 {background-color: #FFFF11;}
.cython.score-138 {background-color: #FFFF11;}
.cython.score-139 {background-color: #FFFF11;}
.cython.score-140 {background-color: #FFFF11;}
.cython.score-141 {background-color: #FFFF10;}
.cython.score-142 {background-color: #FFFF10;}
.cython.score-143 {background-color: #FFFF10;}
.cython.score-144 {background-color: #FFFF10;}
.cython.score-145 {background-color: #FFFF10;}
.cython.score-146 {background-color: #FFFF10;}
.cython.score-147 {background-color: #FFFF10;}
.cython.score-148 {background-color: #FFFF10;}
.cython.score-149 {background-color: #FFFF10;}
.cython.score-150 {background-color: #FFFF0f;}
.cython.score-151 {background-color: #FFFF0f;}
.cython.score-152 {background-color: #FFFF0f;}
.cython.score-153 {background-color: #FFFF0f;}
.cython.score-154 {background-color: #FFFF0f;}
.cython.score-155 {background-color: #FFFF0f;}
.cython.score-156 {background-color: #FFFF0f;}
.cython.score-157 {background-color: #FFFF0f;}
.cython.score-158 {background-color: #FFFF0f;}
.cython.score-159 {background-color: #FFFF0f;}
.cython.score-160 {background-color: #FFFF0f;}
.cython.score-161 {background-color: #FFFF0e;}
.cython.score-162 {background-color: #FFFF0e;}
.cython.score-163 {background-color: #FFFF0e;}
.cython.score-164 {background-color: #FFFF0e;}
.cython.score-165 {background-color: #FFFF0e;}
.cython.score-166 {background-color: #FFFF0e;}
.cython.score-167 {background-color: #FFFF0e;}
.cython.score-168 {background-color: #FFFF0e;}
.cython.score-169 {background-color: #FFFF0e;}
.cython.score-170 {background-color: #FFFF0e;}
.cython.score-171 {background-color: #FFFF0e;}
.cython.score-172 {background-color: #FFFF0e;}
.cython.score-173 {background-color: #FFFF0d;}
.cython.score-174 {background-color: #FFFF0d;}
.cython.score-175 {background-color: #FFFF0d;}
.cython.score-176 {background-color: #FFFF0d;}
.cython.score-177 {background-color: #FFFF0d;}
.cython.score-178 {background-color: #FFFF0d;}
.cython.score-179 {background-color: #FFFF0d;}
.cython.score-180 {background-color: #FFFF0d;}
.cython.score-181 {background-color: #FFFF0d;}
.cython.score-182 {background-color: #FFFF0d;}
.cython.score-183 {background-color: #FFFF0d;}
.cython.score-184 {background-color: #FFFF0d;}
.cython.score-185 {background-color: #FFFF0d;}
.cython.score-186 {background-color: #FFFF0d;}
.cython.score-187 {background-color: #FFFF0c;}
.cython.score-188 {background-color: #FFFF0c;}
.cython.score-189 {background-color: #FFFF0c;}
.cython.score-190 {background-color: #FFFF0c;}
.cython.score-191 {background-color: #FFFF0c;}
.cython.score-192 {background-color: #FFFF0c;}
.cython.score-193 {background-color: #FFFF0c;}
.cython.score-194 {background-color: #FFFF0c;}
.cython.score-195 {background-color: #FFFF0c;}
.cython.score-196 {background-color: #FFFF0c;}
.cython.score-197 {background-color: #FFFF0c;}
.cython.score-198 {background-color: #FFFF0c;}
.cython.score-199 {background-color: #FFFF0c;}
.cython.score-200 {background-color: #FFFF0c;}
.cython.score-201 {background-color: #FFFF0c;}
.cython.score-202 {background-color: #FFFF0c;}
.cython.score-203 {background-color: #FFFF0b;}
.cython.score-204 {background-color: #FFFF0b;}
.cython.score-205 {background-color: #FFFF0b;}
.cython.score-206 {background-color: #FFFF0b;}
.cython.score-207 {background-color: #FFFF0b;}
.cython.score-208 {background-color: #FFFF0b;}
.cython.score-209 {background-color: #FFFF0b;}
.cython.score-210 {background-color: #FFFF0b;}
.cython.score-211 {background-color: #FFFF0b;}
.cython.score-212 {background-color: #FFFF0b;}
.cython.score-213 {background-color: #FFFF0b;}
.cython.score-214 {background-color: #FFFF0b;}
.cython.score-215 {background-color: #FFFF0b;}
.cython.score-216 {background-color: #FFFF0b;}
.cython.score-217 {background-color: #FFFF0b;}
.cython.score-218 {background-color: #FFFF0b;}
.cython.score-219 {background-color: #FFFF0b;}
.cython.score-220 {background-color: #FFFF0b;}
.cython.score-221 {background-color: #FFFF0b;}
.cython.score-222 {background-color: #FFFF0a;}
.cython.score-223 {background-color: #FFFF0a;}
.cython.score-224 {background-color: #FFFF0a;}
.cython.score-225 {background-color: #FFFF0a;}
.cython.score-226 {background-color: #FFFF0a;}
.cython.score-227 {background-color: #FFFF0a;}
.cython.score-228 {background-color: #FFFF0a;}
.cython.score-229 {background-color: #FFFF0a;}
.cython.score-230 {background-color: #FFFF0a;}
.cython.score-231 {background-color: #FFFF0a;}
.cython.score-232 {background-color: #FFFF0a;}
.cython.score-233 {background-color: #FFFF0a;}
.cython.score-234 {background-color: #FFFF0a;}
.cython.score-235 {background-color: #FFFF0a;}
.cython.score-236 {background-color: #FFFF0a;}
.cython.score-237 {background-color: #FFFF0a;}
.cython.score-238 {background-color: #FFFF0a;}
.cython.score-239 {background-color: #FFFF0a;}
.cython.score-240 {background-color: #FFFF0a;}
.cython.score-241 {background-color: #FFFF0a;}
.cython.score-242 {background-color: #FFFF0a;}
.cython.score-243 {background-color: #FFFF0a;}
.cython.score-244 {background-color: #FFFF0a;}
.cython.score-245 {background-color: #FFFF0a;}
.cython.score-246 {background-color: #FFFF09;}
.cython.score-247 {background-color: #FFFF09;}
.cython.score-248 {background-color: #FFFF09;}
.cython.score-249 {background-color: #FFFF09;}
.cython.score-250 {background-color: #FFFF09;}
.cython.score-251 {background-color: #FFFF09;}
.cython.score-252 {background-color: #FFFF09;}
.cython.score-253 {background-color: #FFFF09;}
.cython.score-254 {background-color: #FFFF09;}
.cython .hll { background-color: #ffffcc }
.cython  { background: #f8f8f8; }
.cython .c { color: #408080; font-style: italic } /* Comment */
.cython .err { border: 1px solid #FF0000 } /* Error */
.cython .k { color: #008000; font-weight: bold } /* Keyword */
.cython .o { color: #666666 } /* Operator */
.cython .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.cython .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.cython .cp { color: #BC7A00 } /* Comment.Preproc */
.cython .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.cython .c1 { color: #408080; font-style: italic } /* Comment.Single */
.cython .cs { color: #408080; font-style: italic } /* Comment.Special */
.cython .gd { color: #A00000 } /* Generic.Deleted */
.cython .ge { font-style: italic } /* Generic.Emph */
.cython .gr { color: #FF0000 } /* Generic.Error */
.cython .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.cython .gi { color: #00A000 } /* Generic.Inserted */
.cython .go { color: #888888 } /* Generic.Output */
.cython .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.cython .gs { font-weight: bold } /* Generic.Strong */
.cython .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.cython .gt { color: #0044DD } /* Generic.Traceback */
.cython .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.cython .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.cython .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.cython .kp { color: #008000 } /* Keyword.Pseudo */
.cython .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.cython .kt { color: #B00040 } /* Keyword.Type */
.cython .m { color: #666666 } /* Literal.Number */
.cython .s { color: #BA2121 } /* Literal.String */
.cython .na { color: #7D9029 } /* Name.Attribute */
.cython .nb { color: #008000 } /* Name.Builtin */
.cython .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.cython .no { color: #880000 } /* Name.Constant */
.cython .nd { color: #AA22FF } /* Name.Decorator */
.cython .ni { color: #999999; font-weight: bold } /* Name.Entity */
.cython .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.cython .nf { color: #0000FF } /* Name.Function */
.cython .nl { color: #A0A000 } /* Name.Label */
.cython .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.cython .nt { color: #008000; font-weight: bold } /* Name.Tag */
.cython .nv { color: #19177C } /* Name.Variable */
.cython .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.cython .w { color: #bbbbbb } /* Text.Whitespace */
.cython .mb { color: #666666 } /* Literal.Number.Bin */
.cython .mf { color: #666666 } /* Literal.Number.Float */
.cython .mh { color: #666666 } /* Literal.Number.Hex */
.cython .mi { color: #666666 } /* Literal.Number.Integer */
.cython .mo { color: #666666 } /* Literal.Number.Oct */
.cython .sa { color: #BA2121 } /* Literal.String.Affix */
.cython .sb { color: #BA2121 } /* Literal.String.Backtick */
.cython .sc { color: #BA2121 } /* Literal.String.Char */
.cython .dl { color: #BA2121 } /* Literal.String.Delimiter */
.cython .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.cython .s2 { color: #BA2121 } /* Literal.String.Double */
.cython .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.cython .sh { color: #BA2121 } /* Literal.String.Heredoc */
.cython .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.cython .sx { color: #008000 } /* Literal.String.Other */
.cython .sr { color: #BB6688 } /* Literal.String.Regex */
.cython .s1 { color: #BA2121 } /* Literal.String.Single */
.cython .ss { color: #19177C } /* Literal.String.Symbol */
.cython .bp { color: #008000 } /* Name.Builtin.Pseudo */
.cython .fm { color: #0000FF } /* Name.Function.Magic */
.cython .vc { color: #19177C } /* Name.Variable.Class */
.cython .vg { color: #19177C } /* Name.Variable.Global */
.cython .vi { color: #19177C } /* Name.Variable.Instance */
.cython .vm { color: #19177C } /* Name.Variable.Magic */
.cython .il { color: #666666 } /* Literal.Number.Integer.Long */
    </style>
</head>
<body class="cython">
<p><span style="border-bottom: solid 1px grey;">Generated by Cython 0.28.2</span></p>
<p>
    <span style="background-color: #FFFF00">Yellow lines</span> hint at Python interaction.<br />
    Click on a line that starts with a "<code>+</code>" to see the C code that Cython generated for it.
</p>
<p>Raw output: <a href="Lidar_core.c">Lidar_core.c</a></p>
<div class="cython"><pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">001</span>: <span class="c"># -*- coding: utf-8 -*-</span></pre>
<pre class='cython code score-8 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 1, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_test, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 1, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">002</span>: <span class="c"># cython: cdivision=True</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">003</span>: <span class="sd">&quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">004</span>: <span class="sd">Spyder Editor</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">005</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">006</span>: <span class="sd">This is a temporary script file.</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">007</span>: <span class="sd">&quot;&quot;&quot;</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">008</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">009</span>: </pre>
<pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">010</span>: <span class="k">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span></pre>
<pre class='cython code score-8 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_numpy, 0, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 10, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_np, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 10, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">011</span>: <span class="k">cimport</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">012</span>: <span class="k">import</span> <span class="nn">cython</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">013</span>: <span class="k">cimport</span> <span class="nn">cython</span></pre>
<pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">014</span>: <span class="k">import</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">sys</span></pre>
<pre class='cython code score-16 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_time, 0, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 14, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_time, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 14, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_sys, 0, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 14, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_sys, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 14, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">015</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">016</span>: <span class="k">from</span> <span class="nn">cython.view</span> <span class="k">cimport</span> <span class="n">array</span> <span class="k">as</span> <span class="n">cvarray</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">017</span>: <span class="k">from</span> <span class="nn">cpython.array</span> <span class="k">cimport</span> <span class="n">array</span> <span class="k">as</span> <span class="n">pvarray</span></pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">018</span>: <span class="k">from</span> <span class="nn">array</span> <span class="k">import</span> <span class="n">array</span> <span class="k">as</span> <span class="n">pvarray</span></pre>
<pre class='cython code score-11 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 18, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_array);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_n_s_array);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_n_s_array);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_Import</span>(__pyx_n_s_array, __pyx_t_1, -1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 18, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">019</span>: </pre>
<pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">020</span>: <span class="n">i32</span> <span class="o">=</span> <span class="s">&quot;l&quot;</span> <span class="k">if</span> <span class="s">&#39;win&#39;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="k">else</span> <span class="s">&quot;i&quot;</span></pre>
<pre class='cython code score-16 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_sys);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 20, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_platform);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 20, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_4 = (<span class='pyx_c_api'>__Pyx_PySequence_ContainsTF</span>(__pyx_n_s_win, __pyx_t_3, Py_EQ)); if (unlikely(__pyx_t_4 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 20, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if ((__pyx_t_4 != 0)) {
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_l);
    __pyx_t_2 = __pyx_n_s_l;
  } else {
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_n_s_i);
    __pyx_t_2 = __pyx_n_s_i;
  }
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_i32, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 20, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">021</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">022</span>: <span class="k">cdef</span> <span class="kr">extern</span> <span class="k">from</span> <span class="s">&quot;math.h&quot;</span><span class="p">:</span>  <span class="c"># 这些函数用C语言里面的</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">023</span>:     <span class="n">double</span> <span class="n">cos</span><span class="p">(</span><span class="n">double</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">024</span>:     <span class="n">double</span> <span class="n">sin</span><span class="p">(</span><span class="n">double</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">025</span>:     <span class="n">double</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">double</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">026</span>:     <span class="n">double</span> <span class="nb">pow</span><span class="p">(</span><span class="n">double</span> <span class="n">x</span><span class="p">,</span> <span class="n">double</span> <span class="n">y</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">027</span>:     <span class="n">double</span> <span class="n">ceil</span><span class="p">(</span><span class="n">double</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">028</span>:     <span class="n">double</span> <span class="n">floor</span><span class="p">(</span><span class="n">double</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">029</span>:     <span class="n">double</span> <span class="n">tanh</span><span class="p">(</span><span class="n">double</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">030</span>:     <span class="n">double</span> <span class="n">atan</span><span class="p">(</span><span class="n">double</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">031</span>:     <span class="n">double</span> <span class="nb">round</span><span class="p">(</span><span class="n">double</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">032</span>:     <span class="n">double</span> <span class="n">fabs</span><span class="p">(</span><span class="n">double</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">033</span>:     <span class="n">double</span> <span class="n">M_PI</span>  <span class="c"># 继承 pi</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">034</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">035</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">036</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-65" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">037</span>: <span class="k">def</span> <span class="nf">isinPolygon</span><span class="p">(</span><span class="nb">int</span> <span class="n">x</span><span class="p">,</span> <span class="nb">int</span> <span class="n">y</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32_t</span><span class="p">[:,:]</span> <span class="n">polygon_areas</span><span class="p">):</span></pre>
<pre class='cython code score-65 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_1isinPolygon(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_1isinPolygon = {"isinPolygon", (PyCFunction)__pyx_pw_10Lidar_core_1isinPolygon, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_1isinPolygon(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_x;
  int __pyx_v_y;
  __Pyx_memviewslice __pyx_v_polygon_areas = { 0, 0, { 0 }, { 0 }, { 0 } };
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("isinPolygon (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_x,&amp;__pyx_n_s_y,&amp;__pyx_n_s_polygon_areas,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_x)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_y)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("isinPolygon", 1, 3, 3, 1); <span class='error_goto'>__PYX_ERR(0, 37, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_polygon_areas)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("isinPolygon", 1, 3, 3, 2); <span class='error_goto'>__PYX_ERR(0, 37, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "isinPolygon") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 37, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
    }
    __pyx_v_x = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(values[0]); if (unlikely((__pyx_v_x == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 37, __pyx_L3_error)</span>
    __pyx_v_y = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(values[1]); if (unlikely((__pyx_v_y == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 37, __pyx_L3_error)</span>
    __pyx_v_polygon_areas = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_float32_t(values[2], PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_polygon_areas.memview)) __PYX_ERR(0, 37, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("isinPolygon", 1, 3, 3, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 37, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.isinPolygon", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_10Lidar_core_isinPolygon(__pyx_self, __pyx_v_x, __pyx_v_y, __pyx_v_polygon_areas);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_isinPolygon(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_x, int __pyx_v_y, __Pyx_memviewslice __pyx_v_polygon_areas) {
  double __pyx_v_xmax;
  double __pyx_v_ymax;
  double __pyx_v_xmin;
  double __pyx_v_ymin;
  long __pyx_v_i;
  long __pyx_v_count;
  long __pyx_v_j;
  PyObject *__pyx_v_point1 = NULL;
  PyObject *__pyx_v_point2 = NULL;
  PyObject *__pyx_v_point12lng = NULL;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("isinPolygon", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_32);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_35);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_36);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.isinPolygon", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_point1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_point2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_point12lng);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_polygon_areas, 1);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__118 = <span class='py_c_api'>PyTuple_Pack</span>(13, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_polygon_areas, __pyx_n_s_xmax, __pyx_n_s_ymax, __pyx_n_s_xmin, __pyx_n_s_ymin, __pyx_n_s_i, __pyx_n_s_count, __pyx_n_s_j, __pyx_n_s_point1, __pyx_n_s_point2, __pyx_n_s_point12lng);<span class='error_goto'> if (unlikely(!__pyx_tuple__118)) __PYX_ERR(0, 37, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__118);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__118);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_1isinPolygon, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 37, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_isinPolygon, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 37, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__119 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(3, 0, 13, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__118, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_isinPolygon, 37, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__119)) __PYX_ERR(0, 37, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">038</span>:     <span class="c"># 判断是否在外包矩形内，如果不在，直接返回false</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">039</span>:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">xmax</span><span class="p">,</span> <span class="nf">ymax</span><span class="p">,</span> <span class="nf">xmin</span><span class="p">,</span> <span class="nf">ymin</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_ymin = 0.0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">040</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">i</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_i = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">041</span>:     <span class="n">xmax</span> <span class="o">=</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="mf">0</span><span class="p">][</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_v_xmax = (*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_1 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_2 * __pyx_v_polygon_areas.strides[1]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">042</span>:     <span class="n">ymax</span> <span class="o">=</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="mf">0</span><span class="p">][</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>  __pyx_t_3 = 0;
  __pyx_t_4 = 1;
  __pyx_v_ymax = (*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_3 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_4 * __pyx_v_polygon_areas.strides[1]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">043</span>:     <span class="n">xmin</span> <span class="o">=</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="mf">0</span><span class="p">][</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>  __pyx_t_5 = 0;
  __pyx_t_6 = 0;
  __pyx_v_xmin = (*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_5 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_6 * __pyx_v_polygon_areas.strides[1]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">044</span>:     <span class="n">ymin</span> <span class="o">=</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="mf">0</span><span class="p">][</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>  __pyx_t_7 = 0;
  __pyx_t_8 = 1;
  __pyx_v_ymin = (*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_7 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_8 * __pyx_v_polygon_areas.strides[1]) )));
</pre><pre class="cython line score-0">&#xA0;<span class="">045</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">046</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="p">(</span><span class="n">polygon_areas</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">-</span><span class="mf">1</span><span class="p">)):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_9 = ((__pyx_v_polygon_areas.shape[0]) - 1);
  __pyx_t_10 = __pyx_t_9;
  for (__pyx_t_11 = 1; __pyx_t_11 &lt; __pyx_t_10; __pyx_t_11+=1) {
    __pyx_v_i = __pyx_t_11;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">047</span>:         <span class="k">if</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mf">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">xmax</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_12 = __pyx_v_i;
    __pyx_t_13 = 0;
    __pyx_t_14 = (((*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_12 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_13 * __pyx_v_polygon_areas.strides[1]) ))) &gt; __pyx_v_xmax) != 0);
    if (__pyx_t_14) {
/* … */
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">048</span>:             <span class="n">xmax</span> <span class="o">=</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>      __pyx_t_15 = __pyx_v_i;
      __pyx_t_16 = 0;
      __pyx_v_xmax = (*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_15 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_16 * __pyx_v_polygon_areas.strides[1]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">049</span>:         <span class="k">if</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mf">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">xmin</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_17 = __pyx_v_i;
    __pyx_t_18 = 0;
    __pyx_t_14 = (((*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_17 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_18 * __pyx_v_polygon_areas.strides[1]) ))) &lt; __pyx_v_xmin) != 0);
    if (__pyx_t_14) {
/* … */
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">050</span>:             <span class="n">xmin</span> <span class="o">=</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>      __pyx_t_19 = __pyx_v_i;
      __pyx_t_20 = 0;
      __pyx_v_xmin = (*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_19 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_20 * __pyx_v_polygon_areas.strides[1]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">051</span>:         <span class="k">if</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mf">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">ymax</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_21 = __pyx_v_i;
    __pyx_t_22 = 1;
    __pyx_t_14 = (((*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_21 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_22 * __pyx_v_polygon_areas.strides[1]) ))) &gt; __pyx_v_ymax) != 0);
    if (__pyx_t_14) {
/* … */
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">052</span>:             <span class="n">ymax</span> <span class="o">=</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>      __pyx_t_23 = __pyx_v_i;
      __pyx_t_24 = 1;
      __pyx_v_ymax = (*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_23 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_24 * __pyx_v_polygon_areas.strides[1]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">053</span>:         <span class="k">if</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mf">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">ymin</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_25 = __pyx_v_i;
    __pyx_t_26 = 1;
    __pyx_t_14 = (((*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_25 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_26 * __pyx_v_polygon_areas.strides[1]) ))) &lt; __pyx_v_ymin) != 0);
    if (__pyx_t_14) {
/* … */
    }
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">054</span>:             <span class="n">ymin</span> <span class="o">=</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>      __pyx_t_27 = __pyx_v_i;
      __pyx_t_28 = 1;
      __pyx_v_ymin = (*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_27 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_28 * __pyx_v_polygon_areas.strides[1]) )));
</pre><pre class="cython line score-0">&#xA0;<span class="">055</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">056</span>:     <span class="c"># print(xmax , xmin, ymax, ymin)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">057</span>:     <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">xmax</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">xmin</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">ymax</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">ymin</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_29 = ((__pyx_v_x &gt; __pyx_v_xmax) != 0);
  if (!__pyx_t_29) {
  } else {
    __pyx_t_14 = __pyx_t_29;
    goto __pyx_L10_bool_binop_done;
  }
  __pyx_t_29 = ((__pyx_v_x &lt; __pyx_v_xmin) != 0);
  if (!__pyx_t_29) {
  } else {
    __pyx_t_14 = __pyx_t_29;
    goto __pyx_L10_bool_binop_done;
  }
  __pyx_t_29 = ((__pyx_v_y &gt; __pyx_v_ymax) != 0);
  if (!__pyx_t_29) {
  } else {
    __pyx_t_14 = __pyx_t_29;
    goto __pyx_L10_bool_binop_done;
  }
  __pyx_t_29 = ((__pyx_v_y &lt; __pyx_v_ymin) != 0);
  __pyx_t_14 = __pyx_t_29;
  __pyx_L10_bool_binop_done:;
  if (__pyx_t_14) {
/* … */
  }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">058</span>:         <span class="k">return</span> <span class="bp">False</span></pre>
<pre class='cython code score-2 '>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">059</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">count</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_count = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">060</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">j</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_j = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">061</span>:     <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">polygon_areas</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_9 = (__pyx_v_polygon_areas.shape[0]);
  __pyx_t_10 = __pyx_t_9;
  for (__pyx_t_11 = 0; __pyx_t_11 &lt; __pyx_t_10; __pyx_t_11+=1) {
    __pyx_v_j = __pyx_t_11;
</pre><pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">062</span>:         <span class="n">point1</span> <span class="o">=</span> <span class="p">[</span><span class="n">polygon_areas</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mf">0</span><span class="p">],</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mf">1</span><span class="p">]]</span></pre>
<pre class='cython code score-18 '>    __pyx_t_30 = __pyx_v_j;
    __pyx_t_31 = 0;
    __pyx_t_32 = <span class='py_c_api'>PyFloat_FromDouble</span>((*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_30 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_31 * __pyx_v_polygon_areas.strides[1]) ))));<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 62, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_32);
    __pyx_t_33 = __pyx_v_j;
    __pyx_t_34 = 1;
    __pyx_t_35 = <span class='py_c_api'>PyFloat_FromDouble</span>((*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_33 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_34 * __pyx_v_polygon_areas.strides[1]) ))));<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 62, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_35);
    __pyx_t_36 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_36)) __PYX_ERR(0, 62, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_36);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_32);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_36, 0, __pyx_t_32);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_35);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_36, 1, __pyx_t_35);
    __pyx_t_32 = 0;
    __pyx_t_35 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_point1, ((PyObject*)__pyx_t_36));
    __pyx_t_36 = 0;
</pre><pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">063</span>:         <span class="n">point2</span> <span class="o">=</span> <span class="p">[</span><span class="n">polygon_areas</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mf">2</span><span class="p">],</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mf">3</span><span class="p">]]</span></pre>
<pre class='cython code score-18 '>    __pyx_t_37 = __pyx_v_j;
    __pyx_t_38 = 2;
    __pyx_t_36 = <span class='py_c_api'>PyFloat_FromDouble</span>((*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_37 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_38 * __pyx_v_polygon_areas.strides[1]) ))));<span class='error_goto'> if (unlikely(!__pyx_t_36)) __PYX_ERR(0, 63, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_36);
    __pyx_t_39 = __pyx_v_j;
    __pyx_t_40 = 3;
    __pyx_t_35 = <span class='py_c_api'>PyFloat_FromDouble</span>((*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_39 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_40 * __pyx_v_polygon_areas.strides[1]) ))));<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 63, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_35);
    __pyx_t_32 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 63, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_32);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_36);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_32, 0, __pyx_t_36);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_35);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_32, 1, __pyx_t_35);
    __pyx_t_36 = 0;
    __pyx_t_35 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_point2, ((PyObject*)__pyx_t_32));
    __pyx_t_32 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">064</span>:         <span class="c"># 点与多边形顶点重合</span></pre>
<pre class="cython line score-48" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">065</span>:         <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">point1</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">==</span> <span class="n">point1</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span> <span class="ow">or</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">point2</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">==</span> <span class="n">point2</span><span class="p">[</span><span class="mf">1</span><span class="p">]):</span></pre>
<pre class='cython code score-48 '>    __pyx_t_32 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_x);<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_32);
    __pyx_t_35 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_32, <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_v_point1, 0), Py_EQ); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_35);<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_32); __pyx_t_32 = 0;
    __pyx_t_29 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_35); if (unlikely(__pyx_t_29 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_35); __pyx_t_35 = 0;
    if (!__pyx_t_29) {
      goto __pyx_L18_next_or;
    } else {
    }
    __pyx_t_35 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_y);<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_35);
    __pyx_t_32 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_35, <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_v_point1, 1), Py_EQ); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_32);<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_35); __pyx_t_35 = 0;
    __pyx_t_29 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_32); if (unlikely(__pyx_t_29 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_32); __pyx_t_32 = 0;
    if (!__pyx_t_29) {
    } else {
      __pyx_t_14 = __pyx_t_29;
      goto __pyx_L17_bool_binop_done;
    }
    __pyx_L18_next_or:;
    __pyx_t_32 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_x);<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_32);
    __pyx_t_35 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_32, <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_v_point2, 0), Py_EQ); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_35);<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_32); __pyx_t_32 = 0;
    __pyx_t_29 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_35); if (unlikely(__pyx_t_29 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_35); __pyx_t_35 = 0;
    if (__pyx_t_29) {
    } else {
      __pyx_t_14 = __pyx_t_29;
      goto __pyx_L17_bool_binop_done;
    }
    __pyx_t_35 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_y);<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_35);
    __pyx_t_32 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_35, <span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_v_point2, 1), Py_EQ); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_32);<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_35); __pyx_t_35 = 0;
    __pyx_t_29 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_32); if (unlikely(__pyx_t_29 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 65, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_32); __pyx_t_32 = 0;
    __pyx_t_14 = __pyx_t_29;
    __pyx_L17_bool_binop_done:;
    if (__pyx_t_14) {
/* … */
    }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">066</span>:             <span class="k">return</span> <span class="bp">False</span></pre>
<pre class='cython code score-2 '>      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_False);
      __pyx_r = Py_False;
      goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">067</span>:         <span class="c"># 判断线段两端点是否在射线两侧 不在肯定不相交 射线（-∞，lat）（lng,lat）</span></pre>
<pre class="cython line score-48" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">068</span>:         <span class="k">if</span> <span class="p">(</span><span class="n">point1</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">y</span> <span class="ow">and</span> <span class="n">point2</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">y</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">point1</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">y</span> <span class="ow">and</span> <span class="n">point2</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">y</span><span class="p">):</span></pre>
<pre class='cython code score-48 '>    __pyx_t_32 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_y);<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_32);
    __pyx_t_35 = <span class='py_c_api'>PyObject_RichCompare</span>(<span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_v_point1, 1), __pyx_t_32, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_35);<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_32); __pyx_t_32 = 0;
    __pyx_t_29 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_35); if (unlikely(__pyx_t_29 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_35); __pyx_t_35 = 0;
    if (!__pyx_t_29) {
      goto __pyx_L23_next_or;
    } else {
    }
    __pyx_t_35 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_y);<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_35);
    __pyx_t_32 = <span class='py_c_api'>PyObject_RichCompare</span>(<span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_v_point2, 1), __pyx_t_35, Py_GE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_32);<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_35); __pyx_t_35 = 0;
    __pyx_t_29 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_32); if (unlikely(__pyx_t_29 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_32); __pyx_t_32 = 0;
    if (!__pyx_t_29) {
    } else {
      __pyx_t_14 = __pyx_t_29;
      goto __pyx_L22_bool_binop_done;
    }
    __pyx_L23_next_or:;
    __pyx_t_32 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_y);<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_32);
    __pyx_t_35 = <span class='py_c_api'>PyObject_RichCompare</span>(<span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_v_point1, 1), __pyx_t_32, Py_GE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_35);<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_32); __pyx_t_32 = 0;
    __pyx_t_29 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_35); if (unlikely(__pyx_t_29 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_35); __pyx_t_35 = 0;
    if (__pyx_t_29) {
    } else {
      __pyx_t_14 = __pyx_t_29;
      goto __pyx_L22_bool_binop_done;
    }
    __pyx_t_35 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_y);<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_35);
    __pyx_t_32 = <span class='py_c_api'>PyObject_RichCompare</span>(<span class='py_macro_api'>PyList_GET_ITEM</span>(__pyx_v_point2, 1), __pyx_t_35, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_32);<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_35); __pyx_t_35 = 0;
    __pyx_t_29 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_32); if (unlikely(__pyx_t_29 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 68, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_32); __pyx_t_32 = 0;
    __pyx_t_14 = __pyx_t_29;
    __pyx_L22_bool_binop_done:;
    if (__pyx_t_14) {
/* … */
    }
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">069</span>:             <span class="c"># 求线段与射线交点 再和lat比较</span></pre>
<pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">070</span>:             <span class="n">point12lng</span> <span class="o">=</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mf">4</span><span class="p">]</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="n">polygon_areas</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mf">5</span><span class="p">]</span></pre>
<pre class='cython code score-6 '>      __pyx_t_41 = __pyx_v_j;
      __pyx_t_42 = 4;
      __pyx_t_43 = __pyx_v_j;
      __pyx_t_44 = 5;
      __pyx_t_32 = <span class='py_c_api'>PyFloat_FromDouble</span>((((*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_41 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_42 * __pyx_v_polygon_areas.strides[1]) ))) * __pyx_v_y) + (*((__pyx_t_5numpy_float32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_polygon_areas.data + __pyx_t_43 * __pyx_v_polygon_areas.strides[0]) ) + __pyx_t_44 * __pyx_v_polygon_areas.strides[1]) )))));<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 70, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_32);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_point12lng, __pyx_t_32);
      __pyx_t_32 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">071</span>:             <span class="c"># 点在多边形边上</span></pre>
<pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">072</span>:             <span class="k">if</span> <span class="p">(</span><span class="n">point12lng</span> <span class="o">==</span> <span class="n">x</span><span class="p">):</span></pre>
<pre class='cython code score-11 '>      __pyx_t_32 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_x);<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 72, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_32);
      __pyx_t_35 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_point12lng, __pyx_t_32, Py_EQ); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_35);<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 72, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_32); __pyx_t_32 = 0;
      __pyx_t_14 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_35); if (unlikely(__pyx_t_14 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 72, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_35); __pyx_t_35 = 0;
      if (__pyx_t_14) {
/* … */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">073</span>:                 <span class="k">return</span> <span class="bp">False</span></pre>
<pre class='cython code score-2 '>        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_False);
        __pyx_r = Py_False;
        goto __pyx_L0;
</pre><pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">074</span>:             <span class="k">if</span> <span class="p">(</span><span class="n">point12lng</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">):</span></pre>
<pre class='cython code score-11 '>      __pyx_t_35 = <span class='pyx_c_api'>__Pyx_PyInt_From_int</span>(__pyx_v_x);<span class='error_goto'> if (unlikely(!__pyx_t_35)) __PYX_ERR(0, 74, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_35);
      __pyx_t_32 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_point12lng, __pyx_t_35, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_32);<span class='error_goto'> if (unlikely(!__pyx_t_32)) __PYX_ERR(0, 74, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_35); __pyx_t_35 = 0;
      __pyx_t_14 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_32); if (unlikely(__pyx_t_14 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 74, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_32); __pyx_t_32 = 0;
      if (__pyx_t_14) {
/* … */
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">075</span>:                 <span class="n">count</span> <span class="o">+=</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>        __pyx_v_count = (__pyx_v_count + 1);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">076</span>:     <span class="k">if</span> <span class="n">count</span><span class="o">%</span><span class="mf">2</span> <span class="o">==</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_14 = (((__pyx_v_count % 2) == 0) != 0);
  if (__pyx_t_14) {
/* … */
  }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">077</span>:         <span class="k">return</span> <span class="bp">False</span></pre>
<pre class='cython code score-2 '>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_False);
    __pyx_r = Py_False;
    goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">078</span>:     <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">079</span>:         <span class="k">return</span> <span class="bp">True</span></pre>
<pre class='cython code score-2 '>  /*else*/ {
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_True);
    __pyx_r = Py_True;
    goto __pyx_L0;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">080</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">081</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">082</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">083</span>: <span class="c"># range and ground filt</span></pre>
<pre class="cython line score-70" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">084</span>: <span class="k">def</span> <span class="nf">clouds_range_no_ground</span><span class="p">(</span><span class="nb">int</span> <span class="n">transform_x</span><span class="p">,</span> <span class="nb">int</span> <span class="n">transform_y</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:,:]</span> <span class="n">clouds</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int16_t</span><span class="p">[:,:]</span> <span class="n">range_ground_z</span><span class="p">):</span></pre>
<pre class='cython code score-70 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_3clouds_range_no_ground(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_3clouds_range_no_ground = {"clouds_range_no_ground", (PyCFunction)__pyx_pw_10Lidar_core_3clouds_range_no_ground, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_3clouds_range_no_ground(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_transform_x;
  int __pyx_v_transform_y;
  __Pyx_memviewslice __pyx_v_clouds = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_range_ground_z = { 0, 0, { 0 }, { 0 }, { 0 } };
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("clouds_range_no_ground (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_transform_x,&amp;__pyx_n_s_transform_y,&amp;__pyx_n_s_clouds,&amp;__pyx_n_s_range_ground_z,0};
    PyObject* values[4] = {0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_transform_x)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_transform_y)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("clouds_range_no_ground", 1, 4, 4, 1); <span class='error_goto'>__PYX_ERR(0, 84, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_clouds)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("clouds_range_no_ground", 1, 4, 4, 2); <span class='error_goto'>__PYX_ERR(0, 84, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (likely((values[3] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_range_ground_z)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("clouds_range_no_ground", 1, 4, 4, 3); <span class='error_goto'>__PYX_ERR(0, 84, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "clouds_range_no_ground") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 84, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 4) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
      values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
    }
    __pyx_v_transform_x = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(values[0]); if (unlikely((__pyx_v_transform_x == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 84, __pyx_L3_error)</span>
    __pyx_v_transform_y = <span class='pyx_c_api'>__Pyx_PyInt_As_int</span>(values[1]); if (unlikely((__pyx_v_transform_y == (int)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 84, __pyx_L3_error)</span>
    __pyx_v_clouds = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_int32_t(values[2], PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_clouds.memview)) __PYX_ERR(0, 84, __pyx_L3_error)</span>
    __pyx_v_range_ground_z = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_int16_t(values[3], PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_range_ground_z.memview)) __PYX_ERR(0, 84, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("clouds_range_no_ground", 1, 4, 4, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 84, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.clouds_range_no_ground", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_10Lidar_core_2clouds_range_no_ground(__pyx_self, __pyx_v_transform_x, __pyx_v_transform_y, __pyx_v_clouds, __pyx_v_range_ground_z);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_2clouds_range_no_ground(CYTHON_UNUSED PyObject *__pyx_self, int __pyx_v_transform_x, int __pyx_v_transform_y, __Pyx_memviewslice __pyx_v_clouds, __Pyx_memviewslice __pyx_v_range_ground_z) {
  long __pyx_v_l;
  long __pyx_v_lp;
  long __pyx_v_z_ground;
  long __pyx_v_x;
  long __pyx_v_y;
  long __pyx_v_z;
  __Pyx_memviewslice __pyx_v_clouds_range_no_ground = { 0, 0, { 0 }, { 0 }, { 0 } };
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("clouds_range_no_ground", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_5, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_29, 1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_30);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_31);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.clouds_range_no_ground", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_clouds_range_no_ground, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_clouds, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_range_ground_z, 1);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__120 = <span class='py_c_api'>PyTuple_Pack</span>(11, __pyx_n_s_transform_x, __pyx_n_s_transform_y, __pyx_n_s_clouds, __pyx_n_s_range_ground_z, __pyx_n_s_l, __pyx_n_s_lp, __pyx_n_s_z_ground, __pyx_n_s_x, __pyx_n_s_y, __pyx_n_s_z, __pyx_n_s_clouds_range_no_ground);<span class='error_goto'> if (unlikely(!__pyx_tuple__120)) __PYX_ERR(0, 84, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__120);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__120);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_3clouds_range_no_ground, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 84, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_clouds_range_no_ground, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 84, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__121 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(4, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__120, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_clouds_range_no_ground, 84, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__121)) __PYX_ERR(0, 84, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">085</span>:     <span class="c">#print(sizeof(short))</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">086</span>:     <span class="c">#print(sizeof(int))</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">087</span>:     <span class="c">#print(sizeof(long))</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">088</span>:     <span class="c">#print(sizeof(long long))</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">089</span>:     <span class="c">#print(sizeof(np.int16_t))</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">090</span>:     <span class="c">#print(sizeof(np.int32_t))</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">091</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">l</span><span class="p">,</span> <span class="nf">lp</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="n">z_ground</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span></pre>
<pre class='cython code score-0 '>  __pyx_v_lp = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">092</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int32_t</span>[<span class="p">:,:]</span> <span class="n">clouds_range_no_ground</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">093</span>:     <span class="k">if</span> <span class="n">clouds</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = (((__pyx_v_clouds.shape[0]) &gt; 0) != 0);
  if (__pyx_t_1) {
/* … */
  }
</pre><pre class="cython line score-41" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">094</span>:         <span class="n">clouds_range_no_ground</span> <span class="o">=</span> <span class="n">cvarray</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">clouds</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="mf">4</span><span class="p">),</span> <span class="n">itemsize</span><span class="o">=</span><span class="n">sizeof</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">),</span> <span class="n">format</span><span class="o">=</span><span class="n">i32</span><span class="p">)</span></pre>
<pre class='cython code score-41 '>    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 94, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_3 = <span class='py_c_api'>PyInt_FromSsize_t</span>((__pyx_v_clouds.shape[0]));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 94, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 94, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1, __pyx_int_4);
    __pyx_t_3 = 0;
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_shape, __pyx_t_4) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 94, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_5numpy_int32_t)));<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 94, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_itemsize, __pyx_t_4) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 94, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_i32);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 94, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_format, __pyx_t_4) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 94, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_array_type), __pyx_empty_tuple, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 94, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_5 = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_int32_t(__pyx_t_4, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_5.memview)) __PYX_ERR(0, 94, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_clouds_range_no_ground = __pyx_t_5;
    __pyx_t_5.memview = NULL;
    __pyx_t_5.data = NULL;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">095</span>:     <span class="k">if</span> <span class="n">clouds</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = (((__pyx_v_clouds.shape[0]) == 0) != 0);
  if (__pyx_t_1) {
/* … */
  }
</pre><pre class="cython line score-32" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">096</span>:         <span class="n">clouds_range_no_ground</span> <span class="o">=</span> <span class="n">cvarray</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span> <span class="mf">4</span><span class="p">),</span> <span class="n">itemsize</span><span class="o">=</span><span class="n">sizeof</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">),</span> <span class="n">format</span><span class="o">=</span><span class="n">i32</span><span class="p">)</span></pre>
<pre class='cython code score-32 '>    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 96, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_4, __pyx_n_s_shape, __pyx_tuple_) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 96, __pyx_L1_error)</span>
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_5numpy_int32_t)));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 96, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_4, __pyx_n_s_itemsize, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 96, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_i32);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 96, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_4, __pyx_n_s_format, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 96, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_array_type), __pyx_empty_tuple, __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 96, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_5 = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_int32_t(__pyx_t_2, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_5.memview)) __PYX_ERR(0, 96, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    __PYX_XDEC_MEMVIEW(&amp;__pyx_v_clouds_range_no_ground, 1);
    __pyx_v_clouds_range_no_ground = __pyx_t_5;
    __pyx_t_5.memview = NULL;
    __pyx_t_5.data = NULL;
/* … */
  __pyx_tuple_ = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_2, __pyx_int_4);<span class='error_goto'> if (unlikely(!__pyx_tuple_)) __PYX_ERR(0, 96, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple_);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple_);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">097</span>:     <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">clouds</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span> <span class="c"># 对clouds中的每一点</span></pre>
<pre class='cython code score-0 '>  __pyx_t_6 = (__pyx_v_clouds.shape[0]);
  __pyx_t_7 = __pyx_t_6;
  for (__pyx_t_8 = 0; __pyx_t_8 &lt; __pyx_t_7; __pyx_t_8+=1) {
    __pyx_v_l = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">098</span>:         <span class="k">if</span> <span class="p">(</span><span class="n">clouds</span><span class="p">[</span><span class="n">l</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mf">100</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">clouds</span><span class="p">[</span><span class="n">l</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">4000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">clouds</span><span class="p">[</span><span class="n">l</span><span class="p">,</span> <span class="mf">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mf">4000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">clouds</span><span class="p">[</span><span class="n">l</span><span class="p">,</span> <span class="mf">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">3000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">clouds</span><span class="p">[</span><span class="n">l</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">1000</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>    __pyx_t_9 = __pyx_v_l;
    __pyx_t_10 = 0;
    __pyx_t_11 = __pyx_v_l;
    __pyx_t_12 = 0;
    __pyx_t_13 = __pyx_v_l;
    __pyx_t_14 = 1;
    __pyx_t_15 = __pyx_v_l;
    __pyx_t_16 = 1;
    __pyx_t_17 = __pyx_v_l;
    __pyx_t_18 = 2;
    __pyx_t_1 = (((((((*((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_clouds.data + __pyx_t_9 * __pyx_v_clouds.strides[0]) ) + __pyx_t_10 * __pyx_v_clouds.strides[1]) ))) &gt; -100L) &amp; ((*((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_clouds.data + __pyx_t_11 * __pyx_v_clouds.strides[0]) ) + __pyx_t_12 * __pyx_v_clouds.strides[1]) ))) &lt; 0xFA0)) &amp; ((*((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_clouds.data + __pyx_t_13 * __pyx_v_clouds.strides[0]) ) + __pyx_t_14 * __pyx_v_clouds.strides[1]) ))) &gt; -4000L)) &amp; ((*((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_clouds.data + __pyx_t_15 * __pyx_v_clouds.strides[0]) ) + __pyx_t_16 * __pyx_v_clouds.strides[1]) ))) &lt; 0xBB8)) &amp; ((*((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_clouds.data + __pyx_t_17 * __pyx_v_clouds.strides[0]) ) + __pyx_t_18 * __pyx_v_clouds.strides[1]) ))) &lt; 0x3E8)) != 0);
    if (__pyx_t_1) {
/* … */
    }
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">099</span>:             <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">clouds</span><span class="p">[</span><span class="n">l</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span><span class="o">/</span><span class="mf">1</span> <span class="o">+</span> <span class="n">transform_x</span><span class="p">)</span><span class="o">//</span><span class="mf">10</span></pre>
<pre class='cython code score-0 '>      __pyx_t_19 = __pyx_v_l;
      __pyx_t_20 = 0;
      __pyx_v_x = ((((*((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_clouds.data + __pyx_t_19 * __pyx_v_clouds.strides[0]) ) + __pyx_t_20 * __pyx_v_clouds.strides[1]) ))) / 1) + __pyx_v_transform_x) / 10);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">100</span>:             <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">clouds</span><span class="p">[</span><span class="n">l</span><span class="p">,</span> <span class="mf">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">transform_y</span><span class="p">)</span><span class="o">//</span><span class="mf">10</span></pre>
<pre class='cython code score-0 '>      __pyx_t_21 = __pyx_v_l;
      __pyx_t_22 = 1;
      __pyx_v_y = (((*((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_clouds.data + __pyx_t_21 * __pyx_v_clouds.strides[0]) ) + __pyx_t_22 * __pyx_v_clouds.strides[1]) ))) + __pyx_v_transform_y) / 10);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">101</span>:             <span class="n">z</span> <span class="o">=</span> <span class="n">clouds</span><span class="p">[</span><span class="n">l</span><span class="p">,</span> <span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>      __pyx_t_23 = __pyx_v_l;
      __pyx_t_24 = 2;
      __pyx_v_z = (*((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_clouds.data + __pyx_t_23 * __pyx_v_clouds.strides[0]) ) + __pyx_t_24 * __pyx_v_clouds.strides[1]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">102</span>:             <span class="n">z_ground</span> <span class="o">=</span> <span class="n">range_ground_z</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>      __pyx_t_25 = __pyx_v_x;
      __pyx_t_26 = __pyx_v_y;
      __pyx_v_z_ground = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_range_ground_z.data + __pyx_t_25 * __pyx_v_range_ground_z.strides[0]) ) + __pyx_t_26 * __pyx_v_range_ground_z.strides[1]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">103</span>:             <span class="k">if</span> <span class="p">(</span><span class="n">z_ground</span> <span class="o">!=</span> <span class="mf">10000</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">z</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">z_ground</span> <span class="o">+</span> <span class="mf">30</span><span class="p">))</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">z</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">z_ground</span> <span class="o">+</span> <span class="mf">330</span><span class="p">)):</span></pre>
<pre class='cython code score-0 '>      __pyx_t_1 = ((((__pyx_v_z_ground != 0x2710) &amp; (__pyx_v_z &gt; (__pyx_v_z_ground + 30))) &amp; (__pyx_v_z &lt; (__pyx_v_z_ground + 0x14A))) != 0);
      if (__pyx_t_1) {
/* … */
      }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">104</span>:                 <span class="n">clouds_range_no_ground</span><span class="p">[</span><span class="n">lp</span><span class="p">:</span><span class="n">lp</span><span class="o">+</span><span class="mf">1</span><span class="p">,:],</span> <span class="n">lp</span> <span class="o">=</span> <span class="n">clouds</span><span class="p">[</span><span class="n">l</span><span class="p">:</span><span class="n">l</span><span class="o">+</span><span class="mf">1</span><span class="p">,:],</span> <span class="n">lp</span><span class="o">+</span><span class="mf">1</span></pre>
<pre class='cython code score-2 '>        __pyx_t_5.data = __pyx_v_clouds.data;
        __pyx_t_5.memview = __pyx_v_clouds.memview;
        __PYX_INC_MEMVIEW(&amp;__pyx_t_5, 0);
        __pyx_t_27 = -1;
        if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_5,
    __pyx_v_clouds.shape[0], __pyx_v_clouds.strides[0], __pyx_v_clouds.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_27,
    __pyx_v_l,
    (__pyx_v_l + 1),
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 104, __pyx_L1_error)</span>
}

__pyx_t_5.shape[1] = __pyx_v_clouds.shape[1];
__pyx_t_5.strides[1] = __pyx_v_clouds.strides[1];
    __pyx_t_5.suboffsets[1] = -1;

__pyx_t_28 = (__pyx_v_lp + 1);
        if (unlikely(!__pyx_v_clouds_range_no_ground.memview)) { <span class='pyx_c_api'>__Pyx_RaiseUnboundLocalError</span>("clouds_range_no_ground"); <span class='error_goto'>__PYX_ERR(0, 104, __pyx_L1_error)</span> }
        __pyx_t_29.data = __pyx_v_clouds_range_no_ground.data;
        __pyx_t_29.memview = __pyx_v_clouds_range_no_ground.memview;
        __PYX_INC_MEMVIEW(&amp;__pyx_t_29, 0);
        __pyx_t_27 = -1;
        if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_29,
    __pyx_v_clouds_range_no_ground.shape[0], __pyx_v_clouds_range_no_ground.strides[0], __pyx_v_clouds_range_no_ground.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_27,
    __pyx_v_lp,
    (__pyx_v_lp + 1),
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 104, __pyx_L1_error)</span>
}

__pyx_t_29.shape[1] = __pyx_v_clouds_range_no_ground.shape[1];
__pyx_t_29.strides[1] = __pyx_v_clouds_range_no_ground.strides[1];
    __pyx_t_29.suboffsets[1] = -1;

if (unlikely(__pyx_memoryview_copy_contents(__pyx_t_5, __pyx_t_29, 2, 2, 0) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 104, __pyx_L1_error)</span>
        __PYX_XDEC_MEMVIEW(&amp;__pyx_t_29, 1);
        __pyx_t_29.memview = NULL;
        __pyx_t_29.data = NULL;
        __PYX_XDEC_MEMVIEW(&amp;__pyx_t_5, 1);
        __pyx_t_5.memview = NULL;
        __pyx_t_5.data = NULL;
        __pyx_v_lp = __pyx_t_28;
</pre><pre class="cython line score-50" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">105</span>:     <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">ctypeslib</span><span class="o">.</span><span class="n">as_array</span><span class="p">(</span><span class="n">clouds_range_no_ground</span><span class="p">[:</span><span class="n">lp</span><span class="p">])</span></pre>
<pre class='cython code score-50 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 105, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_ctypeslib);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 105, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_as_array);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 105, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (unlikely(!__pyx_v_clouds_range_no_ground.memview)) { <span class='pyx_c_api'>__Pyx_RaiseUnboundLocalError</span>("clouds_range_no_ground"); <span class='error_goto'>__PYX_ERR(0, 105, __pyx_L1_error)</span> }
  __pyx_t_5.data = __pyx_v_clouds_range_no_ground.data;
  __pyx_t_5.memview = __pyx_v_clouds_range_no_ground.memview;
  __PYX_INC_MEMVIEW(&amp;__pyx_t_5, 0);
  __pyx_t_27 = -1;
  if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_5,
    __pyx_v_clouds_range_no_ground.shape[0], __pyx_v_clouds_range_no_ground.strides[0], __pyx_v_clouds_range_no_ground.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_27,
    0,
    __pyx_v_lp,
    0,
    0,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 105, __pyx_L1_error)</span>
}

__pyx_t_5.shape[1] = __pyx_v_clouds_range_no_ground.shape[1];
__pyx_t_5.strides[1] = __pyx_v_clouds_range_no_ground.strides[1];
    __pyx_t_5.suboffsets[1] = -1;

__pyx_t_3 = __pyx_memoryview_fromslice(__pyx_t_5, 2, (PyObject *(*)(char *)) __pyx_memview_get_nn___pyx_t_5numpy_int32_t, (int (*)(char *, PyObject *)) __pyx_memview_set_nn___pyx_t_5numpy_int32_t, 0);;<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 105, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_5, 1);
  __pyx_t_5.memview = NULL;
  __pyx_t_5.data = NULL;
  __pyx_t_30 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
    __pyx_t_30 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
    if (likely(__pyx_t_30)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_30);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
    }
  }
  if (!__pyx_t_30) {
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 105, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_4)) {
      PyObject *__pyx_temp[2] = {__pyx_t_30, __pyx_t_3};
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 105, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_30); __pyx_t_30 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_4)) {
      PyObject *__pyx_temp[2] = {__pyx_t_30, __pyx_t_3};
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 105, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_30); __pyx_t_30 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    } else
    #endif
    {
      __pyx_t_31 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_31)) __PYX_ERR(0, 105, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_31);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_30); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_31, 0, __pyx_t_30); __pyx_t_30 = NULL;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_31, 0+1, __pyx_t_3);
      __pyx_t_3 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_31, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 105, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_31); __pyx_t_31 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_r = __pyx_t_2;
  __pyx_t_2 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">106</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">107</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">108</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-45" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">109</span>: <span class="k">def</span> <span class="nf">downsample_circle</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int16_t</span><span class="p">[:,:]</span> <span class="n">xel</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:]</span> <span class="n">idex</span><span class="p">):</span> <span class="c"># 依附于降采样下的循环操作</span></pre>
<pre class='cython code score-45 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_5downsample_circle(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_5downsample_circle = {"downsample_circle", (PyCFunction)__pyx_pw_10Lidar_core_5downsample_circle, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_5downsample_circle(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  __Pyx_memviewslice __pyx_v_xel = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_idex = { 0, 0, { 0 }, { 0 }, { 0 } };
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("downsample_circle (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_xel,&amp;__pyx_n_s_idex,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_xel)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_idex)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("downsample_circle", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(0, 109, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "downsample_circle") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 109, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_xel = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_int16_t(values[0], PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_xel.memview)) __PYX_ERR(0, 109, __pyx_L3_error)</span>
    __pyx_v_idex = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int32_t(values[1], PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_idex.memview)) __PYX_ERR(0, 109, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("downsample_circle", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 109, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.downsample_circle", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_10Lidar_core_4downsample_circle(__pyx_self, __pyx_v_xel, __pyx_v_idex);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_4downsample_circle(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_xel, __Pyx_memviewslice __pyx_v_idex) {
  long __pyx_v_i;
  long __pyx_v_j;
  long __pyx_v_k;
  long __pyx_v_lp;
  __Pyx_memviewslice __pyx_v_tmp = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_points_downsample = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_tsum = { 0, 0, { 0 }, { 0 }, { 0 } };
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("downsample_circle", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_8, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_9, 1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.downsample_circle", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_tmp, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_points_downsample, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_tsum, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_xel, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex, 1);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__122 = <span class='py_c_api'>PyTuple_Pack</span>(9, __pyx_n_s_xel, __pyx_n_s_idex, __pyx_n_s_i, __pyx_n_s_j, __pyx_n_s_k, __pyx_n_s_lp, __pyx_n_s_tmp, __pyx_n_s_points_downsample, __pyx_n_s_tsum);<span class='error_goto'> if (unlikely(!__pyx_tuple__122)) __PYX_ERR(0, 109, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__122);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__122);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_5downsample_circle, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 109, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_downsample_circle, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 109, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__123 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(2, 0, 9, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__122, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_downsample_circle, 109, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__123)) __PYX_ERR(0, 109, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">110</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">j</span><span class="p">,</span> <span class="nf">k</span><span class="p">,</span> <span class="nf">lp</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_lp = 0;
</pre><pre class="cython line score-63" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">111</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int16_t</span>[<span class="p">:,:]</span>  <span class="n">tmp</span><span class="p">,</span> <span class="n">points_downsample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">xel</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="mf">4</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span> <span class="c"># mx, my, mz, sumI</span></pre>
<pre class='cython code score-63 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 111, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_empty);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 111, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyInt_FromSsize_t</span>((__pyx_v_xel.shape[0]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 111, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 111, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1, __pyx_int_4);
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 111, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int16);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 111, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_4, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 111, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_4, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 111, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 111, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_2) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_5);
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 111, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_8 = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_int16_t(__pyx_t_1, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_8.memview)) __PYX_ERR(0, 111, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_points_downsample = __pyx_t_8;
  __pyx_t_8.memview = NULL;
  __pyx_t_8.data = NULL;
</pre><pre class="cython line score-32" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">112</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int32_t</span>[<span class="p">:]</span> <span class="n">tsum</span> <span class="o">=</span> <span class="n">cvarray</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mf">4</span><span class="p">,),</span> <span class="n">itemsize</span><span class="o">=</span><span class="n">sizeof</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">),</span> <span class="n">format</span><span class="o">=</span><span class="n">i32</span><span class="p">)</span></pre>
<pre class='cython code score-32 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 112, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_shape, __pyx_tuple__2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 112, __pyx_L1_error)</span>
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_5numpy_int32_t)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 112, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_itemsize, __pyx_t_3) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 112, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_i32);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 112, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_format, __pyx_t_3) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 112, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_array_type), __pyx_empty_tuple, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 112, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_9 = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int32_t(__pyx_t_3, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_9.memview)) __PYX_ERR(0, 112, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_tsum = __pyx_t_9;
  __pyx_t_9.memview = NULL;
  __pyx_t_9.data = NULL;
/* … */
  __pyx_tuple__2 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_int_4);<span class='error_goto'> if (unlikely(!__pyx_tuple__2)) __PYX_ERR(0, 112, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__2);
</pre><pre class="cython line score-0">&#xA0;<span class="">113</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">114</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_10 = (__pyx_v_idex.shape[0]);
  __pyx_t_11 = __pyx_t_10;
  for (__pyx_t_12 = 0; __pyx_t_12 &lt; __pyx_t_11; __pyx_t_12+=1) {
    __pyx_v_i = __pyx_t_12;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">115</span>:         <span class="k">if</span> <span class="n">i</span><span class="o">+</span><span class="mf">1</span> <span class="o">&lt;</span> <span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span><span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]:</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">xel</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">idex</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mf">1</span><span class="p">]]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_13 = (((__pyx_v_i + 1) &lt; ((int)(__pyx_v_idex.shape[0]))) != 0);
    if (__pyx_t_13) {
      __pyx_t_14 = __pyx_v_i;
      __pyx_t_15 = (__pyx_v_i + 1);
      __pyx_t_8.data = __pyx_v_xel.data;
      __pyx_t_8.memview = __pyx_v_xel.memview;
      __PYX_INC_MEMVIEW(&amp;__pyx_t_8, 0);
      __pyx_t_6 = -1;
      if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_8,
    __pyx_v_xel.shape[0], __pyx_v_xel.strides[0], __pyx_v_xel.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_14 * __pyx_v_idex.strides[0]) ))),
    (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_15 * __pyx_v_idex.strides[0]) ))),
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 115, __pyx_L1_error)</span>
}

__pyx_t_8.shape[1] = __pyx_v_xel.shape[1];
__pyx_t_8.strides[1] = __pyx_v_xel.strides[1];
    __pyx_t_8.suboffsets[1] = -1;

__PYX_XDEC_MEMVIEW(&amp;__pyx_v_tmp, 1);
      __pyx_v_tmp = __pyx_t_8;
      __pyx_t_8.memview = NULL;
      __pyx_t_8.data = NULL;
      goto __pyx_L5;
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">116</span>:         <span class="k">else</span><span class="p">:</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">xel</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="n">i</span><span class="p">]:]</span></pre>
<pre class='cython code score-0 '>    /*else*/ {
      __pyx_t_16 = __pyx_v_i;
      __pyx_t_8.data = __pyx_v_xel.data;
      __pyx_t_8.memview = __pyx_v_xel.memview;
      __PYX_INC_MEMVIEW(&amp;__pyx_t_8, 0);
      __pyx_t_6 = -1;
      if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_8,
    __pyx_v_xel.shape[0], __pyx_v_xel.strides[0], __pyx_v_xel.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_16 * __pyx_v_idex.strides[0]) ))),
    0,
    0,
    1,
    0,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 116, __pyx_L1_error)</span>
}

__pyx_t_8.shape[1] = __pyx_v_xel.shape[1];
__pyx_t_8.strides[1] = __pyx_v_xel.strides[1];
    __pyx_t_8.suboffsets[1] = -1;

__PYX_XDEC_MEMVIEW(&amp;__pyx_v_tmp, 1);
      __pyx_v_tmp = __pyx_t_8;
      __pyx_t_8.memview = NULL;
      __pyx_t_8.data = NULL;
    }
    __pyx_L5:;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">117</span>:         <span class="n">tsum</span><span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>    {
        __pyx_t_5numpy_int32_t __pyx_temp_scalar = 0;
        {
            Py_ssize_t __pyx_temp_extent_0 = __pyx_v_tsum.shape[0];
            Py_ssize_t __pyx_temp_stride_0 = __pyx_v_tsum.strides[0];
            char *__pyx_temp_pointer_0;
            Py_ssize_t __pyx_temp_idx_0;
            __pyx_temp_pointer_0 = __pyx_v_tsum.data;
            for (__pyx_temp_idx_0 = 0; __pyx_temp_idx_0 &lt; __pyx_temp_extent_0; __pyx_temp_idx_0++) {
              *((__pyx_t_5numpy_int32_t *) __pyx_temp_pointer_0) = __pyx_temp_scalar;
              __pyx_temp_pointer_0 += __pyx_temp_stride_0;
            }
        }
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">118</span>:         <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>    __pyx_t_17 = (__pyx_v_tmp.shape[0]);
    __pyx_t_18 = __pyx_t_17;
    for (__pyx_t_19 = 0; __pyx_t_19 &lt; __pyx_t_18; __pyx_t_19+=1) {
      __pyx_v_j = __pyx_t_19;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">119</span>:             <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">4</span><span class="p">):</span> <span class="n">tsum</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">+=</span> <span class="n">tmp</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">]</span> <span class="c"># x, y, z, I取平均</span></pre>
<pre class='cython code score-0 '>      for (__pyx_t_20 = 0; __pyx_t_20 &lt; 4; __pyx_t_20+=1) {
        __pyx_v_k = __pyx_t_20;
        __pyx_t_21 = __pyx_v_j;
        __pyx_t_22 = __pyx_v_k;
        __pyx_t_23 = __pyx_v_k;
        *((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_tsum.data + __pyx_t_23 * __pyx_v_tsum.strides[0]) )) += (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_tmp.data + __pyx_t_21 * __pyx_v_tmp.strides[0]) ) + __pyx_t_22 * __pyx_v_tmp.strides[1]) )));
      }
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">120</span>:         <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">4</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>    for (__pyx_t_19 = 0; __pyx_t_19 &lt; 4; __pyx_t_19+=1) {
      __pyx_v_k = __pyx_t_19;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">121</span>:             <span class="n">points_downsample</span><span class="p">[</span><span class="n">lp</span><span class="p">,</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">tsum</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">//</span><span class="p">(</span><span class="n">j</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span>  <span class="c"># (j+1) = tmp.shape[0]            </span></pre>
<pre class='cython code score-0 '>      __pyx_t_24 = __pyx_v_k;
      __pyx_t_25 = __pyx_v_lp;
      __pyx_t_26 = __pyx_v_k;
      *((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_points_downsample.data + __pyx_t_25 * __pyx_v_points_downsample.strides[0]) ) + __pyx_t_26 * __pyx_v_points_downsample.strides[1]) )) = ((*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_tsum.data + __pyx_t_24 * __pyx_v_tsum.strides[0]) ))) / (__pyx_v_j + 1));
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">122</span>:         <span class="n">lp</span> <span class="o">=</span> <span class="n">lp</span><span class="o">+</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>    __pyx_v_lp = (__pyx_v_lp + 1);
  }
</pre><pre class="cython line score-48" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">123</span>:     <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">ctypeslib</span><span class="o">.</span><span class="n">as_array</span><span class="p">(</span><span class="n">points_downsample</span><span class="p">[:</span><span class="n">lp</span><span class="p">])</span></pre>
<pre class='cython code score-48 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 123, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_ctypeslib);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 123, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_as_array);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 123, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_8.data = __pyx_v_points_downsample.data;
  __pyx_t_8.memview = __pyx_v_points_downsample.memview;
  __PYX_INC_MEMVIEW(&amp;__pyx_t_8, 0);
  __pyx_t_6 = -1;
  if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_8,
    __pyx_v_points_downsample.shape[0], __pyx_v_points_downsample.strides[0], __pyx_v_points_downsample.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    0,
    __pyx_v_lp,
    0,
    0,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 123, __pyx_L1_error)</span>
}

__pyx_t_8.shape[1] = __pyx_v_points_downsample.shape[1];
__pyx_t_8.strides[1] = __pyx_v_points_downsample.strides[1];
    __pyx_t_8.suboffsets[1] = -1;

__pyx_t_7 = __pyx_memoryview_fromslice(__pyx_t_8, 2, (PyObject *(*)(char *)) __pyx_memview_get_nn___pyx_t_5numpy_int16_t, (int (*)(char *, PyObject *)) __pyx_memview_set_nn___pyx_t_5numpy_int16_t, 0);;<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 123, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_8, 1);
  __pyx_t_8.memview = NULL;
  __pyx_t_8.data = NULL;
  __pyx_t_5 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  if (!__pyx_t_5) {
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 123, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_1)) {
      PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_7};
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 123, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_1)) {
      PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_7};
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 123, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    {
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 123, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_5); __pyx_t_5 = NULL;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+1, __pyx_t_7);
      __pyx_t_7 = 0;
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 123, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_r = __pyx_t_3;
  __pyx_t_3 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">124</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">125</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">126</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">127</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-45" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">128</span>: <span class="k">def</span> <span class="nf">grid_circle</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int16_t</span><span class="p">[:,:]</span> <span class="n">voxel</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:]</span> <span class="n">idex</span><span class="p">):</span> <span class="c"># 依附于栅格化下的循环操作</span></pre>
<pre class='cython code score-45 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_7grid_circle(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_7grid_circle = {"grid_circle", (PyCFunction)__pyx_pw_10Lidar_core_7grid_circle, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_7grid_circle(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  __Pyx_memviewslice __pyx_v_voxel = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_idex = { 0, 0, { 0 }, { 0 }, { 0 } };
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("grid_circle (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_voxel,&amp;__pyx_n_s_idex,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_voxel)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_idex)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("grid_circle", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(0, 128, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "grid_circle") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 128, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_voxel = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_int16_t(values[0], PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_voxel.memview)) __PYX_ERR(0, 128, __pyx_L3_error)</span>
    __pyx_v_idex = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int32_t(values[1], PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_idex.memview)) __PYX_ERR(0, 128, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("grid_circle", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 128, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.grid_circle", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_10Lidar_core_6grid_circle(__pyx_self, __pyx_v_voxel, __pyx_v_idex);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_6grid_circle(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_voxel, __Pyx_memviewslice __pyx_v_idex) {
  long __pyx_v_i;
  long __pyx_v_j;
  long __pyx_v_m;
  long __pyx_v_n;
  long __pyx_v_lp;
  long __pyx_v_zmax;
  long __pyx_v_zmin;
  __Pyx_memviewslice __pyx_v_tmp = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_points_grid = { 0, 0, { 0 }, { 0 }, { 0 } };
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("grid_circle", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_8, 1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.grid_circle", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_tmp, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_points_grid, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_voxel, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex, 1);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__124 = <span class='py_c_api'>PyTuple_Pack</span>(11, __pyx_n_s_voxel, __pyx_n_s_idex, __pyx_n_s_i, __pyx_n_s_j, __pyx_n_s_m, __pyx_n_s_n, __pyx_n_s_lp, __pyx_n_s_zmax, __pyx_n_s_zmin, __pyx_n_s_tmp, __pyx_n_s_points_grid);<span class='error_goto'> if (unlikely(!__pyx_tuple__124)) __PYX_ERR(0, 128, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__124);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__124);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_7grid_circle, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 128, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_grid_circle, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 128, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__125 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(2, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__124, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_grid_circle, 128, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__125)) __PYX_ERR(0, 128, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">129</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">j</span><span class="p">,</span> <span class="nf">m</span><span class="p">,</span> <span class="nf">n</span><span class="p">,</span> <span class="nf">lp</span><span class="o">=</span><span class="mf">0</span><span class="p">,</span> <span class="n">zmax</span><span class="p">,</span> <span class="n">zmin</span></pre>
<pre class='cython code score-0 '>  __pyx_v_lp = 0;
</pre><pre class="cython line score-63" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">130</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int16_t</span>[<span class="p">:,:]</span> <span class="n">tmp</span><span class="p">,</span> <span class="n">points_grid</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">voxel</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="mf">7</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span> <span class="c"># &#39;sx&#39;,&#39;sy&#39;,&#39;x&#39;,&#39;y&#39;,&#39;z&#39;,&#39;zmax&#39;,&#39;I&#39;  </span></pre>
<pre class='cython code score-63 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 130, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_empty);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 130, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyInt_FromSsize_t</span>((__pyx_v_voxel.shape[0]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 130, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 130, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_7);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_7);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1, __pyx_int_7);
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 130, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int16);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 130, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_4, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 130, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_4, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 130, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 130, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_2) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_5);
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 130, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_8 = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_int16_t(__pyx_t_1, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_8.memview)) __PYX_ERR(0, 130, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_points_grid = __pyx_t_8;
  __pyx_t_8.memview = NULL;
  __pyx_t_8.data = NULL;
</pre><pre class="cython line score-0">&#xA0;<span class="">131</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">132</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_9 = (__pyx_v_idex.shape[0]);
  __pyx_t_10 = __pyx_t_9;
  for (__pyx_t_11 = 0; __pyx_t_11 &lt; __pyx_t_10; __pyx_t_11+=1) {
    __pyx_v_i = __pyx_t_11;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">133</span>:         <span class="n">zmax</span><span class="p">,</span> <span class="n">zmin</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1000</span><span class="p">,</span> <span class="mf">1000</span>  <span class="c"># 赋予zmax, zmin初始值</span></pre>
<pre class='cython code score-0 '>    __pyx_t_12 = -1000L;
    __pyx_t_13 = 0x3E8;
    __pyx_v_zmax = __pyx_t_12;
    __pyx_v_zmin = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">134</span>:         <span class="k">if</span> <span class="n">i</span><span class="o">+</span><span class="mf">1</span> <span class="o">&lt;</span> <span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]:</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">voxel</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">idex</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mf">1</span><span class="p">]]</span>  <span class="c"># sx, sy, x, y, z, I</span></pre>
<pre class='cython code score-0 '>    __pyx_t_14 = (((__pyx_v_i + 1) &lt; (__pyx_v_idex.shape[0])) != 0);
    if (__pyx_t_14) {
      __pyx_t_15 = __pyx_v_i;
      __pyx_t_16 = (__pyx_v_i + 1);
      __pyx_t_8.data = __pyx_v_voxel.data;
      __pyx_t_8.memview = __pyx_v_voxel.memview;
      __PYX_INC_MEMVIEW(&amp;__pyx_t_8, 0);
      __pyx_t_6 = -1;
      if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_8,
    __pyx_v_voxel.shape[0], __pyx_v_voxel.strides[0], __pyx_v_voxel.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_15 * __pyx_v_idex.strides[0]) ))),
    (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_16 * __pyx_v_idex.strides[0]) ))),
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 134, __pyx_L1_error)</span>
}

__pyx_t_8.shape[1] = __pyx_v_voxel.shape[1];
__pyx_t_8.strides[1] = __pyx_v_voxel.strides[1];
    __pyx_t_8.suboffsets[1] = -1;

__PYX_XDEC_MEMVIEW(&amp;__pyx_v_tmp, 1);
      __pyx_v_tmp = __pyx_t_8;
      __pyx_t_8.memview = NULL;
      __pyx_t_8.data = NULL;
      goto __pyx_L5;
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">135</span>:         <span class="k">else</span><span class="p">:</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">voxel</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="n">i</span><span class="p">]:]</span></pre>
<pre class='cython code score-0 '>    /*else*/ {
      __pyx_t_17 = __pyx_v_i;
      __pyx_t_8.data = __pyx_v_voxel.data;
      __pyx_t_8.memview = __pyx_v_voxel.memview;
      __PYX_INC_MEMVIEW(&amp;__pyx_t_8, 0);
      __pyx_t_6 = -1;
      if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_8,
    __pyx_v_voxel.shape[0], __pyx_v_voxel.strides[0], __pyx_v_voxel.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_17 * __pyx_v_idex.strides[0]) ))),
    0,
    0,
    1,
    0,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 135, __pyx_L1_error)</span>
}

__pyx_t_8.shape[1] = __pyx_v_voxel.shape[1];
__pyx_t_8.strides[1] = __pyx_v_voxel.strides[1];
    __pyx_t_8.suboffsets[1] = -1;

__PYX_XDEC_MEMVIEW(&amp;__pyx_v_tmp, 1);
      __pyx_v_tmp = __pyx_t_8;
      __pyx_t_8.memview = NULL;
      __pyx_t_8.data = NULL;
    }
    __pyx_L5:;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">136</span>:         <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>    __pyx_t_18 = (__pyx_v_tmp.shape[0]);
    __pyx_t_19 = __pyx_t_18;
    for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_19; __pyx_t_13+=1) {
      __pyx_v_j = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">137</span>:             <span class="n">zmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">zmax</span><span class="p">,</span> <span class="n">tmp</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="mf">4</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>      __pyx_t_20 = __pyx_v_j;
      __pyx_t_21 = 4;
      __pyx_t_22 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_tmp.data + __pyx_t_20 * __pyx_v_tmp.strides[0]) ) + __pyx_t_21 * __pyx_v_tmp.strides[1]) )));
      __pyx_t_12 = __pyx_v_zmax;
      if (((__pyx_t_22 &gt; __pyx_t_12) != 0)) {
        __pyx_t_23 = __pyx_t_22;
      } else {
        __pyx_t_23 = __pyx_t_12;
      }
      __pyx_v_zmax = __pyx_t_23;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">138</span>:             <span class="n">zmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">zmin</span><span class="p">,</span> <span class="n">tmp</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="mf">4</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>      __pyx_t_24 = __pyx_v_j;
      __pyx_t_25 = 4;
      __pyx_t_22 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_tmp.data + __pyx_t_24 * __pyx_v_tmp.strides[0]) ) + __pyx_t_25 * __pyx_v_tmp.strides[1]) )));
      __pyx_t_23 = __pyx_v_zmin;
      if (((__pyx_t_22 &lt; __pyx_t_23) != 0)) {
        __pyx_t_12 = __pyx_t_22;
      } else {
        __pyx_t_12 = __pyx_t_23;
      }
      __pyx_v_zmin = __pyx_t_12;
    }
</pre><pre class="cython line score-0">&#xA0;<span class="">139</span>:         <span class="c"># if (zmax-zmin &lt; 40) or (zmax &lt; 80): continue  # 则把tmp赋值给points_update</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">140</span>:         <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">tmp</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>    __pyx_t_18 = (__pyx_v_tmp.shape[0]);
    __pyx_t_19 = __pyx_t_18;
    for (__pyx_t_13 = 0; __pyx_t_13 &lt; __pyx_t_19; __pyx_t_13+=1) {
      __pyx_v_m = __pyx_t_13;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">141</span>:             <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">5</span><span class="p">):</span> <span class="n">points_grid</span><span class="p">[</span><span class="n">lp</span><span class="o">+</span><span class="n">m</span><span class="p">,</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="n">m</span><span class="p">,</span><span class="n">n</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>      for (__pyx_t_12 = 0; __pyx_t_12 &lt; 5; __pyx_t_12+=1) {
        __pyx_v_n = __pyx_t_12;
        __pyx_t_26 = __pyx_v_m;
        __pyx_t_27 = __pyx_v_n;
        __pyx_t_28 = (__pyx_v_lp + __pyx_v_m);
        __pyx_t_29 = __pyx_v_n;
        *((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_points_grid.data + __pyx_t_28 * __pyx_v_points_grid.strides[0]) ) + __pyx_t_29 * __pyx_v_points_grid.strides[1]) )) = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_tmp.data + __pyx_t_26 * __pyx_v_tmp.strides[0]) ) + __pyx_t_27 * __pyx_v_tmp.strides[1]) )));
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">142</span>:             <span class="n">points_grid</span><span class="p">[</span><span class="n">lp</span><span class="o">+</span><span class="n">m</span><span class="p">,</span><span class="mf">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">zmax</span></pre>
<pre class='cython code score-0 '>      __pyx_t_30 = (__pyx_v_lp + __pyx_v_m);
      __pyx_t_31 = 5;
      *((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_points_grid.data + __pyx_t_30 * __pyx_v_points_grid.strides[0]) ) + __pyx_t_31 * __pyx_v_points_grid.strides[1]) )) = __pyx_v_zmax;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">143</span>:             <span class="n">points_grid</span><span class="p">[</span><span class="n">lp</span><span class="o">+</span><span class="n">m</span><span class="p">,</span><span class="mf">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="n">m</span><span class="p">,</span><span class="mf">5</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>      __pyx_t_32 = __pyx_v_m;
      __pyx_t_33 = 5;
      __pyx_t_34 = (__pyx_v_lp + __pyx_v_m);
      __pyx_t_35 = 6;
      *((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_points_grid.data + __pyx_t_34 * __pyx_v_points_grid.strides[0]) ) + __pyx_t_35 * __pyx_v_points_grid.strides[1]) )) = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_tmp.data + __pyx_t_32 * __pyx_v_tmp.strides[0]) ) + __pyx_t_33 * __pyx_v_tmp.strides[1]) )));
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">144</span>:         <span class="n">lp</span> <span class="o">+=</span> <span class="p">&lt;</span><span class="kt">long</span><span class="p">&gt;(</span><span class="n">tmp</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>    __pyx_v_lp = (__pyx_v_lp + ((long)(__pyx_v_tmp.shape[0])));
  }
</pre><pre class="cython line score-48" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">145</span>:     <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">ctypeslib</span><span class="o">.</span><span class="n">as_array</span><span class="p">(</span><span class="n">points_grid</span><span class="p">[:</span><span class="n">lp</span><span class="p">])</span></pre>
<pre class='cython code score-48 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 145, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_ctypeslib);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 145, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_as_array);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 145, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_8.data = __pyx_v_points_grid.data;
  __pyx_t_8.memview = __pyx_v_points_grid.memview;
  __PYX_INC_MEMVIEW(&amp;__pyx_t_8, 0);
  __pyx_t_6 = -1;
  if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_8,
    __pyx_v_points_grid.shape[0], __pyx_v_points_grid.strides[0], __pyx_v_points_grid.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    0,
    __pyx_v_lp,
    0,
    0,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 145, __pyx_L1_error)</span>
}

__pyx_t_8.shape[1] = __pyx_v_points_grid.shape[1];
__pyx_t_8.strides[1] = __pyx_v_points_grid.strides[1];
    __pyx_t_8.suboffsets[1] = -1;

__pyx_t_7 = __pyx_memoryview_fromslice(__pyx_t_8, 2, (PyObject *(*)(char *)) __pyx_memview_get_nn___pyx_t_5numpy_int16_t, (int (*)(char *, PyObject *)) __pyx_memview_set_nn___pyx_t_5numpy_int16_t, 0);;<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 145, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_8, 1);
  __pyx_t_8.memview = NULL;
  __pyx_t_8.data = NULL;
  __pyx_t_5 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
    }
  }
  if (!__pyx_t_5) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 145, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_7};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 145, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_7};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 145, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    {
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 145, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_5); __pyx_t_5 = NULL;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+1, __pyx_t_7);
      __pyx_t_7 = 0;
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 145, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">146</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">147</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">148</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">149</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">150</span>: <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">is_in</span><span class="p">(</span><span class="nb">long</span> <span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:]</span> <span class="n">X</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>static int __pyx_f_10Lidar_core_is_in(long __pyx_v_x, __Pyx_memviewslice __pyx_v_X) {
  int __pyx_v_i;
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("is_in", 0);
/* … */
  /* function exit code */
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">151</span>:     <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">i</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">152</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = (__pyx_v_X.shape[0]);
  __pyx_t_2 = __pyx_t_1;
  for (__pyx_t_3 = 0; __pyx_t_3 &lt; __pyx_t_2; __pyx_t_3+=1) {
    __pyx_v_i = __pyx_t_3;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">153</span>:         <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span> <span class="k">return</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>    __pyx_t_4 = __pyx_v_i;
    __pyx_t_5 = ((__pyx_v_x == (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_X.data + __pyx_t_4 * __pyx_v_X.strides[0]) )))) != 0);
    if (__pyx_t_5) {
      __pyx_r = 1;
      goto __pyx_L0;
    }
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">154</span>:     <span class="k">return</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_r = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">155</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">156</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">157</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-7" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">158</span>: <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int32_t</span>[<span class="p">:]</span> <span class="n">delete_1d</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:]</span> <span class="n">X</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:]</span> <span class="n">idex</span><span class="p">,</span> <span class="nb">int</span> <span class="n">axis</span><span class="o">=</span><span class="mf">0</span><span class="p">):</span></pre>
<pre class='cython code score-7 '>static __Pyx_memviewslice __pyx_f_10Lidar_core_delete_1d(__Pyx_memviewslice __pyx_v_X, __Pyx_memviewslice __pyx_v_idex, struct __pyx_opt_args_10Lidar_core_delete_1d *__pyx_optional_args) {
  int __pyx_v_axis = ((int)0);
  int __pyx_v_i;
  int __pyx_v_lx;
  int __pyx_v_lo;
  __Pyx_memviewslice __pyx_v_output = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_r = { 0, 0, { 0 }, { 0 }, { 0 } };
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("delete_1d", 0);
  if (__pyx_optional_args) {
    if (__pyx_optional_args-&gt;__pyx_n &gt; 0) {
      __pyx_v_axis = __pyx_optional_args-&gt;axis;
    }
  }
/* … */
  /* function exit code */
  __pyx_L1_error:;
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_5, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_7, 1);
  __pyx_r.data = NULL;
  __pyx_r.memview = NULL;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.delete_1d", __pyx_clineno, __pyx_lineno, __pyx_filename);

  goto __pyx_L2;
  __pyx_L0:;
  if (unlikely(!__pyx_r.memview)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "Memoryview return value is not initialized");
  }
  __pyx_L2:;
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_output, 1);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
struct __pyx_opt_args_10Lidar_core_delete_1d {
  int __pyx_n;
  int axis;
};
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">159</span>:     <span class="k">cdef</span> <span class="kt">int</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">lx</span> <span class="o">=</span> <span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">lo</span><span class="o">=</span><span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_lx = ((int)(__pyx_v_X.shape[0]));
  __pyx_v_lo = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">160</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int32_t</span>[<span class="p">:]</span> <span class="n">output</span> <span class="o">=</span> <span class="n">X</span> <span class="c"># cvarray(shape=(lx,), itemsize=sizeof(long), format=&#39;l&#39;)</span></pre>
<pre class='cython code score-0 '>  __PYX_INC_MEMVIEW(&amp;__pyx_v_X, 0);
  __pyx_v_output = __pyx_v_X;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">161</span>:     <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = ((__pyx_v_axis == 0) != 0);
  if (__pyx_t_1) {
/* … */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">162</span>:         <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lx</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>    __pyx_t_2 = __pyx_v_lx;
    __pyx_t_3 = __pyx_t_2;
    for (__pyx_t_4 = 0; __pyx_t_4 &lt; __pyx_t_3; __pyx_t_4+=1) {
      __pyx_v_i = __pyx_t_4;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">163</span>:             <span class="k">if</span> <span class="n">is_in</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">idex</span><span class="p">):</span> <span class="k">continue</span></pre>
<pre class='cython code score-0 '>      __pyx_t_1 = (__pyx_f_10Lidar_core_is_in(__pyx_v_i, __pyx_v_idex) != 0);
      if (__pyx_t_1) {
        goto __pyx_L4_continue;
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">164</span>:             <span class="n">output</span><span class="p">[</span><span class="n">lo</span><span class="p">:</span><span class="n">lo</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">X</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mf">1</span><span class="p">];</span> <span class="n">lo</span> <span class="o">+=</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>      __pyx_t_5.data = __pyx_v_X.data;
      __pyx_t_5.memview = __pyx_v_X.memview;
      __PYX_INC_MEMVIEW(&amp;__pyx_t_5, 0);
      __pyx_t_6 = -1;
      if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_5,
    __pyx_v_X.shape[0], __pyx_v_X.strides[0], __pyx_v_X.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    __pyx_v_i,
    (__pyx_v_i + 1),
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 164, __pyx_L1_error)</span>
}

__pyx_t_7.data = __pyx_v_output.data;
      __pyx_t_7.memview = __pyx_v_output.memview;
      __PYX_INC_MEMVIEW(&amp;__pyx_t_7, 0);
      __pyx_t_6 = -1;
      if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_7,
    __pyx_v_output.shape[0], __pyx_v_output.strides[0], __pyx_v_output.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    __pyx_v_lo,
    (__pyx_v_lo + 1),
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 164, __pyx_L1_error)</span>
}

if (unlikely(__pyx_memoryview_copy_contents(__pyx_t_5, __pyx_t_7, 1, 1, 0) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 164, __pyx_L1_error)</span>
      __PYX_XDEC_MEMVIEW(&amp;__pyx_t_7, 1);
      __pyx_t_7.memview = NULL;
      __pyx_t_7.data = NULL;
      __PYX_XDEC_MEMVIEW(&amp;__pyx_t_5, 1);
      __pyx_t_5.memview = NULL;
      __pyx_t_5.data = NULL;
      __pyx_v_lo = (__pyx_v_lo + 1);
      __pyx_L4_continue:;
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">165</span>:     <span class="k">return</span> <span class="n">output</span><span class="p">[:</span><span class="n">lo</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>  __pyx_t_5.data = __pyx_v_output.data;
  __pyx_t_5.memview = __pyx_v_output.memview;
  __PYX_INC_MEMVIEW(&amp;__pyx_t_5, 0);
  __pyx_t_2 = -1;
  if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_5,
    __pyx_v_output.shape[0], __pyx_v_output.strides[0], __pyx_v_output.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_2,
    0,
    __pyx_v_lo,
    0,
    0,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 165, __pyx_L1_error)</span>
}

__pyx_r = __pyx_t_5;
  __pyx_t_5.memview = NULL;
  __pyx_t_5.data = NULL;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">166</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">167</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">168</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">169</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">170</span>: <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int32_t</span>[<span class="p">:]</span> <span class="n">cluster_circle2</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int16_t</span><span class="p">[:,:,:]</span> <span class="n">points_slice</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int16_t</span><span class="p">[:,:]</span> <span class="n">grid_slice</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int16_t</span><span class="p">[:,:]</span> <span class="n">target_points</span><span class="p">,</span></pre>
<pre class='cython code score-10 '>static __Pyx_memviewslice __pyx_f_10Lidar_core_cluster_circle2(__Pyx_memviewslice __pyx_v_points_slice, __Pyx_memviewslice __pyx_v_grid_slice, __Pyx_memviewslice __pyx_v_target_points, __Pyx_memviewslice __pyx_v_idex, __Pyx_memviewslice __pyx_v_idex2, __Pyx_memviewslice __pyx_v_split, __Pyx_memviewslice __pyx_v_num) {
  long __pyx_v_i;
  long __pyx_v_j;
  long __pyx_v_lp2;
  long __pyx_v_lr2;
  __Pyx_memviewslice __pyx_v_seed_grid2 = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_idex_round2 = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_idex2_2 = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_r = { 0, 0, { 0 }, { 0 }, { 0 } };
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("cluster_circle2", 0);
  __PYX_INC_MEMVIEW(&amp;__pyx_v_idex, 1);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_3, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_4, 1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_11, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_19, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_48, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_50, 1);
  __pyx_r.data = NULL;
  __pyx_r.memview = NULL;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.cluster_circle2", __pyx_clineno, __pyx_lineno, __pyx_filename);

  goto __pyx_L2;
  __pyx_L0:;
  if (unlikely(!__pyx_r.memview)) {
    <span class='py_c_api'>PyErr_SetString</span>(PyExc_TypeError, "Memoryview return value is not initialized");
  }
  __pyx_L2:;
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_seed_grid2, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex_round2, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex2_2, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex, 1);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
</pre><pre class="cython line score-0">&#xA0;<span class="">171</span>:                     <span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:]</span> <span class="n">idex</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:]</span> <span class="n">idex2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:]</span> <span class="n">split</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:]</span> <span class="n">num</span><span class="p">):</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">172</span>:     <span class="c"># points_slice: sx[0], sy[1], x[2], y[3], z[4], zmax[5], I[6]</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">173</span>:     <span class="c"># grid_slice: sx, sy, zmax</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">174</span>:     <span class="c"># target_points: sx[0], sy[1], x[2], y[3], z[4], zmax[5], I[6], 被认为是同一目标的点云集合</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">175</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">j</span><span class="p">,</span> <span class="nf">lp2</span><span class="p">,</span> <span class="nf">lr2</span> <span class="c"># lps = &lt;long&gt;points_slice.shape[1]</span></pre>
<pre class="cython line score-29" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">176</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int16_t</span>[<span class="p">:]</span> <span class="n">seed_grid2</span> <span class="o">=</span> <span class="n">cvarray</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mf">3</span><span class="p">,),</span> <span class="n">itemsize</span><span class="o">=</span><span class="n">sizeof</span><span class="p">(</span><span class="n">short</span><span class="p">),</span> <span class="n">format</span><span class="o">=</span><span class="s">&#39;h&#39;</span><span class="p">)</span> <span class="c"># 次级栅格种子</span></pre>
<pre class='cython code score-29 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 176, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_shape, __pyx_tuple__3) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 176, __pyx_L1_error)</span>
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(short)));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 176, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_itemsize, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 176, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_format, __pyx_n_s_h) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 176, __pyx_L1_error)</span>
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_array_type), __pyx_empty_tuple, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 176, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_3 = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int16_t(__pyx_t_2, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_3.memview)) __PYX_ERR(0, 176, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_seed_grid2 = __pyx_t_3;
  __pyx_t_3.memview = NULL;
  __pyx_t_3.data = NULL;
/* … */
  __pyx_tuple__3 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_int_3);<span class='error_goto'> if (unlikely(!__pyx_tuple__3)) __PYX_ERR(0, 176, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__3);
</pre><pre class="cython line score-32" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">177</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int32_t</span>[<span class="p">:]</span> <span class="n">idex_round2</span> <span class="o">=</span> <span class="n">cvarray</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mf">8</span><span class="p">,),</span> <span class="n">itemsize</span><span class="o">=</span><span class="n">sizeof</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">),</span> <span class="n">format</span><span class="o">=</span><span class="n">i32</span><span class="p">)</span> <span class="c"># 次级栅格的邻域索引</span></pre>
<pre class='cython code score-32 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 177, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_shape, __pyx_tuple__4) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 177, __pyx_L1_error)</span>
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_5numpy_int32_t)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 177, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_itemsize, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 177, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_i32);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 177, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_format, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 177, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_array_type), __pyx_empty_tuple, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 177, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_4 = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int32_t(__pyx_t_1, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_4.memview)) __PYX_ERR(0, 177, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_idex_round2 = __pyx_t_4;
  __pyx_t_4.memview = NULL;
  __pyx_t_4.data = NULL;
/* … */
  __pyx_tuple__4 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_int_8);<span class='error_goto'> if (unlikely(!__pyx_tuple__4)) __PYX_ERR(0, 177, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__4);
</pre><pre class="cython line score-39" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">178</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int32_t</span>[<span class="p">:]</span> <span class="n">idex2_2</span> <span class="o">=</span> <span class="n">cvarray</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],),</span> <span class="n">itemsize</span><span class="o">=</span><span class="n">sizeof</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">),</span> <span class="n">format</span><span class="o">=</span><span class="n">i32</span><span class="p">)</span> <span class="c"># seed_grid2的邻域slice索引</span></pre>
<pre class='cython code score-39 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 178, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='py_c_api'>PyInt_FromSsize_t</span>((__pyx_v_idex.shape[0]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 178, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 178, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_2);
  __pyx_t_2 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_shape, __pyx_t_5) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 178, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_5numpy_int32_t)));<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 178, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_itemsize, __pyx_t_5) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 178, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_i32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 178, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_format, __pyx_t_5) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 178, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_array_type), __pyx_empty_tuple, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 178, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_4 = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int32_t(__pyx_t_5, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_4.memview)) __PYX_ERR(0, 178, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_v_idex2_2 = __pyx_t_4;
  __pyx_t_4.memview = NULL;
  __pyx_t_4.data = NULL;
</pre><pre class="cython line score-0">&#xA0;<span class="">179</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">180</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">idex2</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span> <span class="c"># 对每一个领域种子索引</span></pre>
<pre class='cython code score-0 '>  __pyx_t_6 = (__pyx_v_idex2.shape[0]);
  __pyx_t_7 = __pyx_t_6;
  for (__pyx_t_8 = 0; __pyx_t_8 &lt; __pyx_t_7; __pyx_t_8+=1) {
    __pyx_v_i = __pyx_t_8;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">181</span>:         <span class="n">seed_grid2</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">grid_slice</span><span class="p">[</span><span class="n">idex2</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">idex2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span>  <span class="c"># 得到次一级种子栅格</span></pre>
<pre class='cython code score-0 '>    __pyx_t_9 = __pyx_v_i;
    __pyx_t_10 = __pyx_v_i;
    __pyx_t_11.data = __pyx_v_grid_slice.data;
    __pyx_t_11.memview = __pyx_v_grid_slice.memview;
    __PYX_INC_MEMVIEW(&amp;__pyx_t_11, 0);
    __pyx_t_12 = -1;
    if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_11,
    __pyx_v_grid_slice.shape[0], __pyx_v_grid_slice.strides[0], __pyx_v_grid_slice.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_12,
    (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex2.data + __pyx_t_9 * __pyx_v_idex2.strides[0]) ))),
    ((*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex2.data + __pyx_t_10 * __pyx_v_idex2.strides[0]) ))) + 1),
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 181, __pyx_L1_error)</span>
}

__pyx_t_11.shape[1] = __pyx_v_grid_slice.shape[1];
__pyx_t_11.strides[1] = __pyx_v_grid_slice.strides[1];
    __pyx_t_11.suboffsets[1] = -1;

if (unlikely(__pyx_memoryview_copy_contents(__pyx_t_11, __pyx_v_seed_grid2, 2, 1, 0) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 181, __pyx_L1_error)</span>
    __PYX_XDEC_MEMVIEW(&amp;__pyx_t_11, 1);
    __pyx_t_11.memview = NULL;
    __pyx_t_11.data = NULL;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">182</span>:         <span class="n">lp2</span> <span class="o">=</span> <span class="n">split</span><span class="p">[</span><span class="n">idex2</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">split</span><span class="p">[</span><span class="n">idex2</span><span class="p">[</span><span class="mf">0</span><span class="p">]]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_13 = 0;
    __pyx_t_14 = ((*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex2.data + __pyx_t_13 * __pyx_v_idex2.strides[0]) ))) + 1);
    __pyx_t_15 = 0;
    __pyx_t_16 = (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex2.data + __pyx_t_15 * __pyx_v_idex2.strides[0]) )));
    __pyx_v_lp2 = ((*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_split.data + __pyx_t_14 * __pyx_v_split.strides[0]) ))) - (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_split.data + __pyx_t_16 * __pyx_v_split.strides[0]) ))));
</pre><pre class="cython line score-0">&#xA0;<span class="">183</span>:         <span class="c"># for j in range(lps): # 找到target_points中当前存入点的数目</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">184</span>:         <span class="c">#     if points_slice[idex2[i], j, 2] == 0 and points_slice[idex2[i], j, 3] == 0:  # x, y 方向为零 </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">185</span>:         <span class="c">#         break</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">186</span>:         <span class="c">#     lp2 += 1</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">187</span>:         <span class="c"># tmp2 = points_slice[idex2[i]:idex2[i]+1] # 该邻域栅格所包含的点云</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">188</span>:         <span class="n">target_points</span><span class="p">[</span><span class="n">num</span><span class="p">[</span><span class="mf">0</span><span class="p">]:</span><span class="n">num</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">+</span><span class="n">lp2</span><span class="p">]</span> <span class="o">=</span> <span class="n">points_slice</span><span class="p">[</span><span class="n">idex2</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span><span class="n">idex2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="mf">1</span><span class="p">,</span><span class="mf">0</span><span class="p">:</span><span class="n">lp2</span><span class="p">];</span> <span class="n">num</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">lp2</span> <span class="c"># 把次级种子栅格的点云加入目标</span></pre>
<pre class='cython code score-0 '>    __pyx_t_17 = __pyx_v_i;
    __pyx_t_18 = __pyx_v_i;
    __pyx_t_19.data = __pyx_v_points_slice.data;
    __pyx_t_19.memview = __pyx_v_points_slice.memview;
    __PYX_INC_MEMVIEW(&amp;__pyx_t_19, 0);
    __pyx_t_12 = -1;
    if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_19,
    __pyx_v_points_slice.shape[0], __pyx_v_points_slice.strides[0], __pyx_v_points_slice.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_12,
    (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex2.data + __pyx_t_17 * __pyx_v_idex2.strides[0]) ))),
    ((*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex2.data + __pyx_t_18 * __pyx_v_idex2.strides[0]) ))) + 1),
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 188, __pyx_L1_error)</span>
}

if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_19,
    __pyx_v_points_slice.shape[1], __pyx_v_points_slice.strides[1], __pyx_v_points_slice.suboffsets[1],
    1,
    1,
    &amp;__pyx_t_12,
    0,
    __pyx_v_lp2,
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 188, __pyx_L1_error)</span>
}

__pyx_t_19.shape[2] = __pyx_v_points_slice.shape[2];
__pyx_t_19.strides[2] = __pyx_v_points_slice.strides[2];
    __pyx_t_19.suboffsets[2] = -1;

__pyx_t_20 = 0;
    __pyx_t_21 = 0;
    __pyx_t_11.data = __pyx_v_target_points.data;
    __pyx_t_11.memview = __pyx_v_target_points.memview;
    __PYX_INC_MEMVIEW(&amp;__pyx_t_11, 0);
    __pyx_t_12 = -1;
    if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_11,
    __pyx_v_target_points.shape[0], __pyx_v_target_points.strides[0], __pyx_v_target_points.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_12,
    (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_num.data + __pyx_t_20 * __pyx_v_num.strides[0]) ))),
    ((*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_num.data + __pyx_t_21 * __pyx_v_num.strides[0]) ))) + __pyx_v_lp2),
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 188, __pyx_L1_error)</span>
}

__pyx_t_11.shape[1] = __pyx_v_target_points.shape[1];
__pyx_t_11.strides[1] = __pyx_v_target_points.strides[1];
    __pyx_t_11.suboffsets[1] = -1;

if (unlikely(__pyx_memoryview_copy_contents(__pyx_t_19, __pyx_t_11, 3, 2, 0) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 188, __pyx_L1_error)</span>
    __PYX_XDEC_MEMVIEW(&amp;__pyx_t_11, 1);
    __pyx_t_11.memview = NULL;
    __pyx_t_11.data = NULL;
    __PYX_XDEC_MEMVIEW(&amp;__pyx_t_19, 1);
    __pyx_t_19.memview = NULL;
    __pyx_t_19.data = NULL;
    __pyx_t_22 = 0;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_num.data + __pyx_t_22 * __pyx_v_num.strides[0]) )) += __pyx_v_lp2;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">189</span>:         <span class="n">idex_round2</span><span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">idex2_2</span><span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">lr2</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span> <span class="c"># 用于存放被选中的邻近栅格的的索引, lr2是idex_round2的索引</span></pre>
<pre class='cython code score-0 '>    __pyx_t_23 = 0;
    __pyx_t_24 = 0;
    __pyx_t_25 = 0;
    {
        __pyx_t_5numpy_int32_t __pyx_temp_scalar = __pyx_t_23;
        {
            Py_ssize_t __pyx_temp_extent_0 = __pyx_v_idex_round2.shape[0];
            Py_ssize_t __pyx_temp_stride_0 = __pyx_v_idex_round2.strides[0];
            char *__pyx_temp_pointer_0;
            Py_ssize_t __pyx_temp_idx_0;
            __pyx_temp_pointer_0 = __pyx_v_idex_round2.data;
            for (__pyx_temp_idx_0 = 0; __pyx_temp_idx_0 &lt; __pyx_temp_extent_0; __pyx_temp_idx_0++) {
              *((__pyx_t_5numpy_int32_t *) __pyx_temp_pointer_0) = __pyx_temp_scalar;
              __pyx_temp_pointer_0 += __pyx_temp_stride_0;
            }
        }
    }
    {
        __pyx_t_5numpy_int32_t __pyx_temp_scalar = __pyx_t_24;
        {
            Py_ssize_t __pyx_temp_extent_0 = __pyx_v_idex2_2.shape[0];
            Py_ssize_t __pyx_temp_stride_0 = __pyx_v_idex2_2.strides[0];
            char *__pyx_temp_pointer_0;
            Py_ssize_t __pyx_temp_idx_0;
            __pyx_temp_pointer_0 = __pyx_v_idex2_2.data;
            for (__pyx_temp_idx_0 = 0; __pyx_temp_idx_0 &lt; __pyx_temp_extent_0; __pyx_temp_idx_0++) {
              *((__pyx_t_5numpy_int32_t *) __pyx_temp_pointer_0) = __pyx_temp_scalar;
              __pyx_temp_pointer_0 += __pyx_temp_stride_0;
            }
        }
    }
    __pyx_v_lr2 = __pyx_t_25;
</pre><pre class="cython line score-0">&#xA0;<span class="">190</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">191</span>:         <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>    __pyx_t_26 = (__pyx_v_idex.shape[0]);
    __pyx_t_27 = __pyx_t_26;
    for (__pyx_t_25 = 0; __pyx_t_25 &lt; __pyx_t_27; __pyx_t_25+=1) {
      __pyx_v_j = __pyx_t_25;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">192</span>:             <span class="k">if</span> <span class="p">((</span><span class="nb">abs</span><span class="p">(</span><span class="n">grid_slice</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="mf">0</span><span class="p">]</span><span class="o">-</span><span class="n">seed_grid2</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mf">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">grid_slice</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="mf">1</span><span class="p">]</span><span class="o">-</span><span class="n">seed_grid2</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mf">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="c"># 如果属于邻近栅格</span></pre>
<pre class='cython code score-0 '>      __pyx_t_28 = __pyx_v_j;
      __pyx_t_29 = (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_28 * __pyx_v_idex.strides[0]) )));
      __pyx_t_30 = 0;
      __pyx_t_31 = 0;
      __pyx_t_12 = abs(((*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_grid_slice.data + __pyx_t_29 * __pyx_v_grid_slice.strides[0]) ) + __pyx_t_30 * __pyx_v_grid_slice.strides[1]) ))) - (*((__pyx_t_5numpy_int16_t *) ( /* dim=0 */ (__pyx_v_seed_grid2.data + __pyx_t_31 * __pyx_v_seed_grid2.strides[0]) )))));<span class='error_goto'> if (unlikely(__pyx_t_12 == ((int)-1))) __PYX_ERR(0, 192, __pyx_L1_error)</span>
      __pyx_t_32 = __pyx_v_j;
      __pyx_t_33 = (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_32 * __pyx_v_idex.strides[0]) )));
      __pyx_t_34 = 1;
      __pyx_t_35 = 1;
      __pyx_t_36 = abs(((*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_grid_slice.data + __pyx_t_33 * __pyx_v_grid_slice.strides[0]) ) + __pyx_t_34 * __pyx_v_grid_slice.strides[1]) ))) - (*((__pyx_t_5numpy_int16_t *) ( /* dim=0 */ (__pyx_v_seed_grid2.data + __pyx_t_35 * __pyx_v_seed_grid2.strides[0]) )))));<span class='error_goto'> if (unlikely(__pyx_t_36 == ((int)-1))) __PYX_ERR(0, 192, __pyx_L1_error)</span>
/* … */
      __pyx_t_42 = ((((__pyx_t_12 &lt;= 1) &amp; (__pyx_t_36 &lt;= 1)) &amp; (__pyx_t_41 &lt;= 0xA0)) != 0);
      if (__pyx_t_42) {
/* … */
      }
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">193</span>:                 <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">grid_slice</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="mf">2</span><span class="p">]</span><span class="o">-</span><span class="n">seed_grid2</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mf">160</span><span class="p">)):</span> <span class="c"># 且zmax相差小于100</span></pre>
<pre class='cython code score-0 '>      __pyx_t_37 = __pyx_v_j;
      __pyx_t_38 = (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_37 * __pyx_v_idex.strides[0]) )));
      __pyx_t_39 = 2;
      __pyx_t_40 = 2;
      __pyx_t_41 = abs(((*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_grid_slice.data + __pyx_t_38 * __pyx_v_grid_slice.strides[0]) ) + __pyx_t_39 * __pyx_v_grid_slice.strides[1]) ))) - (*((__pyx_t_5numpy_int16_t *) ( /* dim=0 */ (__pyx_v_seed_grid2.data + __pyx_t_40 * __pyx_v_seed_grid2.strides[0]) )))));<span class='error_goto'> if (unlikely(__pyx_t_41 == ((int)-1))) __PYX_ERR(0, 193, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">194</span>:                 <span class="n">idex_round2</span><span class="p">[</span><span class="n">lr2</span><span class="p">],</span> <span class="n">idex2_2</span><span class="p">[</span><span class="n">lr2</span><span class="p">],</span> <span class="n">lr2</span> <span class="o">=</span> <span class="n">j</span><span class="p">,</span> <span class="n">idex</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">lr2</span><span class="o">+</span><span class="mf">1</span>     <span class="c"># 将idex2_2中的索引作为种子栅格，进行下一轮栅格筛选</span></pre>
<pre class='cython code score-0 '>        __pyx_t_43 = __pyx_v_j;
        __pyx_t_44 = __pyx_v_j;
        __pyx_t_24 = (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_44 * __pyx_v_idex.strides[0]) )));
        __pyx_t_45 = (__pyx_v_lr2 + 1);
        __pyx_t_46 = __pyx_v_lr2;
        *((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex_round2.data + __pyx_t_46 * __pyx_v_idex_round2.strides[0]) )) = __pyx_t_43;
        __pyx_t_47 = __pyx_v_lr2;
        *((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex2_2.data + __pyx_t_47 * __pyx_v_idex2_2.strides[0]) )) = __pyx_t_24;
        __pyx_v_lr2 = __pyx_t_45;
</pre><pre class="cython line score-0">&#xA0;<span class="">195</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">196</span>:         <span class="n">idex</span> <span class="o">=</span> <span class="n">delete_1d</span><span class="p">(</span><span class="n">idex</span><span class="p">,</span> <span class="n">idex_round2</span><span class="p">[:</span><span class="n">lr2</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mf">0</span><span class="p">)</span> <span class="c"># 从idex中 删除 idex_round2的内容</span></pre>
<pre class='cython code score-0 '>    __pyx_t_4.data = __pyx_v_idex_round2.data;
    __pyx_t_4.memview = __pyx_v_idex_round2.memview;
    __PYX_INC_MEMVIEW(&amp;__pyx_t_4, 0);
    __pyx_t_41 = -1;
    if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_4,
    __pyx_v_idex_round2.shape[0], __pyx_v_idex_round2.strides[0], __pyx_v_idex_round2.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_41,
    0,
    __pyx_v_lr2,
    0,
    0,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 196, __pyx_L1_error)</span>
}

__pyx_t_49.__pyx_n = 1;
    __pyx_t_49.axis = 0;
    __pyx_t_48 = __pyx_f_10Lidar_core_delete_1d(__pyx_v_idex, __pyx_t_4, &amp;__pyx_t_49);<span class='error_goto'> if (unlikely(!__pyx_t_48.memview)) __PYX_ERR(0, 196, __pyx_L1_error)</span>
    __PYX_XDEC_MEMVIEW(&amp;__pyx_t_4, 1);
    __pyx_t_4.memview = NULL;
    __pyx_t_4.data = NULL;
    __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex, 1);
    __pyx_v_idex = __pyx_t_48;
    __pyx_t_48.memview = NULL;
    __pyx_t_48.data = NULL;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">197</span>:         <span class="n">idex</span> <span class="o">=</span> <span class="n">cluster_circle2</span><span class="p">(</span><span class="n">points_slice</span><span class="p">,</span> <span class="n">grid_slice</span><span class="p">,</span> <span class="n">target_points</span><span class="p">,</span> <span class="n">idex</span><span class="p">,</span> <span class="n">idex2_2</span><span class="p">[:</span><span class="n">lr2</span><span class="p">],</span> <span class="n">split</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span> <span class="k">if</span> <span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="k">else</span> <span class="n">idex</span></pre>
<pre class='cython code score-0 '>    if (((__pyx_v_idex.shape[0]) != 0)) {
      __pyx_t_4.data = __pyx_v_idex2_2.data;
      __pyx_t_4.memview = __pyx_v_idex2_2.memview;
      __PYX_INC_MEMVIEW(&amp;__pyx_t_4, 0);
      __pyx_t_41 = -1;
      if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_4,
    __pyx_v_idex2_2.shape[0], __pyx_v_idex2_2.strides[0], __pyx_v_idex2_2.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_41,
    0,
    __pyx_v_lr2,
    0,
    0,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 197, __pyx_L1_error)</span>
}

__pyx_t_50 = __pyx_f_10Lidar_core_cluster_circle2(__pyx_v_points_slice, __pyx_v_grid_slice, __pyx_v_target_points, __pyx_v_idex, __pyx_t_4, __pyx_v_split, __pyx_v_num);<span class='error_goto'> if (unlikely(!__pyx_t_50.memview)) __PYX_ERR(0, 197, __pyx_L1_error)</span>
      __PYX_XDEC_MEMVIEW(&amp;__pyx_t_4, 1);
      __pyx_t_4.memview = NULL;
      __pyx_t_4.data = NULL;
      __pyx_t_48 = __pyx_t_50;
      __pyx_t_50.memview = NULL;
      __pyx_t_50.data = NULL;
    } else {
      __PYX_INC_MEMVIEW(&amp;__pyx_v_idex, 0);
      __pyx_t_48 = __pyx_v_idex;
    }
    __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex, 1);
    __pyx_v_idex = __pyx_t_48;
    __pyx_t_48.memview = NULL;
    __pyx_t_48.data = NULL;
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">198</span>:     <span class="k">return</span> <span class="n">idex</span></pre>
<pre class='cython code score-0 '>  __PYX_INC_MEMVIEW(&amp;__pyx_v_idex, 0);
  __pyx_r = __pyx_v_idex;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">199</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">200</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">201</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-70" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">202</span>: <span class="k">def</span> <span class="nf">cluster_circle</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int16_t</span><span class="p">[:,:,:]</span> <span class="n">points_slice</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int16_t</span><span class="p">[:,:]</span> <span class="n">grid_slice</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:]</span> <span class="n">idex</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">[:]</span> <span class="n">split</span><span class="p">,</span> <span class="nb">long</span> <span class="n">pn</span><span class="p">):</span></pre>
<pre class='cython code score-70 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_9cluster_circle(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_9cluster_circle = {"cluster_circle", (PyCFunction)__pyx_pw_10Lidar_core_9cluster_circle, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_9cluster_circle(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  __Pyx_memviewslice __pyx_v_points_slice = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_grid_slice = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_idex = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_split = { 0, 0, { 0 }, { 0 }, { 0 } };
  long __pyx_v_pn;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("cluster_circle (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_points_slice,&amp;__pyx_n_s_grid_slice,&amp;__pyx_n_s_idex,&amp;__pyx_n_s_split,&amp;__pyx_n_s_pn,0};
    PyObject* values[5] = {0,0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  5: values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_points_slice)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_grid_slice)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("cluster_circle", 1, 5, 5, 1); <span class='error_goto'>__PYX_ERR(0, 202, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_idex)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("cluster_circle", 1, 5, 5, 2); <span class='error_goto'>__PYX_ERR(0, 202, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (likely((values[3] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_split)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("cluster_circle", 1, 5, 5, 3); <span class='error_goto'>__PYX_ERR(0, 202, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (likely((values[4] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_pn)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("cluster_circle", 1, 5, 5, 4); <span class='error_goto'>__PYX_ERR(0, 202, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "cluster_circle") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 202, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 5) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
      values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
      values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
    }
    __pyx_v_points_slice = __Pyx_PyObject_to_MemoryviewSlice_dsdsds_nn___pyx_t_5numpy_int16_t(values[0], PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_points_slice.memview)) __PYX_ERR(0, 202, __pyx_L3_error)</span>
    __pyx_v_grid_slice = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_int16_t(values[1], PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_grid_slice.memview)) __PYX_ERR(0, 202, __pyx_L3_error)</span>
    __pyx_v_idex = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int32_t(values[2], PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_idex.memview)) __PYX_ERR(0, 202, __pyx_L3_error)</span>
    __pyx_v_split = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int32_t(values[3], PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_v_split.memview)) __PYX_ERR(0, 202, __pyx_L3_error)</span>
    __pyx_v_pn = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(values[4]); if (unlikely((__pyx_v_pn == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 202, __pyx_L3_error)</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("cluster_circle", 1, 5, 5, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 202, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.cluster_circle", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  __pyx_r = __pyx_pf_10Lidar_core_8cluster_circle(__pyx_self, __pyx_v_points_slice, __pyx_v_grid_slice, __pyx_v_idex, __pyx_v_split, __pyx_v_pn);

  /* function exit code */
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_8cluster_circle(CYTHON_UNUSED PyObject *__pyx_self, __Pyx_memviewslice __pyx_v_points_slice, __Pyx_memviewslice __pyx_v_grid_slice, __Pyx_memviewslice __pyx_v_idex, __Pyx_memviewslice __pyx_v_split, long __pyx_v_pn) {
  long __pyx_v_i;
  long __pyx_v_lr;
  long __pyx_v_halfcell;
  long __pyx_v_ln;
  long __pyx_v_lp;
  long __pyx_v_xc;
  long __pyx_v_yc;
  long __pyx_v_xmin;
  long __pyx_v_xmax;
  long __pyx_v_ymin;
  long __pyx_v_ymax;
  long __pyx_v_zmin;
  long __pyx_v_zmax;
  long __pyx_v_I;
  __Pyx_memviewslice __pyx_v_target_points = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_target_output = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_seed_grid = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_idex_round = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_idex2 = { 0, 0, { 0 }, { 0 }, { 0 } };
  __Pyx_memviewslice __pyx_v_num = { 0, 0, { 0 }, { 0 }, { 0 } };
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("cluster_circle", 0);
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_8, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_9, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_10, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_11, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_22, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_48, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_50, 1);
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.cluster_circle", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  __pyx_L0:;
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_target_points, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_target_output, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_seed_grid, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex_round, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex2, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_num, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_points_slice, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_grid_slice, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex, 1);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_v_split, 1);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__126 = <span class='py_c_api'>PyTuple_Pack</span>(25, __pyx_n_s_points_slice, __pyx_n_s_grid_slice, __pyx_n_s_idex, __pyx_n_s_split, __pyx_n_s_pn, __pyx_n_s_i, __pyx_n_s_lr, __pyx_n_s_halfcell, __pyx_n_s_ln, __pyx_n_s_lp, __pyx_n_s_xc, __pyx_n_s_yc, __pyx_n_s_xmin, __pyx_n_s_xmax, __pyx_n_s_ymin, __pyx_n_s_ymax, __pyx_n_s_zmin, __pyx_n_s_zmax, __pyx_n_s_I, __pyx_n_s_target_points, __pyx_n_s_target_output, __pyx_n_s_seed_grid, __pyx_n_s_idex_round, __pyx_n_s_idex2, __pyx_n_s_num);<span class='error_goto'> if (unlikely(!__pyx_tuple__126)) __PYX_ERR(0, 202, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__126);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__126);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_9cluster_circle, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 202, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_cluster_circle, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 202, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__127 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(5, 0, 25, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__126, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_cluster_circle, 202, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__127)) __PYX_ERR(0, 202, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">203</span>:     <span class="c"># 对栅格化点云的父级聚类</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">204</span>:     <span class="c"># points_slice: sx[0], sy[1], x[2], y[3], z[4], zmax[5], I[6]</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">205</span>:     <span class="c"># grid_slice: sx, sy, zmax</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">206</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">lr</span><span class="p">,</span> <span class="nf">halfcell</span><span class="o">=</span><span class="mf">25</span><span class="p">,</span> <span class="n">ln</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="n">lp</span></pre>
<pre class='cython code score-0 '>  __pyx_v_halfcell = 25;
  __pyx_v_ln = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">207</span>:     <span class="c"># cdef long lps = &lt;long&gt;points_slice.shape[1] # pn = &lt;long&gt;idex.shape[0]*lps </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">208</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">xc</span><span class="p">,</span> <span class="nf">yc</span><span class="p">,</span> <span class="nf">xmin</span><span class="p">,</span> <span class="nf">xmax</span><span class="p">,</span> <span class="nf">ymin</span><span class="p">,</span> <span class="nf">ymax</span><span class="p">,</span> <span class="nf">zmin</span><span class="p">,</span> <span class="nf">zmax</span><span class="p">,</span> <span class="nf">I</span></pre>
<pre class="cython line score-60" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">209</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int16_t</span>[<span class="p">:,:]</span> <span class="n">target_points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">pn</span><span class="p">,</span><span class="mf">7</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">int16</span><span class="p">)</span></pre>
<pre class='cython code score-60 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 209, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_empty);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 209, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_pn);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 209, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 209, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_7);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_7);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1, __pyx_int_7);
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 209, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int16);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 209, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_4, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 209, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_4, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 209, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 209, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_2) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_5);
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 209, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_8 = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_int16_t(__pyx_t_1, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_8.memview)) __PYX_ERR(0, 209, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_target_points = __pyx_t_8;
  __pyx_t_8.memview = NULL;
  __pyx_t_8.data = NULL;
</pre><pre class="cython line score-63" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">210</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int32_t</span>[<span class="p">:,:]</span> <span class="n">target_output</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="mf">9</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span> <span class="c"># xc, yc, xmin, xmax, ymin, ymax, zmin, zmax, I </span></pre>
<pre class='cython code score-63 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 210, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_empty);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 210, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyInt_FromSsize_t</span>((__pyx_v_idex.shape[0]));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 210, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 210, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_9);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1, __pyx_int_9);
  __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 210, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 210, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_5, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 210, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_5, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 210, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 210, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (__pyx_t_3) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_6, __pyx_t_5);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_6, __pyx_t_4);
    __pyx_t_5 = 0;
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 210, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_9 = __Pyx_PyObject_to_MemoryviewSlice_dsds_nn___pyx_t_5numpy_int32_t(__pyx_t_1, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_9.memview)) __PYX_ERR(0, 210, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_target_output = __pyx_t_9;
  __pyx_t_9.memview = NULL;
  __pyx_t_9.data = NULL;
</pre><pre class="cython line score-29" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">211</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int16_t</span>[<span class="p">:]</span> <span class="n">seed_grid</span> <span class="o">=</span> <span class="n">cvarray</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mf">3</span><span class="p">,),</span> <span class="n">itemsize</span><span class="o">=</span><span class="n">sizeof</span><span class="p">(</span><span class="n">short</span><span class="p">),</span> <span class="n">format</span><span class="o">=</span><span class="s">&#39;h&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-29 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 211, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_shape, __pyx_tuple__5) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 211, __pyx_L1_error)</span>
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(short)));<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 211, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_itemsize, __pyx_t_7) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 211, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_format, __pyx_n_s_h) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 211, __pyx_L1_error)</span>
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_array_type), __pyx_empty_tuple, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 211, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_10 = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int16_t(__pyx_t_7, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_10.memview)) __PYX_ERR(0, 211, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_v_seed_grid = __pyx_t_10;
  __pyx_t_10.memview = NULL;
  __pyx_t_10.data = NULL;
/* … */
  __pyx_tuple__5 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_int_3);<span class='error_goto'> if (unlikely(!__pyx_tuple__5)) __PYX_ERR(0, 211, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__5);
</pre><pre class="cython line score-32" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">212</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int32_t</span>[<span class="p">:]</span> <span class="n">idex_round</span> <span class="o">=</span> <span class="n">cvarray</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mf">8</span><span class="p">,),</span> <span class="n">itemsize</span><span class="o">=</span><span class="n">sizeof</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">),</span> <span class="n">format</span><span class="o">=</span><span class="n">i32</span><span class="p">)</span></pre>
<pre class='cython code score-32 '>  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 212, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_7, __pyx_n_s_shape, __pyx_tuple__6) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 212, __pyx_L1_error)</span>
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_5numpy_int32_t)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 212, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_7, __pyx_n_s_itemsize, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 212, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_i32);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 212, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_7, __pyx_n_s_format, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 212, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_array_type), __pyx_empty_tuple, __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 212, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_11 = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int32_t(__pyx_t_1, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_11.memview)) __PYX_ERR(0, 212, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_idex_round = __pyx_t_11;
  __pyx_t_11.memview = NULL;
  __pyx_t_11.data = NULL;
/* … */
  __pyx_tuple__6 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_int_8);<span class='error_goto'> if (unlikely(!__pyx_tuple__6)) __PYX_ERR(0, 212, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__6);
</pre><pre class="cython line score-39" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">213</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int32_t</span>[<span class="p">:]</span> <span class="n">idex2</span> <span class="o">=</span> <span class="n">cvarray</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],),</span> <span class="n">itemsize</span><span class="o">=</span><span class="n">sizeof</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">),</span> <span class="n">format</span><span class="o">=</span><span class="n">i32</span><span class="p">)</span> <span class="c"># seed_grid的邻域slice索引</span></pre>
<pre class='cython code score-39 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 213, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_7 = <span class='py_c_api'>PyInt_FromSsize_t</span>((__pyx_v_idex.shape[0]));<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 213, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 213, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_7);
  __pyx_t_7 = 0;
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_shape, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 213, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_5numpy_int32_t)));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 213, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_itemsize, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 213, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_i32);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 213, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, __pyx_n_s_format, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 213, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_array_type), __pyx_empty_tuple, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 213, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_11 = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int32_t(__pyx_t_2, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_11.memview)) __PYX_ERR(0, 213, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_idex2 = __pyx_t_11;
  __pyx_t_11.memview = NULL;
  __pyx_t_11.data = NULL;
</pre><pre class="cython line score-32" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">214</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">int32_t</span>[<span class="p">:]</span> <span class="n">num</span> <span class="o">=</span> <span class="n">cvarray</span><span class="p">(</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mf">1</span><span class="p">,),</span> <span class="n">itemsize</span><span class="o">=</span><span class="n">sizeof</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">),</span> <span class="n">format</span><span class="o">=</span><span class="n">i32</span><span class="p">)</span> <span class="c"># 记录形成聚类的点云数目</span></pre>
<pre class='cython code score-32 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 214, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_shape, __pyx_tuple__7) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 214, __pyx_L1_error)</span>
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FromSize_t</span>((sizeof(__pyx_t_5numpy_int32_t)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 214, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_itemsize, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 214, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_i32);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 214, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_format, __pyx_t_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 214, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(((PyObject *)__pyx_array_type), __pyx_empty_tuple, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 214, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_11 = __Pyx_PyObject_to_MemoryviewSlice_ds_nn___pyx_t_5numpy_int32_t(__pyx_t_1, PyBUF_WRITABLE);<span class='error_goto'> if (unlikely(!__pyx_t_11.memview)) __PYX_ERR(0, 214, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_num = __pyx_t_11;
  __pyx_t_11.memview = NULL;
  __pyx_t_11.data = NULL;
/* … */
  __pyx_tuple__7 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_int_1);<span class='error_goto'> if (unlikely(!__pyx_tuple__7)) __PYX_ERR(0, 214, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__7);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__7);
</pre><pre class="cython line score-0">&#xA0;<span class="">215</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">216</span>:     <span class="c"># t1 = time.time()</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">217</span>:     <span class="k">while</span> <span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]:</span>  <span class="c"># 只要栅格数量 &gt; 0    </span></pre>
<pre class='cython code score-0 '>  while (1) {
    __pyx_t_12 = ((__pyx_v_idex.shape[0]) != 0);
    if (!__pyx_t_12) break;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">218</span>:         <span class="n">num</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0</span> <span class="c"># 初始化&#39;sx&#39;,&#39;sy&#39;,&#39;x&#39;,&#39;y&#39;,&#39;z&#39;,&#39;zmax&#39;,&#39;I&#39;...</span></pre>
<pre class='cython code score-0 '>    __pyx_t_13 = 0;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_num.data + __pyx_t_13 * __pyx_v_num.strides[0]) )) = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">219</span>:         <span class="n">seed_grid</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">grid_slice</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="mf">0</span><span class="p">]:</span><span class="n">idex</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span>  <span class="c"># 找到一个种子栅格... sx, sy, zmax</span></pre>
<pre class='cython code score-0 '>    __pyx_t_14 = 0;
    __pyx_t_15 = 0;
    __pyx_t_8.data = __pyx_v_grid_slice.data;
    __pyx_t_8.memview = __pyx_v_grid_slice.memview;
    __PYX_INC_MEMVIEW(&amp;__pyx_t_8, 0);
    __pyx_t_6 = -1;
    if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_8,
    __pyx_v_grid_slice.shape[0], __pyx_v_grid_slice.strides[0], __pyx_v_grid_slice.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_14 * __pyx_v_idex.strides[0]) ))),
    ((*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_15 * __pyx_v_idex.strides[0]) ))) + 1),
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 219, __pyx_L1_error)</span>
}

__pyx_t_8.shape[1] = __pyx_v_grid_slice.shape[1];
__pyx_t_8.strides[1] = __pyx_v_grid_slice.strides[1];
    __pyx_t_8.suboffsets[1] = -1;

if (unlikely(__pyx_memoryview_copy_contents(__pyx_t_8, __pyx_v_seed_grid, 2, 1, 0) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 219, __pyx_L1_error)</span>
    __PYX_XDEC_MEMVIEW(&amp;__pyx_t_8, 1);
    __pyx_t_8.memview = NULL;
    __pyx_t_8.data = NULL;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">220</span>:         <span class="n">lp</span> <span class="o">=</span> <span class="n">split</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">+</span><span class="mf">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">split</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="mf">0</span><span class="p">]]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_16 = 0;
    __pyx_t_17 = ((*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_16 * __pyx_v_idex.strides[0]) ))) + 1);
    __pyx_t_18 = 0;
    __pyx_t_19 = (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_18 * __pyx_v_idex.strides[0]) )));
    __pyx_v_lp = ((*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_split.data + __pyx_t_17 * __pyx_v_split.strides[0]) ))) - (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_split.data + __pyx_t_19 * __pyx_v_split.strides[0]) ))));
</pre><pre class="cython line score-0">&#xA0;<span class="">221</span>:         <span class="c"># for i in range(lps): # 每个slice有多少点云</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">222</span>:         <span class="c">#     if points_slice[idex[0], i, 2] == 0 &amp; points_slice[idex[0], i, 3] == 0:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">223</span>:         <span class="c">#         break</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">224</span>:         <span class="c">#     lp += 1 # 每个slice的点云数量        </span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">225</span>:         <span class="n">target_points</span><span class="p">[:</span><span class="n">lp</span><span class="p">]</span> <span class="o">=</span> <span class="n">points_slice</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="mf">0</span><span class="p">]:</span><span class="n">idex</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">+</span><span class="mf">1</span><span class="p">,</span> <span class="p">:</span><span class="n">lp</span><span class="p">];</span> <span class="n">num</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">lp</span> <span class="c"># 栅格内点云赋给target_points,目标中点云数量加tmp.shape[0]        </span></pre>
<pre class='cython code score-0 '>    __pyx_t_20 = 0;
    __pyx_t_21 = 0;
    __pyx_t_22.data = __pyx_v_points_slice.data;
    __pyx_t_22.memview = __pyx_v_points_slice.memview;
    __PYX_INC_MEMVIEW(&amp;__pyx_t_22, 0);
    __pyx_t_6 = -1;
    if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_22,
    __pyx_v_points_slice.shape[0], __pyx_v_points_slice.strides[0], __pyx_v_points_slice.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_20 * __pyx_v_idex.strides[0]) ))),
    ((*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_21 * __pyx_v_idex.strides[0]) ))) + 1),
    0,
    1,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 225, __pyx_L1_error)</span>
}

if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_22,
    __pyx_v_points_slice.shape[1], __pyx_v_points_slice.strides[1], __pyx_v_points_slice.suboffsets[1],
    1,
    1,
    &amp;__pyx_t_6,
    0,
    __pyx_v_lp,
    0,
    0,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 225, __pyx_L1_error)</span>
}

__pyx_t_22.shape[2] = __pyx_v_points_slice.shape[2];
__pyx_t_22.strides[2] = __pyx_v_points_slice.strides[2];
    __pyx_t_22.suboffsets[2] = -1;

__pyx_t_8.data = __pyx_v_target_points.data;
    __pyx_t_8.memview = __pyx_v_target_points.memview;
    __PYX_INC_MEMVIEW(&amp;__pyx_t_8, 0);
    __pyx_t_6 = -1;
    if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_8,
    __pyx_v_target_points.shape[0], __pyx_v_target_points.strides[0], __pyx_v_target_points.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    0,
    __pyx_v_lp,
    0,
    0,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 225, __pyx_L1_error)</span>
}

__pyx_t_8.shape[1] = __pyx_v_target_points.shape[1];
__pyx_t_8.strides[1] = __pyx_v_target_points.strides[1];
    __pyx_t_8.suboffsets[1] = -1;

if (unlikely(__pyx_memoryview_copy_contents(__pyx_t_22, __pyx_t_8, 3, 2, 0) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 225, __pyx_L1_error)</span>
    __PYX_XDEC_MEMVIEW(&amp;__pyx_t_8, 1);
    __pyx_t_8.memview = NULL;
    __pyx_t_8.data = NULL;
    __PYX_XDEC_MEMVIEW(&amp;__pyx_t_22, 1);
    __pyx_t_22.memview = NULL;
    __pyx_t_22.data = NULL;
    __pyx_t_23 = 0;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_num.data + __pyx_t_23 * __pyx_v_num.strides[0]) )) += __pyx_v_lp;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">226</span>:         <span class="n">idex</span> <span class="o">=</span> <span class="n">idex</span><span class="p">[</span><span class="mf">1</span><span class="p">:];</span> <span class="c"># idex2 = idex2[:idex.shape[0]]  # 索引中删除当前种子, 栅格数量减1</span></pre>
<pre class='cython code score-0 '>    __pyx_t_11.data = __pyx_v_idex.data;
    __pyx_t_11.memview = __pyx_v_idex.memview;
    __PYX_INC_MEMVIEW(&amp;__pyx_t_11, 0);
    __pyx_t_6 = -1;
    if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_11,
    __pyx_v_idex.shape[0], __pyx_v_idex.strides[0], __pyx_v_idex.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_6,
    1,
    0,
    0,
    1,
    0,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 226, __pyx_L1_error)</span>
}

__PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex, 1);
    __pyx_v_idex = __pyx_t_11;
    __pyx_t_11.memview = NULL;
    __pyx_t_11.data = NULL;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">227</span>:         <span class="n">idex_round</span><span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">idex2</span><span class="p">[</span><span class="o">...</span><span class="p">],</span> <span class="n">lr</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span><span class="p">,</span> <span class="mf">0</span> <span class="c"># 用于存放被选中的邻近栅格的的索引, lr是idex_round的索引</span></pre>
<pre class='cython code score-0 '>    __pyx_t_24 = 0;
    __pyx_t_25 = 0;
    __pyx_t_26 = 0;
    {
        __pyx_t_5numpy_int32_t __pyx_temp_scalar = __pyx_t_24;
        {
            Py_ssize_t __pyx_temp_extent_0 = __pyx_v_idex_round.shape[0];
            Py_ssize_t __pyx_temp_stride_0 = __pyx_v_idex_round.strides[0];
            char *__pyx_temp_pointer_0;
            Py_ssize_t __pyx_temp_idx_0;
            __pyx_temp_pointer_0 = __pyx_v_idex_round.data;
            for (__pyx_temp_idx_0 = 0; __pyx_temp_idx_0 &lt; __pyx_temp_extent_0; __pyx_temp_idx_0++) {
              *((__pyx_t_5numpy_int32_t *) __pyx_temp_pointer_0) = __pyx_temp_scalar;
              __pyx_temp_pointer_0 += __pyx_temp_stride_0;
            }
        }
    }
    {
        __pyx_t_5numpy_int32_t __pyx_temp_scalar = __pyx_t_25;
        {
            Py_ssize_t __pyx_temp_extent_0 = __pyx_v_idex2.shape[0];
            Py_ssize_t __pyx_temp_stride_0 = __pyx_v_idex2.strides[0];
            char *__pyx_temp_pointer_0;
            Py_ssize_t __pyx_temp_idx_0;
            __pyx_temp_pointer_0 = __pyx_v_idex2.data;
            for (__pyx_temp_idx_0 = 0; __pyx_temp_idx_0 &lt; __pyx_temp_extent_0; __pyx_temp_idx_0++) {
              *((__pyx_t_5numpy_int32_t *) __pyx_temp_pointer_0) = __pyx_temp_scalar;
              __pyx_temp_pointer_0 += __pyx_temp_stride_0;
            }
        }
    }
    __pyx_v_lr = __pyx_t_26;
</pre><pre class="cython line score-0">&#xA0;<span class="">228</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">229</span>:         <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span>  <span class="c"># 对剩下的idex中的每一个索引</span></pre>
<pre class='cython code score-0 '>    __pyx_t_27 = (__pyx_v_idex.shape[0]);
    __pyx_t_28 = __pyx_t_27;
    for (__pyx_t_26 = 0; __pyx_t_26 &lt; __pyx_t_28; __pyx_t_26+=1) {
      __pyx_v_i = __pyx_t_26;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">230</span>:             <span class="k">if</span> <span class="p">((</span><span class="nb">abs</span><span class="p">(</span><span class="n">grid_slice</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="mf">0</span><span class="p">]</span><span class="o">-</span><span class="n">seed_grid</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mf">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">grid_slice</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="mf">1</span><span class="p">]</span><span class="o">-</span><span class="n">seed_grid</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mf">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="c"># 如果属于邻近栅格</span></pre>
<pre class='cython code score-0 '>      __pyx_t_29 = __pyx_v_i;
      __pyx_t_30 = (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_29 * __pyx_v_idex.strides[0]) )));
      __pyx_t_31 = 0;
      __pyx_t_32 = 0;
      __pyx_t_6 = abs(((*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_grid_slice.data + __pyx_t_30 * __pyx_v_grid_slice.strides[0]) ) + __pyx_t_31 * __pyx_v_grid_slice.strides[1]) ))) - (*((__pyx_t_5numpy_int16_t *) ( /* dim=0 */ (__pyx_v_seed_grid.data + __pyx_t_32 * __pyx_v_seed_grid.strides[0]) )))));<span class='error_goto'> if (unlikely(__pyx_t_6 == ((int)-1))) __PYX_ERR(0, 230, __pyx_L1_error)</span>
      __pyx_t_33 = __pyx_v_i;
      __pyx_t_34 = (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_33 * __pyx_v_idex.strides[0]) )));
      __pyx_t_35 = 1;
      __pyx_t_36 = 1;
      __pyx_t_37 = abs(((*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_grid_slice.data + __pyx_t_34 * __pyx_v_grid_slice.strides[0]) ) + __pyx_t_35 * __pyx_v_grid_slice.strides[1]) ))) - (*((__pyx_t_5numpy_int16_t *) ( /* dim=0 */ (__pyx_v_seed_grid.data + __pyx_t_36 * __pyx_v_seed_grid.strides[0]) )))));<span class='error_goto'> if (unlikely(__pyx_t_37 == ((int)-1))) __PYX_ERR(0, 230, __pyx_L1_error)</span>
/* … */
      __pyx_t_12 = ((((__pyx_t_6 &lt;= 1) &amp; (__pyx_t_37 &lt;= 1)) &amp; (__pyx_t_42 &lt;= 0xA0)) != 0);
      if (__pyx_t_12) {
/* … */
      }
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">231</span>:                 <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">grid_slice</span><span class="p">[</span><span class="n">idex</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="mf">2</span><span class="p">]</span><span class="o">-</span><span class="n">seed_grid</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mf">160</span><span class="p">)):</span> <span class="c"># 且zmax相差小于100</span></pre>
<pre class='cython code score-0 '>      __pyx_t_38 = __pyx_v_i;
      __pyx_t_39 = (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_38 * __pyx_v_idex.strides[0]) )));
      __pyx_t_40 = 2;
      __pyx_t_41 = 2;
      __pyx_t_42 = abs(((*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_grid_slice.data + __pyx_t_39 * __pyx_v_grid_slice.strides[0]) ) + __pyx_t_40 * __pyx_v_grid_slice.strides[1]) ))) - (*((__pyx_t_5numpy_int16_t *) ( /* dim=0 */ (__pyx_v_seed_grid.data + __pyx_t_41 * __pyx_v_seed_grid.strides[0]) )))));<span class='error_goto'> if (unlikely(__pyx_t_42 == ((int)-1))) __PYX_ERR(0, 231, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">232</span>:                 <span class="n">idex_round</span><span class="p">[</span><span class="n">lr</span><span class="p">],</span> <span class="n">idex2</span><span class="p">[</span><span class="n">lr</span><span class="p">],</span> <span class="n">lr</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span> <span class="n">idex</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lr</span><span class="o">+</span><span class="mf">1</span>  <span class="c"># 可以作为邻域种子栅格的索引, 由邻域形成的种子索引</span></pre>
<pre class='cython code score-0 '>        __pyx_t_43 = __pyx_v_i;
        __pyx_t_44 = __pyx_v_i;
        __pyx_t_25 = (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex.data + __pyx_t_44 * __pyx_v_idex.strides[0]) )));
        __pyx_t_45 = (__pyx_v_lr + 1);
        __pyx_t_46 = __pyx_v_lr;
        *((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex_round.data + __pyx_t_46 * __pyx_v_idex_round.strides[0]) )) = __pyx_t_43;
        __pyx_t_47 = __pyx_v_lr;
        *((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_idex2.data + __pyx_t_47 * __pyx_v_idex2.strides[0]) )) = __pyx_t_25;
        __pyx_v_lr = __pyx_t_45;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">233</span>:         <span class="n">idex</span> <span class="o">=</span> <span class="n">delete_1d</span><span class="p">(</span><span class="n">idex</span><span class="p">,</span> <span class="n">idex_round</span><span class="p">[:</span><span class="n">lr</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mf">0</span><span class="p">)</span>  <span class="c"># 从原索引中删除已经形成种子的索引 -&gt; 剩下还没聚类的slice索引        </span></pre>
<pre class='cython code score-0 '>    __pyx_t_11.data = __pyx_v_idex_round.data;
    __pyx_t_11.memview = __pyx_v_idex_round.memview;
    __PYX_INC_MEMVIEW(&amp;__pyx_t_11, 0);
    __pyx_t_42 = -1;
    if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_11,
    __pyx_v_idex_round.shape[0], __pyx_v_idex_round.strides[0], __pyx_v_idex_round.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_42,
    0,
    __pyx_v_lr,
    0,
    0,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 233, __pyx_L1_error)</span>
}

__pyx_t_49.__pyx_n = 1;
    __pyx_t_49.axis = 0;
    __pyx_t_48 = __pyx_f_10Lidar_core_delete_1d(__pyx_v_idex, __pyx_t_11, &amp;__pyx_t_49);<span class='error_goto'> if (unlikely(!__pyx_t_48.memview)) __PYX_ERR(0, 233, __pyx_L1_error)</span>
    __PYX_XDEC_MEMVIEW(&amp;__pyx_t_11, 1);
    __pyx_t_11.memview = NULL;
    __pyx_t_11.data = NULL;
    __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex, 1);
    __pyx_v_idex = __pyx_t_48;
    __pyx_t_48.memview = NULL;
    __pyx_t_48.data = NULL;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">234</span>:         <span class="n">idex</span> <span class="o">=</span> <span class="n">cluster_circle2</span><span class="p">(</span><span class="n">points_slice</span><span class="p">,</span> <span class="n">grid_slice</span><span class="p">,</span> <span class="n">target_points</span><span class="p">,</span> <span class="n">idex</span><span class="p">,</span> <span class="n">idex2</span><span class="p">[:</span><span class="n">lr</span><span class="p">],</span> <span class="n">split</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span> <span class="k">if</span> <span class="n">idex</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="k">else</span> <span class="n">idex</span></pre>
<pre class='cython code score-0 '>    if (((__pyx_v_idex.shape[0]) != 0)) {
      __pyx_t_11.data = __pyx_v_idex2.data;
      __pyx_t_11.memview = __pyx_v_idex2.memview;
      __PYX_INC_MEMVIEW(&amp;__pyx_t_11, 0);
      __pyx_t_42 = -1;
      if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_11,
    __pyx_v_idex2.shape[0], __pyx_v_idex2.strides[0], __pyx_v_idex2.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_42,
    0,
    __pyx_v_lr,
    0,
    0,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 234, __pyx_L1_error)</span>
}

__pyx_t_50 = __pyx_f_10Lidar_core_cluster_circle2(__pyx_v_points_slice, __pyx_v_grid_slice, __pyx_v_target_points, __pyx_v_idex, __pyx_t_11, __pyx_v_split, __pyx_v_num);<span class='error_goto'> if (unlikely(!__pyx_t_50.memview)) __PYX_ERR(0, 234, __pyx_L1_error)</span>
      __PYX_XDEC_MEMVIEW(&amp;__pyx_t_11, 1);
      __pyx_t_11.memview = NULL;
      __pyx_t_11.data = NULL;
      __pyx_t_48 = __pyx_t_50;
      __pyx_t_50.memview = NULL;
      __pyx_t_50.data = NULL;
    } else {
      __PYX_INC_MEMVIEW(&amp;__pyx_v_idex, 0);
      __pyx_t_48 = __pyx_v_idex;
    }
    __PYX_XDEC_MEMVIEW(&amp;__pyx_v_idex, 1);
    __pyx_v_idex = __pyx_t_48;
    __pyx_t_48.memview = NULL;
    __pyx_t_48.data = NULL;
</pre><pre class="cython line score-0">&#xA0;<span class="">235</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">236</span>:         <span class="c"># print(np.ctypeslib.as_array(target_points))</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">237</span>:         <span class="c"># target_points: sx[0], sy[1], x[2], y[3], z[4], zmax[5], I[6]</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">238</span>:         <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">zmin</span> <span class="o">=</span> <span class="n">target_points</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">2</span><span class="p">],</span> <span class="n">target_points</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">3</span><span class="p">],</span> <span class="n">target_points</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">4</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_51 = 0;
    __pyx_t_52 = 2;
    __pyx_t_53 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_51 * __pyx_v_target_points.strides[0]) ) + __pyx_t_52 * __pyx_v_target_points.strides[1]) )));
    __pyx_t_54 = 0;
    __pyx_t_55 = 3;
    __pyx_t_56 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_54 * __pyx_v_target_points.strides[0]) ) + __pyx_t_55 * __pyx_v_target_points.strides[1]) )));
    __pyx_t_57 = 0;
    __pyx_t_58 = 4;
    __pyx_t_59 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_57 * __pyx_v_target_points.strides[0]) ) + __pyx_t_58 * __pyx_v_target_points.strides[1]) )));
    __pyx_v_xmin = __pyx_t_53;
    __pyx_v_ymin = __pyx_t_56;
    __pyx_v_zmin = __pyx_t_59;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">239</span>:         <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">zmax</span> <span class="o">=</span> <span class="n">target_points</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">2</span><span class="p">],</span> <span class="n">target_points</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">3</span><span class="p">],</span> <span class="n">target_points</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">4</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_60 = 0;
    __pyx_t_61 = 2;
    __pyx_t_59 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_60 * __pyx_v_target_points.strides[0]) ) + __pyx_t_61 * __pyx_v_target_points.strides[1]) )));
    __pyx_t_62 = 0;
    __pyx_t_63 = 3;
    __pyx_t_56 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_62 * __pyx_v_target_points.strides[0]) ) + __pyx_t_63 * __pyx_v_target_points.strides[1]) )));
    __pyx_t_64 = 0;
    __pyx_t_65 = 4;
    __pyx_t_53 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_64 * __pyx_v_target_points.strides[0]) ) + __pyx_t_65 * __pyx_v_target_points.strides[1]) )));
    __pyx_v_xmax = __pyx_t_59;
    __pyx_v_ymax = __pyx_t_56;
    __pyx_v_zmax = __pyx_t_53;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">240</span>:         <span class="n">I</span> <span class="o">=</span> <span class="n">target_points</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">6</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_66 = 0;
    __pyx_t_67 = 6;
    __pyx_v_I = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_66 * __pyx_v_target_points.strides[0]) ) + __pyx_t_67 * __pyx_v_target_points.strides[1]) )));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">241</span>:         <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="n">num</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>    __pyx_t_68 = 0;
    __pyx_t_25 = (*((__pyx_t_5numpy_int32_t *) ( /* dim=0 */ (__pyx_v_num.data + __pyx_t_68 * __pyx_v_num.strides[0]) )));
    __pyx_t_24 = __pyx_t_25;
    for (__pyx_t_26 = 1; __pyx_t_26 &lt; __pyx_t_24; __pyx_t_26+=1) {
      __pyx_v_i = __pyx_t_26;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">242</span>:             <span class="k">if</span> <span class="n">target_points</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">2</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0</span> <span class="ow">and</span> <span class="n">target_points</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">3</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0</span><span class="p">:</span> <span class="k">break</span></pre>
<pre class='cython code score-0 '>      __pyx_t_69 = __pyx_v_i;
      __pyx_t_70 = 2;
      __pyx_t_71 = (((*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_69 * __pyx_v_target_points.strides[0]) ) + __pyx_t_70 * __pyx_v_target_points.strides[1]) ))) == 0) != 0);
      if (__pyx_t_71) {
      } else {
        __pyx_t_12 = __pyx_t_71;
        goto __pyx_L11_bool_binop_done;
      }
      __pyx_t_72 = __pyx_v_i;
      __pyx_t_73 = 3;
      __pyx_t_71 = (((*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_72 * __pyx_v_target_points.strides[0]) ) + __pyx_t_73 * __pyx_v_target_points.strides[1]) ))) == 0) != 0);
      __pyx_t_12 = __pyx_t_71;
      __pyx_L11_bool_binop_done:;
      if (__pyx_t_12) {
        goto __pyx_L9_break;
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">243</span>:             <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">target_points</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">2</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">target_points</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">2</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>      __pyx_t_74 = __pyx_v_i;
      __pyx_t_75 = 2;
      __pyx_t_53 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_74 * __pyx_v_target_points.strides[0]) ) + __pyx_t_75 * __pyx_v_target_points.strides[1]) )));
      __pyx_t_45 = __pyx_v_xmin;
      if (((__pyx_t_53 &lt; __pyx_t_45) != 0)) {
        __pyx_t_43 = __pyx_t_53;
      } else {
        __pyx_t_43 = __pyx_t_45;
      }
      __pyx_t_45 = __pyx_t_43;
      __pyx_t_76 = __pyx_v_i;
      __pyx_t_77 = 2;
      __pyx_t_53 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_76 * __pyx_v_target_points.strides[0]) ) + __pyx_t_77 * __pyx_v_target_points.strides[1]) )));
      __pyx_t_43 = __pyx_v_xmax;
      if (((__pyx_t_53 &gt; __pyx_t_43) != 0)) {
        __pyx_t_78 = __pyx_t_53;
      } else {
        __pyx_t_78 = __pyx_t_43;
      }
      __pyx_t_43 = __pyx_t_78;
      __pyx_v_xmin = __pyx_t_45;
      __pyx_v_xmax = __pyx_t_43;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">244</span>:             <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">target_points</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">3</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymax</span><span class="p">,</span> <span class="n">target_points</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">3</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>      __pyx_t_79 = __pyx_v_i;
      __pyx_t_80 = 3;
      __pyx_t_53 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_79 * __pyx_v_target_points.strides[0]) ) + __pyx_t_80 * __pyx_v_target_points.strides[1]) )));
      __pyx_t_43 = __pyx_v_ymin;
      if (((__pyx_t_53 &lt; __pyx_t_43) != 0)) {
        __pyx_t_45 = __pyx_t_53;
      } else {
        __pyx_t_45 = __pyx_t_43;
      }
      __pyx_t_43 = __pyx_t_45;
      __pyx_t_81 = __pyx_v_i;
      __pyx_t_82 = 3;
      __pyx_t_53 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_81 * __pyx_v_target_points.strides[0]) ) + __pyx_t_82 * __pyx_v_target_points.strides[1]) )));
      __pyx_t_45 = __pyx_v_ymax;
      if (((__pyx_t_53 &gt; __pyx_t_45) != 0)) {
        __pyx_t_78 = __pyx_t_53;
      } else {
        __pyx_t_78 = __pyx_t_45;
      }
      __pyx_t_45 = __pyx_t_78;
      __pyx_v_ymin = __pyx_t_43;
      __pyx_v_ymax = __pyx_t_45;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">245</span>:             <span class="n">zmin</span><span class="p">,</span> <span class="n">zmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">zmin</span><span class="p">,</span> <span class="n">target_points</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">4</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">zmax</span><span class="p">,</span> <span class="n">target_points</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">4</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>      __pyx_t_83 = __pyx_v_i;
      __pyx_t_84 = 4;
      __pyx_t_53 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_83 * __pyx_v_target_points.strides[0]) ) + __pyx_t_84 * __pyx_v_target_points.strides[1]) )));
      __pyx_t_45 = __pyx_v_zmin;
      if (((__pyx_t_53 &lt; __pyx_t_45) != 0)) {
        __pyx_t_43 = __pyx_t_53;
      } else {
        __pyx_t_43 = __pyx_t_45;
      }
      __pyx_t_45 = __pyx_t_43;
      __pyx_t_85 = __pyx_v_i;
      __pyx_t_86 = 4;
      __pyx_t_53 = (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_85 * __pyx_v_target_points.strides[0]) ) + __pyx_t_86 * __pyx_v_target_points.strides[1]) )));
      __pyx_t_43 = __pyx_v_zmax;
      if (((__pyx_t_53 &gt; __pyx_t_43) != 0)) {
        __pyx_t_78 = __pyx_t_53;
      } else {
        __pyx_t_78 = __pyx_t_43;
      }
      __pyx_t_43 = __pyx_t_78;
      __pyx_v_zmin = __pyx_t_45;
      __pyx_v_zmax = __pyx_t_43;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">246</span>:             <span class="n">I</span> <span class="o">+=</span> <span class="n">target_points</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">6</span><span class="p">]</span>  <span class="c"># 反射强度求和</span></pre>
<pre class='cython code score-0 '>      __pyx_t_87 = __pyx_v_i;
      __pyx_t_88 = 6;
      __pyx_v_I = (__pyx_v_I + (*((__pyx_t_5numpy_int16_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_points.data + __pyx_t_87 * __pyx_v_target_points.strides[0]) ) + __pyx_t_88 * __pyx_v_target_points.strides[1]) ))));
    }
    __pyx_L9_break:;
</pre><pre class="cython line score-0">&#xA0;<span class="">247</span>:             <span class="c"># print (&#39;I: &#39;,I)  </span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">248</span>:         <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span> <span class="o">=</span> <span class="p">(</span><span class="n">xmin</span><span class="o">+</span><span class="n">xmax</span><span class="p">)</span><span class="o">//</span><span class="mf">2</span><span class="p">,</span> <span class="p">(</span><span class="n">ymin</span><span class="o">+</span><span class="n">ymax</span><span class="p">)</span><span class="o">//</span><span class="mf">2</span></pre>
<pre class='cython code score-0 '>    __pyx_t_26 = ((__pyx_v_xmin + __pyx_v_xmax) / 2);
    __pyx_t_43 = ((__pyx_v_ymin + __pyx_v_ymax) / 2);
    __pyx_v_xc = __pyx_t_26;
    __pyx_v_yc = __pyx_t_43;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">249</span>:         <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xc</span> <span class="o">-</span> <span class="n">halfcell</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">xc</span> <span class="o">+</span> <span class="n">halfcell</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>    __pyx_t_43 = (__pyx_v_xc - __pyx_v_halfcell);
    __pyx_t_26 = __pyx_v_xmin;
    if (((__pyx_t_43 &lt; __pyx_t_26) != 0)) {
      __pyx_t_45 = __pyx_t_43;
    } else {
      __pyx_t_45 = __pyx_t_26;
    }
    __pyx_t_43 = __pyx_t_45;
    __pyx_t_45 = (__pyx_v_xc + __pyx_v_halfcell);
    __pyx_t_26 = __pyx_v_xmax;
    if (((__pyx_t_45 &gt; __pyx_t_26) != 0)) {
      __pyx_t_78 = __pyx_t_45;
    } else {
      __pyx_t_78 = __pyx_t_26;
    }
    __pyx_t_45 = __pyx_t_78;
    __pyx_v_xmin = __pyx_t_43;
    __pyx_v_xmax = __pyx_t_45;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">250</span>:         <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">yc</span> <span class="o">-</span> <span class="n">halfcell</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymax</span><span class="p">,</span> <span class="n">yc</span> <span class="o">+</span> <span class="n">halfcell</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>    __pyx_t_45 = (__pyx_v_yc - __pyx_v_halfcell);
    __pyx_t_43 = __pyx_v_ymin;
    if (((__pyx_t_45 &lt; __pyx_t_43) != 0)) {
      __pyx_t_78 = __pyx_t_45;
    } else {
      __pyx_t_78 = __pyx_t_43;
    }
    __pyx_t_45 = __pyx_t_78;
    __pyx_t_78 = (__pyx_v_yc + __pyx_v_halfcell);
    __pyx_t_43 = __pyx_v_ymax;
    if (((__pyx_t_78 &gt; __pyx_t_43) != 0)) {
      __pyx_t_26 = __pyx_t_78;
    } else {
      __pyx_t_26 = __pyx_t_43;
    }
    __pyx_t_78 = __pyx_t_26;
    __pyx_v_ymin = __pyx_t_45;
    __pyx_v_ymax = __pyx_t_78;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">251</span>:         <span class="n">zmin</span><span class="p">,</span> <span class="n">zmax</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="n">zmax</span></pre>
<pre class='cython code score-0 '>    __pyx_t_78 = 0;
    __pyx_t_45 = __pyx_v_zmax;
    __pyx_v_zmin = __pyx_t_78;
    __pyx_v_zmax = __pyx_t_45;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">252</span>:         <span class="n">target_output</span><span class="p">[</span><span class="n">ln</span><span class="p">,</span><span class="mf">0</span><span class="p">],</span> <span class="n">target_output</span><span class="p">[</span><span class="n">ln</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">xc</span><span class="p">,</span> <span class="n">yc</span></pre>
<pre class='cython code score-0 '>    __pyx_t_45 = __pyx_v_xc;
    __pyx_t_78 = __pyx_v_yc;
    __pyx_t_89 = __pyx_v_ln;
    __pyx_t_90 = 0;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_output.data + __pyx_t_89 * __pyx_v_target_output.strides[0]) ) + __pyx_t_90 * __pyx_v_target_output.strides[1]) )) = __pyx_t_45;
    __pyx_t_91 = __pyx_v_ln;
    __pyx_t_92 = 1;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_output.data + __pyx_t_91 * __pyx_v_target_output.strides[0]) ) + __pyx_t_92 * __pyx_v_target_output.strides[1]) )) = __pyx_t_78;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">253</span>:         <span class="n">target_output</span><span class="p">[</span><span class="n">ln</span><span class="p">,</span><span class="mf">2</span><span class="p">],</span> <span class="n">target_output</span><span class="p">[</span><span class="n">ln</span><span class="p">,</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span></pre>
<pre class='cython code score-0 '>    __pyx_t_78 = __pyx_v_xmin;
    __pyx_t_45 = __pyx_v_xmax;
    __pyx_t_93 = __pyx_v_ln;
    __pyx_t_94 = 2;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_output.data + __pyx_t_93 * __pyx_v_target_output.strides[0]) ) + __pyx_t_94 * __pyx_v_target_output.strides[1]) )) = __pyx_t_78;
    __pyx_t_95 = __pyx_v_ln;
    __pyx_t_96 = 3;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_output.data + __pyx_t_95 * __pyx_v_target_output.strides[0]) ) + __pyx_t_96 * __pyx_v_target_output.strides[1]) )) = __pyx_t_45;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">254</span>:         <span class="n">target_output</span><span class="p">[</span><span class="n">ln</span><span class="p">,</span><span class="mf">4</span><span class="p">],</span> <span class="n">target_output</span><span class="p">[</span><span class="n">ln</span><span class="p">,</span><span class="mf">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span></pre>
<pre class='cython code score-0 '>    __pyx_t_45 = __pyx_v_ymin;
    __pyx_t_78 = __pyx_v_ymax;
    __pyx_t_97 = __pyx_v_ln;
    __pyx_t_98 = 4;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_output.data + __pyx_t_97 * __pyx_v_target_output.strides[0]) ) + __pyx_t_98 * __pyx_v_target_output.strides[1]) )) = __pyx_t_45;
    __pyx_t_99 = __pyx_v_ln;
    __pyx_t_100 = 5;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_output.data + __pyx_t_99 * __pyx_v_target_output.strides[0]) ) + __pyx_t_100 * __pyx_v_target_output.strides[1]) )) = __pyx_t_78;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">255</span>:         <span class="n">target_output</span><span class="p">[</span><span class="n">ln</span><span class="p">,</span><span class="mf">6</span><span class="p">],</span> <span class="n">target_output</span><span class="p">[</span><span class="n">ln</span><span class="p">,</span><span class="mf">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">zmin</span><span class="p">,</span> <span class="n">zmax</span></pre>
<pre class='cython code score-0 '>    __pyx_t_78 = __pyx_v_zmin;
    __pyx_t_45 = __pyx_v_zmax;
    __pyx_t_101 = __pyx_v_ln;
    __pyx_t_102 = 6;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_output.data + __pyx_t_101 * __pyx_v_target_output.strides[0]) ) + __pyx_t_102 * __pyx_v_target_output.strides[1]) )) = __pyx_t_78;
    __pyx_t_103 = __pyx_v_ln;
    __pyx_t_104 = 7;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_output.data + __pyx_t_103 * __pyx_v_target_output.strides[0]) ) + __pyx_t_104 * __pyx_v_target_output.strides[1]) )) = __pyx_t_45;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">256</span>:         <span class="n">target_output</span><span class="p">[</span><span class="n">ln</span><span class="p">,</span><span class="mf">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">I</span>  <span class="c"># 每个聚类被检测出的总强度</span></pre>
<pre class='cython code score-0 '>    __pyx_t_105 = __pyx_v_ln;
    __pyx_t_106 = 8;
    *((__pyx_t_5numpy_int32_t *) ( /* dim=1 */ (( /* dim=0 */ (__pyx_v_target_output.data + __pyx_t_105 * __pyx_v_target_output.strides[0]) ) + __pyx_t_106 * __pyx_v_target_output.strides[1]) )) = __pyx_v_I;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">257</span>:         <span class="n">ln</span> <span class="o">+=</span> <span class="mf">1</span>  <span class="c"># 行组合, 确认的目标数+1</span></pre>
<pre class='cython code score-0 '>    __pyx_v_ln = (__pyx_v_ln + 1);
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">258</span>:         <span class="c"># print (time.time()-t1)</span></pre>
<pre class="cython line score-48" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">259</span>:     <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">ctypeslib</span><span class="o">.</span><span class="n">as_array</span><span class="p">(</span><span class="n">target_output</span><span class="p">[:</span><span class="n">ln</span><span class="p">])</span></pre>
<pre class='cython code score-48 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 259, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_ctypeslib);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 259, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_as_array);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 259, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_9.data = __pyx_v_target_output.data;
  __pyx_t_9.memview = __pyx_v_target_output.memview;
  __PYX_INC_MEMVIEW(&amp;__pyx_t_9, 0);
  __pyx_t_42 = -1;
  if (unlikely(__pyx_memoryview_slice_memviewslice(
    &amp;__pyx_t_9,
    __pyx_v_target_output.shape[0], __pyx_v_target_output.strides[0], __pyx_v_target_output.suboffsets[0],
    0,
    0,
    &amp;__pyx_t_42,
    0,
    __pyx_v_ln,
    0,
    0,
    1,
    0,
    1) &lt; 0))
{
    <span class='error_goto'>__PYX_ERR(0, 259, __pyx_L1_error)</span>
}

__pyx_t_9.shape[1] = __pyx_v_target_output.shape[1];
__pyx_t_9.strides[1] = __pyx_v_target_output.strides[1];
    __pyx_t_9.suboffsets[1] = -1;

__pyx_t_7 = __pyx_memoryview_fromslice(__pyx_t_9, 2, (PyObject *(*)(char *)) __pyx_memview_get_nn___pyx_t_5numpy_int32_t, (int (*)(char *, PyObject *)) __pyx_memview_set_nn___pyx_t_5numpy_int32_t, 0);;<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 259, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __PYX_XDEC_MEMVIEW(&amp;__pyx_t_9, 1);
  __pyx_t_9.memview = NULL;
  __pyx_t_9.data = NULL;
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
    }
  }
  if (!__pyx_t_4) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 259, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_7};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 259, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_7};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 259, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    {
      __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 259, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+1, __pyx_t_7);
      __pyx_t_7 = 0;
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 259, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">260</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">261</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">262</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-90" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">263</span>: <span class="k">def</span> <span class="nf">is_overlap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">box</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">double</span> <span class="n">threshold</span><span class="o">=</span><span class="mf">0.75</span><span class="p">):</span> <span class="c"># xmin, xmax, ymin, ymax</span></pre>
<pre class='cython code score-90 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_11is_overlap(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_11is_overlap = {"is_overlap", (PyCFunction)__pyx_pw_10Lidar_core_11is_overlap, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_11is_overlap(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_box = 0;
  PyArrayObject *__pyx_v_bbox = 0;
  double __pyx_v_threshold;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("is_overlap (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_box,&amp;__pyx_n_s_bbox,&amp;__pyx_n_s_threshold,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_bbox)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("is_overlap", 0, 2, 3, 1); <span class='error_goto'>__PYX_ERR(0, 263, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (kw_args &gt; 0) {
          PyObject* value = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_threshold);
          if (value) { values[2] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "is_overlap") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 263, __pyx_L3_error)</span>
      }
    } else {
      switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_box = ((PyArrayObject *)values[0]);
    __pyx_v_bbox = ((PyArrayObject *)values[1]);
    if (values[2]) {
      __pyx_v_threshold = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(values[2]); if (unlikely((__pyx_v_threshold == (double)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 263, __pyx_L3_error)</span>
    } else {
      __pyx_v_threshold = ((double)0.75);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("is_overlap", 0, 2, 3, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 263, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.is_overlap", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_box), __pyx_ptype_5numpy_ndarray, 1, "box", 0))) <span class='error_goto'>__PYX_ERR(0, 263, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_bbox), __pyx_ptype_5numpy_ndarray, 1, "bbox", 0))) <span class='error_goto'>__PYX_ERR(0, 263, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_10is_overlap(__pyx_self, __pyx_v_box, __pyx_v_bbox, __pyx_v_threshold);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_10is_overlap(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_box, PyArrayObject *__pyx_v_bbox, double __pyx_v_threshold) {
  long __pyx_v_i;
  long __pyx_v_j;
  long __pyx_v_max_idex;
  long __pyx_v_xmin;
  long __pyx_v_xmax;
  long __pyx_v_ymin;
  long __pyx_v_ymax;
  double __pyx_v_overlap_area;
  double __pyx_v_area;
  double __pyx_v_overlap_ratio;
  double __pyx_v_max_ratio;
  PyArrayObject *__pyx_v_overlap = 0;
  PyArrayObject *__pyx_v_overlap_index = 0;
  double __pyx_v_max_area;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_bbox;
  __Pyx_Buffer __pyx_pybuffer_bbox;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_box;
  __Pyx_Buffer __pyx_pybuffer_box;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_overlap;
  __Pyx_Buffer __pyx_pybuffer_overlap;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_overlap_index;
  __Pyx_Buffer __pyx_pybuffer_overlap_index;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("is_overlap", 0);
  __pyx_pybuffer_overlap.pybuffer.buf = NULL;
  __pyx_pybuffer_overlap.refcount = 0;
  __pyx_pybuffernd_overlap.data = NULL;
  __pyx_pybuffernd_overlap.rcbuffer = &amp;__pyx_pybuffer_overlap;
  __pyx_pybuffer_overlap_index.pybuffer.buf = NULL;
  __pyx_pybuffer_overlap_index.refcount = 0;
  __pyx_pybuffernd_overlap_index.data = NULL;
  __pyx_pybuffernd_overlap_index.rcbuffer = &amp;__pyx_pybuffer_overlap_index;
  __pyx_pybuffer_box.pybuffer.buf = NULL;
  __pyx_pybuffer_box.refcount = 0;
  __pyx_pybuffernd_box.data = NULL;
  __pyx_pybuffernd_box.rcbuffer = &amp;__pyx_pybuffer_box;
  __pyx_pybuffer_bbox.pybuffer.buf = NULL;
  __pyx_pybuffer_bbox.refcount = 0;
  __pyx_pybuffernd_bbox.data = NULL;
  __pyx_pybuffernd_bbox.rcbuffer = &amp;__pyx_pybuffer_bbox;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_box, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 263, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_box.diminfo[0].strides = __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_box.diminfo[0].shape = __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_bbox.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_bbox, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 263, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_bbox.diminfo[0].strides = __pyx_pybuffernd_bbox.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_bbox.diminfo[0].shape = __pyx_pybuffernd_bbox.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_bbox.diminfo[1].strides = __pyx_pybuffernd_bbox.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_bbox.diminfo[1].shape = __pyx_pybuffernd_bbox.rcbuffer-&gt;pybuffer.shape[1];
/* … */
  /* function exit code */
  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_bbox.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_box.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.is_overlap", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_bbox.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_box.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_overlap);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_overlap_index);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__128 = <span class='py_c_api'>PyTuple_Pack</span>(17, __pyx_n_s_box, __pyx_n_s_bbox, __pyx_n_s_threshold, __pyx_n_s_i, __pyx_n_s_j, __pyx_n_s_max_idex, __pyx_n_s_xmin, __pyx_n_s_xmax, __pyx_n_s_ymin, __pyx_n_s_ymax, __pyx_n_s_overlap_area, __pyx_n_s_area, __pyx_n_s_overlap_ratio, __pyx_n_s_max_ratio, __pyx_n_s_overlap, __pyx_n_s_overlap_index, __pyx_n_s_max_area);<span class='error_goto'> if (unlikely(!__pyx_tuple__128)) __PYX_ERR(0, 263, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__128);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__128);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_11is_overlap, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 263, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_is_overlap, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 263, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__129 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(3, 0, 17, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__128, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_is_overlap, 263, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__129)) __PYX_ERR(0, 263, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">264</span>:     <span class="c"># 求bbox中每行相对于b的覆盖比例... xmin, xmax, ymin, ymax</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">265</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">j</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="n">max_idex</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span></pre>
<pre class='cython code score-0 '>  __pyx_v_j = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">266</span>:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">overlap_area</span><span class="p">,</span> <span class="nf">area</span><span class="p">,</span> <span class="nf">overlap_ratio</span><span class="p">,</span> <span class="nf">max_ratio</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_max_ratio = 0.0;
</pre><pre class="cython line score-0">&#xA0;<span class="">267</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">overlap</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">268</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">overlap_index</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">269</span>: </pre>
<pre class="cython line score-79" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">270</span>:     <span class="n">overlap</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">bbox</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span><span class="mf">2</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-79 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 270, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 270, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_bbox-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 270, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 270, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1, __pyx_int_2);
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 270, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 270, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_4, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 270, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_4, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 270, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 270, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_2) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_5);
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 270, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 270, __pyx_L1_error)</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_overlap, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
      }
      __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
    }
    __pyx_pybuffernd_overlap.diminfo[0].strides = __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_overlap.diminfo[0].shape = __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_overlap.diminfo[1].strides = __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_overlap.diminfo[1].shape = __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.shape[1];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 270, __pyx_L1_error)</span>
  }
  __pyx_t_8 = 0;
  __pyx_v_overlap = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-71" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">271</span>:     <span class="n">overlap_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">bbox</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-71 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 271, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 271, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_bbox-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 271, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 271, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 271, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_3, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 271, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_3, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 271, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 271, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (__pyx_t_5) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_6, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_6, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 271, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 271, __pyx_L1_error)</span>
  __pyx_t_12 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_12, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_overlap_index, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
      }
      __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
    }
    __pyx_pybuffernd_overlap_index.diminfo[0].strides = __pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_overlap_index.diminfo[0].shape = __pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 271, __pyx_L1_error)</span>
  }
  __pyx_t_12 = 0;
  __pyx_v_overlap_index = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">272</span>:     <span class="n">area</span> <span class="o">=</span> <span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">-</span><span class="n">box</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">-</span><span class="n">box</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span> <span class="c"># 目标target的面积</span></pre>
<pre class='cython code score-0 '>  __pyx_t_13 = 1;
  __pyx_t_14 = 0;
  __pyx_t_15 = 3;
  __pyx_t_16 = 2;
  __pyx_v_area = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_13, __pyx_pybuffernd_box.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_14, __pyx_pybuffernd_box.diminfo[0].strides))) * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_box.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_16, __pyx_pybuffernd_box.diminfo[0].strides))));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">273</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">bbox</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_17 = (__pyx_v_bbox-&gt;dimensions[0]);
  __pyx_t_18 = __pyx_t_17;
  for (__pyx_t_19 = 0; __pyx_t_19 &lt; __pyx_t_18; __pyx_t_19+=1) {
    __pyx_v_i = __pyx_t_19;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">274</span>:         <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">0</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">2</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>    __pyx_t_20 = __pyx_v_i;
    __pyx_t_21 = 0;
    __pyx_t_22 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_bbox.rcbuffer-&gt;pybuffer.buf, __pyx_t_20, __pyx_pybuffernd_bbox.diminfo[0].strides, __pyx_t_21, __pyx_pybuffernd_bbox.diminfo[1].strides));
    __pyx_t_23 = 0;
    __pyx_t_24 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_23, __pyx_pybuffernd_box.diminfo[0].strides));
    if (((__pyx_t_22 &gt; __pyx_t_24) != 0)) {
      __pyx_t_25 = __pyx_t_22;
    } else {
      __pyx_t_25 = __pyx_t_24;
    }
    __pyx_t_22 = __pyx_t_25;
    __pyx_t_26 = __pyx_v_i;
    __pyx_t_27 = 2;
    __pyx_t_25 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_bbox.rcbuffer-&gt;pybuffer.buf, __pyx_t_26, __pyx_pybuffernd_bbox.diminfo[0].strides, __pyx_t_27, __pyx_pybuffernd_bbox.diminfo[1].strides));
    __pyx_t_28 = 2;
    __pyx_t_24 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_28, __pyx_pybuffernd_box.diminfo[0].strides));
    if (((__pyx_t_25 &gt; __pyx_t_24) != 0)) {
      __pyx_t_29 = __pyx_t_25;
    } else {
      __pyx_t_29 = __pyx_t_24;
    }
    __pyx_t_25 = __pyx_t_29;
    __pyx_v_xmin = __pyx_t_22;
    __pyx_v_ymin = __pyx_t_25;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">275</span>:         <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">1</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mf">3</span><span class="p">],</span> <span class="n">bbox</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">3</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>    __pyx_t_30 = __pyx_v_i;
    __pyx_t_31 = 1;
    __pyx_t_25 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_bbox.rcbuffer-&gt;pybuffer.buf, __pyx_t_30, __pyx_pybuffernd_bbox.diminfo[0].strides, __pyx_t_31, __pyx_pybuffernd_bbox.diminfo[1].strides));
    __pyx_t_32 = 1;
    __pyx_t_22 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_32, __pyx_pybuffernd_box.diminfo[0].strides));
    if (((__pyx_t_25 &lt; __pyx_t_22) != 0)) {
      __pyx_t_29 = __pyx_t_25;
    } else {
      __pyx_t_29 = __pyx_t_22;
    }
    __pyx_t_25 = __pyx_t_29;
    __pyx_t_33 = __pyx_v_i;
    __pyx_t_34 = 3;
    __pyx_t_29 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_bbox.rcbuffer-&gt;pybuffer.buf, __pyx_t_33, __pyx_pybuffernd_bbox.diminfo[0].strides, __pyx_t_34, __pyx_pybuffernd_bbox.diminfo[1].strides));
    __pyx_t_35 = 3;
    __pyx_t_22 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_35, __pyx_pybuffernd_box.diminfo[0].strides));
    if (((__pyx_t_29 &lt; __pyx_t_22) != 0)) {
      __pyx_t_24 = __pyx_t_29;
    } else {
      __pyx_t_24 = __pyx_t_22;
    }
    __pyx_t_29 = __pyx_t_24;
    __pyx_v_xmax = __pyx_t_25;
    __pyx_v_ymax = __pyx_t_29;
</pre><pre class="cython line score-77" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">276</span>:         <span class="n">overlap</span><span class="p">[</span><span class="n">i</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">([</span><span class="n">xmax</span><span class="o">-</span><span class="n">xmin</span><span class="p">,</span> <span class="n">ymax</span><span class="o">-</span><span class="n">ymin</span><span class="p">])</span> <span class="c"># 有交叠的x，y必然是&gt;0q</span></pre>
<pre class='cython code score-77 '>    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>((__pyx_v_xmax - __pyx_v_xmin));<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>((__pyx_v_ymax - __pyx_v_ymin));<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_7);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_t_4);
    __pyx_t_7 = 0;
    __pyx_t_4 = 0;
    __pyx_t_4 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
      __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
      if (likely(__pyx_t_4)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      }
    }
    if (!__pyx_t_4) {
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_3};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
        PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_3};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      {
        __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_4); __pyx_t_4 = NULL;
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+1, __pyx_t_3);
        __pyx_t_3 = 0;
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      }
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__8);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__8);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1, __pyx_slice__8);
    __pyx_t_2 = 0;
    if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_overlap), __pyx_t_7, __pyx_t_1) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 276, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
/* … */
  __pyx_slice__8 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__8)) __PYX_ERR(0, 276, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__8);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__8);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">277</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">overlap</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_17 = (__pyx_v_overlap-&gt;dimensions[0]);
  __pyx_t_18 = __pyx_t_17;
  for (__pyx_t_19 = 0; __pyx_t_19 &lt; __pyx_t_18; __pyx_t_19+=1) {
    __pyx_v_i = __pyx_t_19;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">278</span>:         <span class="k">if</span> <span class="n">overlap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0</span> <span class="ow">and</span> <span class="n">overlap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_37 = __pyx_v_i;
    __pyx_t_38 = 0;
    __pyx_t_39 = (((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.buf, __pyx_t_37, __pyx_pybuffernd_overlap.diminfo[0].strides, __pyx_t_38, __pyx_pybuffernd_overlap.diminfo[1].strides)) &gt; 0) != 0);
    if (__pyx_t_39) {
    } else {
      __pyx_t_36 = __pyx_t_39;
      goto __pyx_L8_bool_binop_done;
    }
    __pyx_t_40 = __pyx_v_i;
    __pyx_t_41 = 1;
    __pyx_t_39 = (((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.buf, __pyx_t_40, __pyx_pybuffernd_overlap.diminfo[0].strides, __pyx_t_41, __pyx_pybuffernd_overlap.diminfo[1].strides)) &gt; 0) != 0);
    __pyx_t_36 = __pyx_t_39;
    __pyx_L8_bool_binop_done:;
    if (__pyx_t_36) {
/* … */
    }
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">279</span>:             <span class="n">overlap_index</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="o">+</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>      __pyx_t_42 = __pyx_v_i;
      __pyx_t_43 = (__pyx_v_j + 1);
      __pyx_t_44 = __pyx_v_j;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer.buf, __pyx_t_44, __pyx_pybuffernd_overlap_index.diminfo[0].strides) = __pyx_t_42;
      __pyx_v_j = __pyx_t_43;
</pre><pre class="cython line score-32" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">280</span>:     <span class="n">overlap_index</span> <span class="o">=</span> <span class="n">overlap_index</span><span class="p">[:</span><span class="n">j</span><span class="p">]</span> <span class="c"># overlap_index包含了bbox中所有与box有相交的索引</span></pre>
<pre class='cython code score-32 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_j);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 280, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_7 = <span class='py_c_api'>PySlice_New</span>(Py_None, __pyx_t_1, Py_None);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 280, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_overlap_index), __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 280, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 280, __pyx_L1_error)</span>
  __pyx_t_12 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_12, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_overlap_index, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
      }
      __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
    }
    __pyx_pybuffernd_overlap_index.diminfo[0].strides = __pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_overlap_index.diminfo[0].shape = __pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 280, __pyx_L1_error)</span>
  }
  __pyx_t_12 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_overlap_index, ((PyArrayObject *)__pyx_t_1));
  __pyx_t_1 = 0;
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">281</span>:     <span class="n">overlap</span> <span class="o">=</span> <span class="n">overlap</span><span class="p">[</span><span class="n">overlap_index</span><span class="p">]</span></pre>
<pre class='cython code score-23 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_overlap), ((PyObject *)__pyx_v_overlap_index));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 281, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 281, __pyx_L1_error)</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_overlap, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
      }
      __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
    }
    __pyx_pybuffernd_overlap.diminfo[0].strides = __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_overlap.diminfo[0].shape = __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_overlap.diminfo[1].strides = __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_overlap.diminfo[1].shape = __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.shape[1];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 281, __pyx_L1_error)</span>
  }
  __pyx_t_8 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_overlap, ((PyArrayObject *)__pyx_t_1));
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">282</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">overlap</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_17 = (__pyx_v_overlap-&gt;dimensions[0]);
  __pyx_t_18 = __pyx_t_17;
  for (__pyx_t_19 = 0; __pyx_t_19 &lt; __pyx_t_18; __pyx_t_19+=1) {
    __pyx_v_i = __pyx_t_19;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">283</span>:         <span class="n">overlap_area</span> <span class="o">=</span> <span class="n">overlap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span><span class="o">*</span><span class="n">overlap</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_45 = __pyx_v_i;
    __pyx_t_46 = 0;
    __pyx_t_47 = __pyx_v_i;
    __pyx_t_48 = 1;
    __pyx_v_overlap_area = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.buf, __pyx_t_45, __pyx_pybuffernd_overlap.diminfo[0].strides, __pyx_t_46, __pyx_pybuffernd_overlap.diminfo[1].strides)) * (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_overlap.rcbuffer-&gt;pybuffer.buf, __pyx_t_47, __pyx_pybuffernd_overlap.diminfo[0].strides, __pyx_t_48, __pyx_pybuffernd_overlap.diminfo[1].strides)));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">284</span>:         <span class="n">overlap_ratio</span> <span class="o">=</span> <span class="n">overlap_area</span><span class="o">/</span><span class="n">area</span></pre>
<pre class='cython code score-0 '>    __pyx_v_overlap_ratio = (__pyx_v_overlap_area / __pyx_v_area);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">285</span>:         <span class="k">if</span> <span class="n">overlap_ratio</span> <span class="o">&gt;</span> <span class="n">max_ratio</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_36 = ((__pyx_v_overlap_ratio &gt; __pyx_v_max_ratio) != 0);
    if (__pyx_t_36) {
/* … */
    }
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">286</span>:             <span class="n">max_idex</span><span class="p">,</span> <span class="n">max_area</span><span class="p">,</span>  <span class="o">=</span> <span class="n">i</span><span class="p">,</span> <span class="n">overlap_area</span></pre>
<pre class='cython code score-0 '>      __pyx_t_43 = __pyx_v_i;
      __pyx_t_49 = __pyx_v_overlap_area;
      __pyx_v_max_idex = __pyx_t_43;
      __pyx_v_max_area = __pyx_t_49;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">287</span>:             <span class="n">max_ratio</span> <span class="o">=</span> <span class="n">overlap_ratio</span> <span class="c"># box与bbox中的第overlap_index[max_idex]个交比最大</span></pre>
<pre class='cython code score-0 '>      __pyx_v_max_ratio = __pyx_v_overlap_ratio;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">288</span>:     <span class="k">if</span> <span class="p">(</span><span class="n">max_ratio</span> <span class="o">&gt;</span> <span class="n">threshold</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">max_area</span> <span class="o">&gt;</span> <span class="mf">20000</span><span class="p">):</span> <span class="c"># 满足一定条件</span></pre>
<pre class='cython code score-0 '>  __pyx_t_39 = ((__pyx_v_max_ratio &gt; __pyx_v_threshold) != 0);
  if (__pyx_t_39) {
  } else {
    __pyx_t_36 = __pyx_t_39;
    goto __pyx_L14_bool_binop_done;
  }
  __pyx_t_39 = ((__pyx_v_max_area &gt; 20000.0) != 0);
  __pyx_t_36 = __pyx_t_39;
  __pyx_L14_bool_binop_done:;
  if (__pyx_t_36) {
/* … */
  }
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">289</span>:         <span class="k">return</span> <span class="n">overlap_index</span><span class="p">[</span><span class="n">max_idex</span><span class="p">]</span> <span class="c"># 返回索引</span></pre>
<pre class='cython code score-1 '>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    __pyx_t_50 = __pyx_v_max_idex;
    __pyx_t_1 = __Pyx_PyInt_From_npy_int32((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_overlap_index.rcbuffer-&gt;pybuffer.buf, __pyx_t_50, __pyx_pybuffernd_overlap_index.diminfo[0].strides)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 289, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_r = __pyx_t_1;
    __pyx_t_1 = 0;
    goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">290</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">291</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">292</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-60" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">293</span>: <span class="k">def</span> <span class="nf">cal_overlap_ratio</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">big_box</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">small_box</span><span class="p">):</span></pre>
<pre class='cython code score-60 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_13cal_overlap_ratio(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_13cal_overlap_ratio = {"cal_overlap_ratio", (PyCFunction)__pyx_pw_10Lidar_core_13cal_overlap_ratio, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_13cal_overlap_ratio(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_big_box = 0;
  PyArrayObject *__pyx_v_small_box = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("cal_overlap_ratio (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_big_box,&amp;__pyx_n_s_small_box,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_big_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_small_box)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("cal_overlap_ratio", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(0, 293, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "cal_overlap_ratio") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 293, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_big_box = ((PyArrayObject *)values[0]);
    __pyx_v_small_box = ((PyArrayObject *)values[1]);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("cal_overlap_ratio", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 293, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.cal_overlap_ratio", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_big_box), __pyx_ptype_5numpy_ndarray, 1, "big_box", 0))) <span class='error_goto'>__PYX_ERR(0, 293, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_small_box), __pyx_ptype_5numpy_ndarray, 1, "small_box", 0))) <span class='error_goto'>__PYX_ERR(0, 293, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_12cal_overlap_ratio(__pyx_self, __pyx_v_big_box, __pyx_v_small_box);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_12cal_overlap_ratio(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_big_box, PyArrayObject *__pyx_v_small_box) {
  long __pyx_v_xmin;
  long __pyx_v_xmax;
  long __pyx_v_ymin;
  long __pyx_v_ymax;
  long __pyx_v_overlap_x;
  long __pyx_v_overlap_y;
  double __pyx_v_overlap_area;
  double __pyx_v_area;
  double __pyx_v_overlap_ratio;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_big_box;
  __Pyx_Buffer __pyx_pybuffer_big_box;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_small_box;
  __Pyx_Buffer __pyx_pybuffer_small_box;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("cal_overlap_ratio", 0);
  __pyx_pybuffer_big_box.pybuffer.buf = NULL;
  __pyx_pybuffer_big_box.refcount = 0;
  __pyx_pybuffernd_big_box.data = NULL;
  __pyx_pybuffernd_big_box.rcbuffer = &amp;__pyx_pybuffer_big_box;
  __pyx_pybuffer_small_box.pybuffer.buf = NULL;
  __pyx_pybuffer_small_box.refcount = 0;
  __pyx_pybuffernd_small_box.data = NULL;
  __pyx_pybuffernd_small_box.rcbuffer = &amp;__pyx_pybuffer_small_box;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_big_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_big_box, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 293, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_big_box.diminfo[0].strides = __pyx_pybuffernd_big_box.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_big_box.diminfo[0].shape = __pyx_pybuffernd_big_box.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_small_box, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 293, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_small_box.diminfo[0].strides = __pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_small_box.diminfo[0].shape = __pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_19);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_big_box.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.cal_overlap_ratio", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_big_box.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__130 = <span class='py_c_api'>PyTuple_Pack</span>(11, __pyx_n_s_big_box, __pyx_n_s_small_box, __pyx_n_s_xmin, __pyx_n_s_xmax, __pyx_n_s_ymin, __pyx_n_s_ymax, __pyx_n_s_overlap_x, __pyx_n_s_overlap_y, __pyx_n_s_overlap_area, __pyx_n_s_area, __pyx_n_s_overlap_ratio);<span class='error_goto'> if (unlikely(!__pyx_tuple__130)) __PYX_ERR(0, 293, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__130);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__130);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_13cal_overlap_ratio, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 293, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_cal_overlap_ratio, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 293, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__131 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(2, 0, 11, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__130, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_cal_overlap_ratio, 293, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__131)) __PYX_ERR(0, 293, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">294</span>:     <span class="c"># 求big_box相对于small_box的覆盖比例... xmin, xmax, ymin, ymax</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">295</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">xmin</span><span class="p">,</span> <span class="nf">xmax</span><span class="p">,</span> <span class="nf">ymin</span><span class="p">,</span> <span class="nf">ymax</span><span class="p">,</span> <span class="nf">overlap_x</span><span class="p">,</span> <span class="nf">overlap_y</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">296</span>:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">overlap_area</span><span class="p">,</span> <span class="nf">area</span><span class="p">,</span> <span class="nf">overlap_ratio</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">297</span>:     <span class="c">#print(&quot;big_box, smallbox&quot;,big_box, small_box)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">298</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">299</span>:     <span class="n">area</span> <span class="o">=</span> <span class="p">(</span><span class="n">small_box</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">-</span><span class="n">small_box</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="n">small_box</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">-</span><span class="n">small_box</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span> <span class="c"># samll_box的面积</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = 1;
  __pyx_t_2 = 0;
  __pyx_t_3 = 3;
  __pyx_t_4 = 2;
  __pyx_v_area = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_1, __pyx_pybuffernd_small_box.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_2, __pyx_pybuffernd_small_box.diminfo[0].strides))) * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_3, __pyx_pybuffernd_small_box.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_4, __pyx_pybuffernd_small_box.diminfo[0].strides))));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">300</span>:     <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">big_box</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">small_box</span><span class="p">[</span><span class="mf">0</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">big_box</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span> <span class="n">small_box</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>  __pyx_t_5 = 0;
  __pyx_t_6 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_5, __pyx_pybuffernd_small_box.diminfo[0].strides));
  __pyx_t_7 = 0;
  __pyx_t_8 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_big_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_7, __pyx_pybuffernd_big_box.diminfo[0].strides));
  if (((__pyx_t_6 &gt; __pyx_t_8) != 0)) {
    __pyx_t_9 = __pyx_t_6;
  } else {
    __pyx_t_9 = __pyx_t_8;
  }
  __pyx_t_6 = __pyx_t_9;
  __pyx_t_10 = 2;
  __pyx_t_9 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_10, __pyx_pybuffernd_small_box.diminfo[0].strides));
  __pyx_t_11 = 2;
  __pyx_t_8 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_big_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_11, __pyx_pybuffernd_big_box.diminfo[0].strides));
  if (((__pyx_t_9 &gt; __pyx_t_8) != 0)) {
    __pyx_t_12 = __pyx_t_9;
  } else {
    __pyx_t_12 = __pyx_t_8;
  }
  __pyx_t_9 = __pyx_t_12;
  __pyx_v_xmin = __pyx_t_6;
  __pyx_v_ymin = __pyx_t_9;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">301</span>:     <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">big_box</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="n">small_box</span><span class="p">[</span><span class="mf">1</span><span class="p">]),</span> <span class="nb">min</span><span class="p">(</span><span class="n">big_box</span><span class="p">[</span><span class="mf">3</span><span class="p">],</span> <span class="n">small_box</span><span class="p">[</span><span class="mf">3</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>  __pyx_t_13 = 1;
  __pyx_t_9 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_13, __pyx_pybuffernd_small_box.diminfo[0].strides));
  __pyx_t_14 = 1;
  __pyx_t_6 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_big_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_14, __pyx_pybuffernd_big_box.diminfo[0].strides));
  if (((__pyx_t_9 &lt; __pyx_t_6) != 0)) {
    __pyx_t_12 = __pyx_t_9;
  } else {
    __pyx_t_12 = __pyx_t_6;
  }
  __pyx_t_9 = __pyx_t_12;
  __pyx_t_15 = 3;
  __pyx_t_12 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_small_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_small_box.diminfo[0].strides));
  __pyx_t_16 = 3;
  __pyx_t_6 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_big_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_16, __pyx_pybuffernd_big_box.diminfo[0].strides));
  if (((__pyx_t_12 &lt; __pyx_t_6) != 0)) {
    __pyx_t_8 = __pyx_t_12;
  } else {
    __pyx_t_8 = __pyx_t_6;
  }
  __pyx_t_12 = __pyx_t_8;
  __pyx_v_xmax = __pyx_t_9;
  __pyx_v_ymax = __pyx_t_12;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">302</span>:     <span class="n">overlap_x</span> <span class="o">=</span> <span class="n">xmax</span><span class="o">-</span><span class="n">xmin</span></pre>
<pre class='cython code score-0 '>  __pyx_v_overlap_x = (__pyx_v_xmax - __pyx_v_xmin);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">303</span>:     <span class="n">overlap_y</span> <span class="o">=</span> <span class="n">ymax</span><span class="o">-</span><span class="n">ymin</span></pre>
<pre class='cython code score-0 '>  __pyx_v_overlap_y = (__pyx_v_ymax - __pyx_v_ymin);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">304</span>:     <span class="k">if</span> <span class="n">overlap_x</span> <span class="o">&gt;</span> <span class="mf">0</span> <span class="ow">and</span> <span class="n">overlap_y</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_18 = ((__pyx_v_overlap_x &gt; 0) != 0);
  if (__pyx_t_18) {
  } else {
    __pyx_t_17 = __pyx_t_18;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_18 = ((__pyx_v_overlap_y &gt; 0) != 0);
  __pyx_t_17 = __pyx_t_18;
  __pyx_L4_bool_binop_done:;
  if (__pyx_t_17) {
/* … */
    goto __pyx_L3;
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">305</span>:         <span class="n">overlap_area</span> <span class="o">=</span> <span class="n">overlap_x</span> <span class="o">*</span> <span class="n">overlap_y</span></pre>
<pre class='cython code score-0 '>    __pyx_v_overlap_area = (__pyx_v_overlap_x * __pyx_v_overlap_y);
</pre><pre class="cython line score-0">&#xA0;<span class="">306</span>:     <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">307</span>:         <span class="n">overlap_area</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  /*else*/ {
    __pyx_v_overlap_area = 0.0;
  }
  __pyx_L3:;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">308</span>:     <span class="n">overlap_ratio</span> <span class="o">=</span> <span class="n">overlap_area</span><span class="o">/</span><span class="n">area</span></pre>
<pre class='cython code score-0 '>  __pyx_v_overlap_ratio = (__pyx_v_overlap_area / __pyx_v_area);
</pre><pre class="cython line score-0">&#xA0;<span class="">309</span>:     <span class="c">#print(&quot;overlap_ratio:&quot;, overlap_ratio)</span></pre>
<pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">310</span>:     <span class="k">return</span> <span class="n">overlap_ratio</span></pre>
<pre class='cython code score-6 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_19 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_overlap_ratio);<span class='error_goto'> if (unlikely(!__pyx_t_19)) __PYX_ERR(0, 310, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_19);
  __pyx_r = __pyx_t_19;
  __pyx_t_19 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">311</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">312</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">313</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-37" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">314</span>: <span class="k">def</span> <span class="nf">target_fusion</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">target</span><span class="p">):</span> <span class="c"># 把target中索引为idex的合为一体</span></pre>
<pre class='cython code score-37 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_15target_fusion(PyObject *__pyx_self, PyObject *__pyx_v_target); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_15target_fusion = {"target_fusion", (PyCFunction)__pyx_pw_10Lidar_core_15target_fusion, METH_O, 0};
static PyObject *__pyx_pw_10Lidar_core_15target_fusion(PyObject *__pyx_self, PyObject *__pyx_v_target) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("target_fusion (wrapper)", 0);
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_target), __pyx_ptype_5numpy_ndarray, 1, "target", 0))) <span class='error_goto'>__PYX_ERR(0, 314, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_14target_fusion(__pyx_self, ((PyArrayObject *)__pyx_v_target));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_14target_fusion(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_target) {
  long __pyx_v_target_width;
  long __pyx_v_i;
  long __pyx_v_target_num;
  PyArrayObject *__pyx_v_target_new = 0;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target;
  __Pyx_Buffer __pyx_pybuffer_target;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target_new;
  __Pyx_Buffer __pyx_pybuffer_target_new;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("target_fusion", 0);
  __pyx_pybuffer_target_new.pybuffer.buf = NULL;
  __pyx_pybuffer_target_new.refcount = 0;
  __pyx_pybuffernd_target_new.data = NULL;
  __pyx_pybuffernd_target_new.rcbuffer = &amp;__pyx_pybuffer_target_new;
  __pyx_pybuffer_target.pybuffer.buf = NULL;
  __pyx_pybuffer_target.refcount = 0;
  __pyx_pybuffernd_target.data = NULL;
  __pyx_pybuffernd_target.rcbuffer = &amp;__pyx_pybuffer_target;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 314, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_target.diminfo[0].strides = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target.diminfo[0].shape = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_target.diminfo[1].strides = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_target.diminfo[1].shape = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.shape[1];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.target_fusion", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_target_new);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__132 = <span class='py_c_api'>PyTuple_Pack</span>(5, __pyx_n_s_target, __pyx_n_s_target_width, __pyx_n_s_i, __pyx_n_s_target_num, __pyx_n_s_target_new);<span class='error_goto'> if (unlikely(!__pyx_tuple__132)) __PYX_ERR(0, 314, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__132);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__132);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_15target_fusion, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 314, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_target_fusion, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 314, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__133 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(1, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__132, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_target_fusion, 314, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__133)) __PYX_ERR(0, 314, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">315</span>:     <span class="c"># target：xc, yc, xmin, xmax, ymin, ymax, zmin, zmax, I</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">316</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">target_width</span><span class="p">,</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">target_num</span></pre>
<pre class="cython line score-51" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">317</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">target_new</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">target</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span></pre>
<pre class='cython code score-51 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 317, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_copy);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 317, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_target), 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 317, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
    }
  }
  if (!__pyx_t_4) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 317, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_2};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 317, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_2};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 317, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    {
      __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 317, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+1, __pyx_t_2);
      __pyx_t_2 = 0;
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 317, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 317, __pyx_L1_error)</span>
  __pyx_t_6 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_6, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
      __pyx_v_target_new = ((PyArrayObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None); __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf = NULL;
      <span class='error_goto'>__PYX_ERR(0, 317, __pyx_L1_error)</span>
    } else {__pyx_pybuffernd_target_new.diminfo[0].strides = __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target_new.diminfo[0].shape = __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.shape[0];
    }
  }
  __pyx_t_6 = 0;
  __pyx_v_target_new = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">318</span>:     <span class="n">target_num</span> <span class="o">=</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>  __pyx_v_target_num = 1;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">319</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="n">target</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_7 = (__pyx_v_target-&gt;dimensions[0]);
  __pyx_t_8 = __pyx_t_7;
  for (__pyx_t_9 = 1; __pyx_t_9 &lt; __pyx_t_8; __pyx_t_9+=1) {
    __pyx_v_i = __pyx_t_9;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">320</span>:         <span class="n">target_new</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">target_new</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span> <span class="n">target</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">2</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>    __pyx_t_10 = __pyx_v_i;
    __pyx_t_11 = 2;
    __pyx_t_12 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_10, __pyx_pybuffernd_target.diminfo[0].strides, __pyx_t_11, __pyx_pybuffernd_target.diminfo[1].strides));
    __pyx_t_13 = 2;
    __pyx_t_14 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_13, __pyx_pybuffernd_target_new.diminfo[0].strides));
    if (((__pyx_t_12 &lt; __pyx_t_14) != 0)) {
      __pyx_t_15 = __pyx_t_12;
    } else {
      __pyx_t_15 = __pyx_t_14;
    }
    __pyx_t_16 = 2;
    *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_16, __pyx_pybuffernd_target_new.diminfo[0].strides) = __pyx_t_15;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">321</span>:         <span class="n">target_new</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">target_new</span><span class="p">[</span><span class="mf">3</span><span class="p">],</span> <span class="n">target</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">3</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>    __pyx_t_17 = __pyx_v_i;
    __pyx_t_18 = 3;
    __pyx_t_15 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_17, __pyx_pybuffernd_target.diminfo[0].strides, __pyx_t_18, __pyx_pybuffernd_target.diminfo[1].strides));
    __pyx_t_19 = 3;
    __pyx_t_12 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_19, __pyx_pybuffernd_target_new.diminfo[0].strides));
    if (((__pyx_t_15 &gt; __pyx_t_12) != 0)) {
      __pyx_t_14 = __pyx_t_15;
    } else {
      __pyx_t_14 = __pyx_t_12;
    }
    __pyx_t_20 = 3;
    *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_20, __pyx_pybuffernd_target_new.diminfo[0].strides) = __pyx_t_14;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">322</span>:         <span class="n">target_new</span><span class="p">[</span><span class="mf">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">target_new</span><span class="p">[</span><span class="mf">4</span><span class="p">],</span> <span class="n">target</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">4</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>    __pyx_t_21 = __pyx_v_i;
    __pyx_t_22 = 4;
    __pyx_t_14 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_21, __pyx_pybuffernd_target.diminfo[0].strides, __pyx_t_22, __pyx_pybuffernd_target.diminfo[1].strides));
    __pyx_t_23 = 4;
    __pyx_t_15 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_23, __pyx_pybuffernd_target_new.diminfo[0].strides));
    if (((__pyx_t_14 &lt; __pyx_t_15) != 0)) {
      __pyx_t_12 = __pyx_t_14;
    } else {
      __pyx_t_12 = __pyx_t_15;
    }
    __pyx_t_24 = 4;
    *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_24, __pyx_pybuffernd_target_new.diminfo[0].strides) = __pyx_t_12;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">323</span>:         <span class="n">target_new</span><span class="p">[</span><span class="mf">5</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">target_new</span><span class="p">[</span><span class="mf">5</span><span class="p">],</span> <span class="n">target</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">5</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>    __pyx_t_25 = __pyx_v_i;
    __pyx_t_26 = 5;
    __pyx_t_12 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_25, __pyx_pybuffernd_target.diminfo[0].strides, __pyx_t_26, __pyx_pybuffernd_target.diminfo[1].strides));
    __pyx_t_27 = 5;
    __pyx_t_14 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_27, __pyx_pybuffernd_target_new.diminfo[0].strides));
    if (((__pyx_t_12 &gt; __pyx_t_14) != 0)) {
      __pyx_t_15 = __pyx_t_12;
    } else {
      __pyx_t_15 = __pyx_t_14;
    }
    __pyx_t_28 = 5;
    *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_28, __pyx_pybuffernd_target_new.diminfo[0].strides) = __pyx_t_15;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">324</span>:         <span class="n">target_new</span><span class="p">[</span><span class="mf">7</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">target_new</span><span class="p">[</span><span class="mf">7</span><span class="p">],</span> <span class="n">target</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">7</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>    __pyx_t_29 = __pyx_v_i;
    __pyx_t_30 = 7;
    __pyx_t_15 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_29, __pyx_pybuffernd_target.diminfo[0].strides, __pyx_t_30, __pyx_pybuffernd_target.diminfo[1].strides));
    __pyx_t_31 = 7;
    __pyx_t_12 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_31, __pyx_pybuffernd_target_new.diminfo[0].strides));
    if (((__pyx_t_15 &gt; __pyx_t_12) != 0)) {
      __pyx_t_14 = __pyx_t_15;
    } else {
      __pyx_t_14 = __pyx_t_12;
    }
    __pyx_t_32 = 7;
    *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_32, __pyx_pybuffernd_target_new.diminfo[0].strides) = __pyx_t_14;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">325</span>:         <span class="n">target_new</span><span class="p">[</span><span class="mf">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">target_new</span><span class="p">[</span><span class="mf">8</span><span class="p">]</span> <span class="o">+</span> <span class="n">target</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">8</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_33 = 8;
    __pyx_t_34 = __pyx_v_i;
    __pyx_t_35 = 8;
    __pyx_t_36 = 8;
    *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_36, __pyx_pybuffernd_target_new.diminfo[0].strides) = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_33, __pyx_pybuffernd_target_new.diminfo[0].strides)) + (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_34, __pyx_pybuffernd_target.diminfo[0].strides, __pyx_t_35, __pyx_pybuffernd_target.diminfo[1].strides)));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">326</span>:         <span class="n">target_num</span> <span class="o">=</span> <span class="n">target_num</span> <span class="o">+</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>    __pyx_v_target_num = (__pyx_v_target_num + 1);
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">327</span>:     <span class="n">target_new</span><span class="p">[</span><span class="mf">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">target_new</span><span class="p">[</span><span class="mf">8</span><span class="p">]</span><span class="o">//</span><span class="n">target_num</span></pre>
<pre class='cython code score-0 '>  __pyx_t_37 = 8;
  __pyx_t_38 = 8;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_38, __pyx_pybuffernd_target_new.diminfo[0].strides) = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_37, __pyx_pybuffernd_target_new.diminfo[0].strides)) / __pyx_v_target_num);
</pre><pre class="cython line score-0">&#xA0;<span class="">328</span>:     <span class="c">#print(&quot;target_fusion--target_new[8]:&quot;, target_new[8])    </span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">329</span>:     <span class="n">target_new</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">target_new</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">target_new</span><span class="p">[</span><span class="mf">3</span><span class="p">])</span><span class="o">//</span><span class="mf">2</span></pre>
<pre class='cython code score-0 '>  __pyx_t_39 = 2;
  __pyx_t_40 = 3;
  __pyx_t_41 = 0;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_41, __pyx_pybuffernd_target_new.diminfo[0].strides) = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_39, __pyx_pybuffernd_target_new.diminfo[0].strides)) + (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_40, __pyx_pybuffernd_target_new.diminfo[0].strides))) / 2);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">330</span>:     <span class="n">target_new</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">target_new</span><span class="p">[</span><span class="mf">4</span><span class="p">]</span> <span class="o">+</span> <span class="n">target_new</span><span class="p">[</span><span class="mf">5</span><span class="p">])</span><span class="o">//</span><span class="mf">2</span></pre>
<pre class='cython code score-0 '>  __pyx_t_42 = 4;
  __pyx_t_43 = 5;
  __pyx_t_44 = 1;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_44, __pyx_pybuffernd_target_new.diminfo[0].strides) = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_42, __pyx_pybuffernd_target_new.diminfo[0].strides)) + (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_43, __pyx_pybuffernd_target_new.diminfo[0].strides))) / 2);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">331</span>:     <span class="n">target_width</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">target_new</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">-</span><span class="n">target_new</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span> <span class="n">target_new</span><span class="p">[</span><span class="mf">5</span><span class="p">]</span><span class="o">-</span><span class="n">target_new</span><span class="p">[</span><span class="mf">4</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>  __pyx_t_45 = 5;
  __pyx_t_46 = 4;
  __pyx_t_14 = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_45, __pyx_pybuffernd_target_new.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_46, __pyx_pybuffernd_target_new.diminfo[0].strides)));
  __pyx_t_47 = 3;
  __pyx_t_48 = 2;
  __pyx_t_15 = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_47, __pyx_pybuffernd_target_new.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_48, __pyx_pybuffernd_target_new.diminfo[0].strides)));
  if (((__pyx_t_14 &gt; __pyx_t_15) != 0)) {
    __pyx_t_12 = __pyx_t_14;
  } else {
    __pyx_t_12 = __pyx_t_15;
  }
  __pyx_v_target_width = __pyx_t_12;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">332</span>:     <span class="k">if</span> <span class="n">target_new</span><span class="p">[</span><span class="mf">7</span><span class="p">]</span><span class="o">/</span><span class="n">target_width</span> <span class="o">&gt;=</span> <span class="mf">4.5</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_49 = 7;
  __pyx_t_50 = ((((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.buf, __pyx_t_49, __pyx_pybuffernd_target_new.diminfo[0].strides)) / __pyx_v_target_width) &gt;= 4.5) != 0);
  if (__pyx_t_50) {
/* … */
  }
</pre><pre class="cython line score-20" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">333</span>:         <span class="n">target_new</span> <span class="o">=</span> <span class="bp">None</span> <span class="c"># 若目标及其细长（误检可能性大）</span></pre>
<pre class='cython code score-20 '>    __pyx_t_6 = ((PyArrayObject *)Py_None);
    {
      __Pyx_BufFmt_StackElem __pyx_stack[1];
      <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer);
      __pyx_t_51 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_6, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
      if (unlikely(__pyx_t_51 &lt; 0)) {
        <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_52, &amp;__pyx_t_53, &amp;__pyx_t_54);
        if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target_new, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
          Py_XDECREF(__pyx_t_52); Py_XDECREF(__pyx_t_53); Py_XDECREF(__pyx_t_54);
          <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
        } else {
          <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_52, __pyx_t_53, __pyx_t_54);
        }
        __pyx_t_52 = __pyx_t_53 = __pyx_t_54 = 0;
      }
      __pyx_pybuffernd_target_new.diminfo[0].strides = __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target_new.diminfo[0].shape = __pyx_pybuffernd_target_new.rcbuffer-&gt;pybuffer.shape[0];
      if (unlikely(__pyx_t_51 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 333, __pyx_L1_error)</span>
    }
    __pyx_t_6 = 0;
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
    <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_target_new, ((PyArrayObject *)Py_None));
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">334</span>:     <span class="k">return</span> <span class="n">target_new</span></pre>
<pre class='cython code score-2 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_target_new));
  __pyx_r = ((PyObject *)__pyx_v_target_new);
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">335</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">336</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">337</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">338</span>: <span class="k">def</span> <span class="nf">Lidar_class</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">state</span><span class="p">):</span></pre>
<pre class='cython code score-27 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_17Lidar_class(PyObject *__pyx_self, PyObject *__pyx_v_state); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_17Lidar_class = {"Lidar_class", (PyCFunction)__pyx_pw_10Lidar_core_17Lidar_class, METH_O, 0};
static PyObject *__pyx_pw_10Lidar_core_17Lidar_class(PyObject *__pyx_self, PyObject *__pyx_v_state) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("Lidar_class (wrapper)", 0);
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_state), __pyx_ptype_5numpy_ndarray, 1, "state", 0))) <span class='error_goto'>__PYX_ERR(0, 338, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_16Lidar_class(__pyx_self, ((PyArrayObject *)__pyx_v_state));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_16Lidar_class(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_state) {
  long __pyx_v_area;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_state;
  __Pyx_Buffer __pyx_pybuffer_state;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("Lidar_class", 0);
  __pyx_pybuffer_state.pybuffer.buf = NULL;
  __pyx_pybuffer_state.refcount = 0;
  __pyx_pybuffernd_state.data = NULL;
  __pyx_pybuffernd_state.rcbuffer = &amp;__pyx_pybuffer_state;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_state, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 338, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_state.diminfo[0].strides = __pyx_pybuffernd_state.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_state.diminfo[0].shape = __pyx_pybuffernd_state.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_state.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.Lidar_class", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_state.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__134 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_n_s_state, __pyx_n_s_area);<span class='error_goto'> if (unlikely(!__pyx_tuple__134)) __PYX_ERR(0, 338, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__134);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__134);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_17Lidar_class, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 338, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_Lidar_class, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 338, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__135 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(1, 0, 2, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__134, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_Lidar_class, 338, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__135)) __PYX_ERR(0, 338, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">339</span>:     <span class="c"># state: ID, class, xc, yc, vx, vy, xmin(6), xmax(7), ymin(8), ymax(9), zmin, zmax, I</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">340</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">area</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">341</span>:     <span class="n">area</span> <span class="o">=</span> <span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mf">7</span><span class="p">]</span><span class="o">-</span><span class="n">state</span><span class="p">[</span><span class="mf">6</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="mf">9</span><span class="p">]</span><span class="o">-</span><span class="n">state</span><span class="p">[</span><span class="mf">8</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = 7;
  __pyx_t_2 = 6;
  __pyx_t_3 = 9;
  __pyx_t_4 = 8;
  __pyx_v_area = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_1, __pyx_pybuffernd_state.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_2, __pyx_pybuffernd_state.diminfo[0].strides))) * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_3, __pyx_pybuffernd_state.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_4, __pyx_pybuffernd_state.diminfo[0].strides))));
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">342</span>:     <span class="k">if</span> <span class="n">area</span> <span class="o">&lt;=</span> <span class="mf">10000</span><span class="p">:</span> <span class="k">return</span> <span class="mf">1</span></pre>
<pre class='cython code score-2 '>  __pyx_t_5 = ((__pyx_v_area &lt;= 0x2710) != 0);
  if (__pyx_t_5) {
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1);
    __pyx_r = __pyx_int_1;
    goto __pyx_L0;
  }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">343</span>:     <span class="k">elif</span> <span class="n">area</span> <span class="o">&lt;=</span> <span class="mf">40000</span><span class="p">:</span> <span class="k">return</span> <span class="mf">2</span></pre>
<pre class='cython code score-2 '>  __pyx_t_5 = ((__pyx_v_area &lt;= 0x9C40) != 0);
  if (__pyx_t_5) {
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2);
    __pyx_r = __pyx_int_2;
    goto __pyx_L0;
  }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">344</span>:     <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="mf">3</span></pre>
<pre class='cython code score-2 '>  /*else*/ {
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
    __pyx_r = __pyx_int_3;
    goto __pyx_L0;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">345</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">346</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">347</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">348</span>: <span class="c">#Edited by HOUXUEYUAN at 20210630</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">349</span>: <span class="k">def</span> <span class="nf">lidar_class_new</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">target</span><span class="p">):</span></pre>
<pre class='cython code score-27 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_19lidar_class_new(PyObject *__pyx_self, PyObject *__pyx_v_target); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_19lidar_class_new = {"lidar_class_new", (PyCFunction)__pyx_pw_10Lidar_core_19lidar_class_new, METH_O, 0};
static PyObject *__pyx_pw_10Lidar_core_19lidar_class_new(PyObject *__pyx_self, PyObject *__pyx_v_target) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("lidar_class_new (wrapper)", 0);
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_target), __pyx_ptype_5numpy_ndarray, 1, "target", 0))) <span class='error_goto'>__PYX_ERR(0, 349, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_18lidar_class_new(__pyx_self, ((PyArrayObject *)__pyx_v_target));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_18lidar_class_new(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_target) {
  long __pyx_v_area;
  double __pyx_v_aspect_ratio;
  double __pyx_v_delta_x;
  double __pyx_v_delta_y;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target;
  __Pyx_Buffer __pyx_pybuffer_target;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("lidar_class_new", 0);
  __pyx_pybuffer_target.pybuffer.buf = NULL;
  __pyx_pybuffer_target.refcount = 0;
  __pyx_pybuffernd_target.data = NULL;
  __pyx_pybuffernd_target.rcbuffer = &amp;__pyx_pybuffer_target;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 349, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_target.diminfo[0].strides = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target.diminfo[0].shape = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.lidar_class_new", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__136 = <span class='py_c_api'>PyTuple_Pack</span>(5, __pyx_n_s_target, __pyx_n_s_area, __pyx_n_s_aspect_ratio, __pyx_n_s_delta_x, __pyx_n_s_delta_y);<span class='error_goto'> if (unlikely(!__pyx_tuple__136)) __PYX_ERR(0, 349, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__136);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__136);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_19lidar_class_new, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 349, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_lidar_class_new, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 349, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__137 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(1, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__136, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_lidar_class_new, 349, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__137)) __PYX_ERR(0, 349, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">350</span>:         <span class="c"># target: xc, yc, xmin, xmax, ymin, ymax, zmin, zmax, I</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">351</span>:         <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">area</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_area = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">352</span>:         <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">aspect_ratio</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_aspect_ratio = 0.0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">353</span>:         <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">delta_x</span><span class="p">,</span> <span class="nf">delta_y</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_delta_y = 0.0;
</pre><pre class="cython line score-0">&#xA0;<span class="">354</span>:         <span class="c">#print(&quot;lidar_class_target&quot;, target)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">355</span>:         <span class="n">delta_x</span> <span class="o">=</span> <span class="p">(</span><span class="n">target</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">-</span><span class="n">target</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span> <span class="o">*</span> <span class="mf">1.0</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = 3;
  __pyx_t_2 = 2;
  __pyx_v_delta_x = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_1, __pyx_pybuffernd_target.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_2, __pyx_pybuffernd_target.diminfo[0].strides))) * 1.0);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">356</span>:         <span class="n">delta_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">target</span><span class="p">[</span><span class="mf">5</span><span class="p">]</span><span class="o">-</span><span class="n">target</span><span class="p">[</span><span class="mf">4</span><span class="p">])</span> <span class="o">*</span> <span class="mf">1.0</span></pre>
<pre class='cython code score-0 '>  __pyx_t_3 = 5;
  __pyx_t_4 = 4;
  __pyx_v_delta_y = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_3, __pyx_pybuffernd_target.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_4, __pyx_pybuffernd_target.diminfo[0].strides))) * 1.0);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">357</span>:         <span class="n">area</span> <span class="o">=</span> <span class="p">(</span><span class="n">target</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">-</span><span class="n">target</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="n">target</span><span class="p">[</span><span class="mf">5</span><span class="p">]</span><span class="o">-</span><span class="n">target</span><span class="p">[</span><span class="mf">4</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>  __pyx_t_5 = 3;
  __pyx_t_6 = 2;
  __pyx_t_7 = 5;
  __pyx_t_8 = 4;
  __pyx_v_area = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_5, __pyx_pybuffernd_target.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_6, __pyx_pybuffernd_target.diminfo[0].strides))) * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_7, __pyx_pybuffernd_target.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_8, __pyx_pybuffernd_target.diminfo[0].strides))));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">358</span>:         <span class="n">aspect_ratio</span> <span class="o">=</span> <span class="n">delta_x</span><span class="o">/</span><span class="n">delta_y</span></pre>
<pre class='cython code score-0 '>  __pyx_v_aspect_ratio = (__pyx_v_delta_x / __pyx_v_delta_y);
</pre><pre class="cython line score-0">&#xA0;<span class="">359</span>:         <span class="c">#print(&quot;target:&quot;, target)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">360</span>:         <span class="c">#print(&quot;area:&quot;, area)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">361</span>:         <span class="c">#print(&quot;aspect_ratio:&quot;, aspect_ratio)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">362</span>:         <span class="c">#纵横比小于2且xy平面投影面积小于0.5平米，认为是行人</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">363</span>:         <span class="k">if</span> <span class="p">(</span><span class="mf">1800</span>  <span class="o">&lt;=</span> <span class="n">target</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">&lt;=</span><span class="mf">2600</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="mf">1300</span> <span class="o">&lt;=</span> <span class="n">target</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mf">2050</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_10 = 0;
  __pyx_t_11 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_10, __pyx_pybuffernd_target.diminfo[0].strides));
  __pyx_t_12 = (0x708 &lt;= __pyx_t_11);
  if (__pyx_t_12) {
    __pyx_t_12 = (__pyx_t_11 &lt;= 0xA28);
  }
  __pyx_t_13 = (__pyx_t_12 != 0);
  if (!__pyx_t_13) {
  } else {
    __pyx_t_9 = __pyx_t_13;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_14 = 1;
  __pyx_t_11 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_14, __pyx_pybuffernd_target.diminfo[0].strides));
  __pyx_t_13 = (0x514 &lt;= __pyx_t_11);
  if (__pyx_t_13) {
    __pyx_t_13 = (__pyx_t_11 &lt;= 0x802);
  }
  __pyx_t_12 = (__pyx_t_13 != 0);
  __pyx_t_9 = __pyx_t_12;
  __pyx_L4_bool_binop_done:;
  if (__pyx_t_9) {
/* … */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">364</span>:             <span class="k">if</span> <span class="p">(</span><span class="n">area</span> <span class="o">&lt;</span> <span class="mf">4000</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">aspect_ratio</span> <span class="o">&gt;=</span> <span class="mf">0.6</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">aspect_ratio</span> <span class="o">&lt;=</span> <span class="mf">1.7</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>    __pyx_t_12 = ((__pyx_v_area &lt; 0xFA0) != 0);
    if (__pyx_t_12) {
    } else {
      __pyx_t_9 = __pyx_t_12;
      goto __pyx_L7_bool_binop_done;
    }
    __pyx_t_12 = ((__pyx_v_aspect_ratio &gt;= 0.6) != 0);
    if (__pyx_t_12) {
    } else {
      __pyx_t_9 = __pyx_t_12;
      goto __pyx_L7_bool_binop_done;
    }
    __pyx_t_12 = ((__pyx_v_aspect_ratio &lt;= 1.7) != 0);
    __pyx_t_9 = __pyx_t_12;
    __pyx_L7_bool_binop_done:;
    if (__pyx_t_9) {
/* … */
    }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">365</span>:                 <span class="k">return</span> <span class="mf">1</span> <span class="c">#行人</span></pre>
<pre class='cython code score-2 '>      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1);
      __pyx_r = __pyx_int_1;
      goto __pyx_L0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">366</span>:             <span class="k">elif</span> <span class="p">(</span> <span class="mf">4000</span> <span class="o">&lt;=</span> <span class="n">area</span> <span class="o">&lt;=</span> <span class="mf">10000</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>    __pyx_t_9 = (0xFA0 &lt;= __pyx_v_area);
    if (__pyx_t_9) {
      __pyx_t_9 = (__pyx_v_area &lt;= 0x2710);
    }
    __pyx_t_12 = (__pyx_t_9 != 0);
    if (__pyx_t_12) {
/* … */
    }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">367</span>:                 <span class="k">return</span> <span class="mf">2</span> <span class="c">#非机动车</span></pre>
<pre class='cython code score-2 '>      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2);
      __pyx_r = __pyx_int_2;
      goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">368</span>:             <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">369</span>:                 <span class="k">return</span> <span class="mf">3</span> <span class="c">#车辆</span></pre>
<pre class='cython code score-2 '>    /*else*/ {
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
      __pyx_r = __pyx_int_3;
      goto __pyx_L0;
    }
</pre><pre class="cython line score-0">&#xA0;<span class="">370</span>:         <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">371</span>:             <span class="k">return</span> <span class="mf">3</span></pre>
<pre class='cython code score-2 '>  /*else*/ {
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
    __pyx_r = __pyx_int_3;
    goto __pyx_L0;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">372</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">373</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">374</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">375</span>: <span class="c">#功能：找到两个box，五点（中心点和四个交点）中距离最近的点</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">376</span>: <span class="c">#五个点的顺序为：中心点(xc,yc)(0),(xmax,ymax)左上(1),(xmax,ymin)右上(2),(xmin,ymin)右下(3),(xmin,ymax)左下(4)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">377</span>: <span class="c">#输入：</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">378</span>: <span class="c">#   box1: xmin(0), xmax(1), ymin(2), ymax(3)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">379</span>: <span class="c">#   box2: xmin(0), xmax(1), ymin(2), ymax(3)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">380</span>: <span class="c">#输出：</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">381</span>: <span class="c">#   point_idex:最近点的索引</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">382</span>: <span class="c">#   dx_nearest:最近点的x坐标差值</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">383</span>: <span class="c">#   dy_nearest:最近点的y坐标差值</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">384</span>: <span class="c">#   distance_nearest:最近点之间的2范数距离</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">385</span>: <span class="c">#Edited by HOUXUEYUAN at 20210530</span></pre>
<pre class="cython line score-79" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">386</span>: <span class="k">def</span> <span class="nf">get_nearest_point</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">box1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">box2</span><span class="p">):</span></pre>
<pre class='cython code score-79 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_21get_nearest_point(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_21get_nearest_point = {"get_nearest_point", (PyCFunction)__pyx_pw_10Lidar_core_21get_nearest_point, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_21get_nearest_point(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_box1 = 0;
  PyArrayObject *__pyx_v_box2 = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("get_nearest_point (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_box1,&amp;__pyx_n_s_box2,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_box1)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_box2)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("get_nearest_point", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(0, 386, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_nearest_point") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 386, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_box1 = ((PyArrayObject *)values[0]);
    __pyx_v_box2 = ((PyArrayObject *)values[1]);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("get_nearest_point", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 386, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.get_nearest_point", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_box1), __pyx_ptype_5numpy_ndarray, 1, "box1", 0))) <span class='error_goto'>__PYX_ERR(0, 386, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_box2), __pyx_ptype_5numpy_ndarray, 1, "box2", 0))) <span class='error_goto'>__PYX_ERR(0, 386, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_20get_nearest_point(__pyx_self, __pyx_v_box1, __pyx_v_box2);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_20get_nearest_point(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_box1, PyArrayObject *__pyx_v_box2) {
  long __pyx_v_point_idex;
  long __pyx_v_xc1;
  long __pyx_v_yc1;
  long __pyx_v_xc2;
  long __pyx_v_yc2;
  long __pyx_v_dx_nearest;
  long __pyx_v_dy_nearest;
  long __pyx_v_distance_nearest;
  PyArrayObject *__pyx_v_dx = 0;
  PyArrayObject *__pyx_v_dy = 0;
  PyArrayObject *__pyx_v_distance = 0;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_box1;
  __Pyx_Buffer __pyx_pybuffer_box1;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_box2;
  __Pyx_Buffer __pyx_pybuffer_box2;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_distance;
  __Pyx_Buffer __pyx_pybuffer_distance;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_dx;
  __Pyx_Buffer __pyx_pybuffer_dx;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_dy;
  __Pyx_Buffer __pyx_pybuffer_dy;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("get_nearest_point", 0);
  __pyx_pybuffer_dx.pybuffer.buf = NULL;
  __pyx_pybuffer_dx.refcount = 0;
  __pyx_pybuffernd_dx.data = NULL;
  __pyx_pybuffernd_dx.rcbuffer = &amp;__pyx_pybuffer_dx;
  __pyx_pybuffer_dy.pybuffer.buf = NULL;
  __pyx_pybuffer_dy.refcount = 0;
  __pyx_pybuffernd_dy.data = NULL;
  __pyx_pybuffernd_dy.rcbuffer = &amp;__pyx_pybuffer_dy;
  __pyx_pybuffer_distance.pybuffer.buf = NULL;
  __pyx_pybuffer_distance.refcount = 0;
  __pyx_pybuffernd_distance.data = NULL;
  __pyx_pybuffernd_distance.rcbuffer = &amp;__pyx_pybuffer_distance;
  __pyx_pybuffer_box1.pybuffer.buf = NULL;
  __pyx_pybuffer_box1.refcount = 0;
  __pyx_pybuffernd_box1.data = NULL;
  __pyx_pybuffernd_box1.rcbuffer = &amp;__pyx_pybuffer_box1;
  __pyx_pybuffer_box2.pybuffer.buf = NULL;
  __pyx_pybuffer_box2.refcount = 0;
  __pyx_pybuffernd_box2.data = NULL;
  __pyx_pybuffernd_box2.rcbuffer = &amp;__pyx_pybuffer_box2;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_box1, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 386, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_box1.diminfo[0].strides = __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_box1.diminfo[0].shape = __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_box2, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 386, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_box2.diminfo[0].strides = __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_box2.diminfo[0].shape = __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.get_nearest_point", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_dx);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_dy);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_distance);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__138 = <span class='py_c_api'>PyTuple_Pack</span>(14, __pyx_n_s_box1, __pyx_n_s_box2, __pyx_n_s_i, __pyx_n_s_point_idex, __pyx_n_s_xc1, __pyx_n_s_yc1, __pyx_n_s_xc2, __pyx_n_s_yc2, __pyx_n_s_dx_nearest, __pyx_n_s_dy_nearest, __pyx_n_s_distance_nearest, __pyx_n_s_dx, __pyx_n_s_dy, __pyx_n_s_distance);<span class='error_goto'> if (unlikely(!__pyx_tuple__138)) __PYX_ERR(0, 386, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__138);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__138);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_21get_nearest_point, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 386, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_get_nearest_point, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 386, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__139 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(2, 0, 14, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__138, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_get_nearest_point, 386, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__139)) __PYX_ERR(0, 386, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">387</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">point_idex</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_point_idex = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">388</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">xc1</span><span class="p">,</span> <span class="nf">yc1</span><span class="p">,</span> <span class="nf">xc2</span><span class="p">,</span> <span class="nf">yc2</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_yc2 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">389</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">dx_nearest</span><span class="p">,</span> <span class="nf">dy_nearest</span><span class="p">,</span> <span class="nf">distance_nearest</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_distance_nearest = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">390</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">distance</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">391</span>: </pre>
<pre class="cython line score-68" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">392</span>:     <span class="n">dx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-68 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 392, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 392, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 392, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 392, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_int_5, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 392, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_int_5, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 392, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 392, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    if (__pyx_t_2) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_5);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0+__pyx_t_5, __pyx_int_5);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 1+__pyx_t_5, __pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_6, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 392, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 392, __pyx_L1_error)</span>
  __pyx_t_7 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_7, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_5 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_8, &amp;__pyx_t_9, &amp;__pyx_t_10);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_dx, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_8); Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_8, __pyx_t_9, __pyx_t_10);
      }
      __pyx_t_8 = __pyx_t_9 = __pyx_t_10 = 0;
    }
    __pyx_pybuffernd_dx.diminfo[0].strides = __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_dx.diminfo[0].shape = __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_5 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 392, __pyx_L1_error)</span>
  }
  __pyx_t_7 = 0;
  __pyx_v_dx = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-68" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">393</span>:     <span class="n">dy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-68 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_6))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_6);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_6, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_6)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_int_5, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_6)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_int_5, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (__pyx_t_3) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_5);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_5, __pyx_int_5);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_5, __pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_6, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 393, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 393, __pyx_L1_error)</span>
  __pyx_t_7 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_7, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_5 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_10, &amp;__pyx_t_9, &amp;__pyx_t_8);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_dy, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_8);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_10, __pyx_t_9, __pyx_t_8);
      }
      __pyx_t_10 = __pyx_t_9 = __pyx_t_8 = 0;
    }
    __pyx_pybuffernd_dy.diminfo[0].strides = __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_dy.diminfo[0].shape = __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_5 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 393, __pyx_L1_error)</span>
  }
  __pyx_t_7 = 0;
  __pyx_v_dy = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-68" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">394</span>:     <span class="n">distance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mf">5</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-68 '>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 394, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_6, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 394, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 394, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_6, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 394, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_6 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_6)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_int_5, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 394, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_int_5, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 394, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 394, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    if (__pyx_t_6) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_6); __pyx_t_6 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_5);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0+__pyx_t_5, __pyx_int_5);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1+__pyx_t_5, __pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 394, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 394, __pyx_L1_error)</span>
  __pyx_t_7 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_7, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_5 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_8, &amp;__pyx_t_9, &amp;__pyx_t_10);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_distance, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_8); Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_8, __pyx_t_9, __pyx_t_10);
      }
      __pyx_t_8 = __pyx_t_9 = __pyx_t_10 = 0;
    }
    __pyx_pybuffernd_distance.diminfo[0].strides = __pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_distance.diminfo[0].shape = __pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_5 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 394, __pyx_L1_error)</span>
  }
  __pyx_t_7 = 0;
  __pyx_v_distance = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">395</span>:     <span class="n">xc1</span><span class="p">,</span> <span class="n">yc1</span> <span class="o">=</span> <span class="p">(</span><span class="n">box1</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">box1</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span><span class="o">//</span><span class="mf">2</span><span class="p">,</span> <span class="p">(</span><span class="n">box1</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">box1</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span><span class="o">//</span><span class="mf">2</span></pre>
<pre class='cython code score-0 '>  __pyx_t_11 = 1;
  __pyx_t_12 = 0;
  __pyx_t_13 = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_11, __pyx_pybuffernd_box1.diminfo[0].strides)) + (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_12, __pyx_pybuffernd_box1.diminfo[0].strides))) / 2);
  __pyx_t_14 = 3;
  __pyx_t_15 = 2;
  __pyx_t_16 = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_14, __pyx_pybuffernd_box1.diminfo[0].strides)) + (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_box1.diminfo[0].strides))) / 2);
  __pyx_v_xc1 = __pyx_t_13;
  __pyx_v_yc1 = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">396</span>:     <span class="n">xc2</span><span class="p">,</span> <span class="n">yc2</span> <span class="o">=</span> <span class="p">(</span><span class="n">box2</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">box2</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span><span class="o">//</span><span class="mf">2</span><span class="p">,</span> <span class="p">(</span><span class="n">box2</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">+</span> <span class="n">box2</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span><span class="o">//</span><span class="mf">2</span></pre>
<pre class='cython code score-0 '>  __pyx_t_17 = 1;
  __pyx_t_18 = 0;
  __pyx_t_16 = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_17, __pyx_pybuffernd_box2.diminfo[0].strides)) + (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_18, __pyx_pybuffernd_box2.diminfo[0].strides))) / 2);
  __pyx_t_19 = 3;
  __pyx_t_20 = 2;
  __pyx_t_13 = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_19, __pyx_pybuffernd_box2.diminfo[0].strides)) + (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_20, __pyx_pybuffernd_box2.diminfo[0].strides))) / 2);
  __pyx_v_xc2 = __pyx_t_16;
  __pyx_v_yc2 = __pyx_t_13;
</pre><pre class="cython line score-0">&#xA0;<span class="">397</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">398</span>:     <span class="n">dx</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">dy</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">xc1</span> <span class="o">-</span> <span class="n">xc2</span><span class="p">,</span> <span class="n">yc1</span> <span class="o">-</span> <span class="n">yc2</span>   <span class="c">#xc,yc</span></pre>
<pre class='cython code score-0 '>  __pyx_t_13 = (__pyx_v_xc1 - __pyx_v_xc2);
  __pyx_t_16 = (__pyx_v_yc1 - __pyx_v_yc2);
  __pyx_t_21 = 0;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.buf, __pyx_t_21, __pyx_pybuffernd_dx.diminfo[0].strides) = __pyx_t_13;
  __pyx_t_22 = 0;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.buf, __pyx_t_22, __pyx_pybuffernd_dy.diminfo[0].strides) = __pyx_t_16;
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">399</span>:     <span class="n">distance</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">dx</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">dy</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)))</span>   <span class="c">#xc,yc</span></pre>
<pre class='cython code score-14 '>  __pyx_t_23 = 0;
  __pyx_t_24 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(sqrt((pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.buf, __pyx_t_23, __pyx_pybuffernd_dx.diminfo[0].strides)), 2.) + pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.buf, __pyx_t_24, __pyx_pybuffernd_dy.diminfo[0].strides)), 2.))));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 399, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 399, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_25 = __Pyx_PyInt_As_npy_int32(__pyx_t_2); if (unlikely((__pyx_t_25 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 399, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_26 = 0;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer.buf, __pyx_t_26, __pyx_pybuffernd_distance.diminfo[0].strides) = __pyx_t_25;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">400</span>:     <span class="n">dx</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="n">dy</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">box1</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">box2</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="n">box1</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">box2</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span>   <span class="c">#xmax,ymax</span></pre>
<pre class='cython code score-0 '>  __pyx_t_27 = 1;
  __pyx_t_28 = 1;
  __pyx_t_25 = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_27, __pyx_pybuffernd_box1.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_28, __pyx_pybuffernd_box2.diminfo[0].strides)));
  __pyx_t_29 = 3;
  __pyx_t_30 = 3;
  __pyx_t_31 = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_29, __pyx_pybuffernd_box1.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_30, __pyx_pybuffernd_box2.diminfo[0].strides)));
  __pyx_t_32 = 1;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.buf, __pyx_t_32, __pyx_pybuffernd_dx.diminfo[0].strides) = __pyx_t_25;
  __pyx_t_33 = 1;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.buf, __pyx_t_33, __pyx_pybuffernd_dy.diminfo[0].strides) = __pyx_t_31;
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">401</span>:     <span class="n">distance</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">dx</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">dy</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)))</span>   <span class="c">#xmax,ymax</span></pre>
<pre class='cython code score-14 '>  __pyx_t_34 = 1;
  __pyx_t_35 = 1;
  __pyx_t_2 = <span class='py_c_api'>PyFloat_FromDouble</span>(sqrt((pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.buf, __pyx_t_34, __pyx_pybuffernd_dx.diminfo[0].strides)), 2.) + pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.buf, __pyx_t_35, __pyx_pybuffernd_dy.diminfo[0].strides)), 2.))));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 401, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 401, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_31 = __Pyx_PyInt_As_npy_int32(__pyx_t_1); if (unlikely((__pyx_t_31 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 401, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_36 = 1;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer.buf, __pyx_t_36, __pyx_pybuffernd_distance.diminfo[0].strides) = __pyx_t_31;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">402</span>:     <span class="n">dx</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span> <span class="n">dy</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">box1</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">box2</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="n">box1</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">box2</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span>   <span class="c">#xmax,ymin     </span></pre>
<pre class='cython code score-0 '>  __pyx_t_37 = 1;
  __pyx_t_38 = 1;
  __pyx_t_31 = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_37, __pyx_pybuffernd_box1.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_38, __pyx_pybuffernd_box2.diminfo[0].strides)));
  __pyx_t_39 = 2;
  __pyx_t_40 = 2;
  __pyx_t_25 = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_39, __pyx_pybuffernd_box1.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_40, __pyx_pybuffernd_box2.diminfo[0].strides)));
  __pyx_t_41 = 2;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.buf, __pyx_t_41, __pyx_pybuffernd_dx.diminfo[0].strides) = __pyx_t_31;
  __pyx_t_42 = 2;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.buf, __pyx_t_42, __pyx_pybuffernd_dy.diminfo[0].strides) = __pyx_t_25;
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">403</span>:     <span class="n">distance</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">dx</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">dy</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)))</span>   <span class="c">#xmax,ymin</span></pre>
<pre class='cython code score-14 '>  __pyx_t_43 = 2;
  __pyx_t_44 = 2;
  __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(sqrt((pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.buf, __pyx_t_43, __pyx_pybuffernd_dx.diminfo[0].strides)), 2.) + pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.buf, __pyx_t_44, __pyx_pybuffernd_dy.diminfo[0].strides)), 2.))));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 403, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 403, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_25 = __Pyx_PyInt_As_npy_int32(__pyx_t_2); if (unlikely((__pyx_t_25 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 403, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_45 = 2;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer.buf, __pyx_t_45, __pyx_pybuffernd_distance.diminfo[0].strides) = __pyx_t_25;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">404</span>:     <span class="n">dx</span><span class="p">[</span><span class="mf">3</span><span class="p">],</span> <span class="n">dy</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">box1</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">box2</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">box1</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">box2</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span>   <span class="c">#xmin,ymin </span></pre>
<pre class='cython code score-0 '>  __pyx_t_46 = 0;
  __pyx_t_47 = 0;
  __pyx_t_25 = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_46, __pyx_pybuffernd_box1.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_47, __pyx_pybuffernd_box2.diminfo[0].strides)));
  __pyx_t_48 = 2;
  __pyx_t_49 = 2;
  __pyx_t_31 = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_48, __pyx_pybuffernd_box1.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_49, __pyx_pybuffernd_box2.diminfo[0].strides)));
  __pyx_t_50 = 3;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.buf, __pyx_t_50, __pyx_pybuffernd_dx.diminfo[0].strides) = __pyx_t_25;
  __pyx_t_51 = 3;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.buf, __pyx_t_51, __pyx_pybuffernd_dy.diminfo[0].strides) = __pyx_t_31;
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">405</span>:     <span class="n">distance</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">dx</span><span class="p">[</span><span class="mf">3</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">dy</span><span class="p">[</span><span class="mf">3</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)))</span>   <span class="c">#xmin,ymin</span></pre>
<pre class='cython code score-14 '>  __pyx_t_52 = 3;
  __pyx_t_53 = 3;
  __pyx_t_2 = <span class='py_c_api'>PyFloat_FromDouble</span>(sqrt((pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.buf, __pyx_t_52, __pyx_pybuffernd_dx.diminfo[0].strides)), 2.) + pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.buf, __pyx_t_53, __pyx_pybuffernd_dy.diminfo[0].strides)), 2.))));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 405, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 405, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_31 = __Pyx_PyInt_As_npy_int32(__pyx_t_1); if (unlikely((__pyx_t_31 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 405, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_54 = 3;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer.buf, __pyx_t_54, __pyx_pybuffernd_distance.diminfo[0].strides) = __pyx_t_31;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">406</span>:     <span class="n">dx</span><span class="p">[</span><span class="mf">4</span><span class="p">],</span> <span class="n">dy</span><span class="p">[</span><span class="mf">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">box1</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">box2</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">box1</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">box2</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span>   <span class="c">#xmin,ymax</span></pre>
<pre class='cython code score-0 '>  __pyx_t_55 = 0;
  __pyx_t_56 = 0;
  __pyx_t_31 = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_55, __pyx_pybuffernd_box1.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_56, __pyx_pybuffernd_box2.diminfo[0].strides)));
  __pyx_t_57 = 3;
  __pyx_t_58 = 3;
  __pyx_t_25 = ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box1.rcbuffer-&gt;pybuffer.buf, __pyx_t_57, __pyx_pybuffernd_box1.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box2.rcbuffer-&gt;pybuffer.buf, __pyx_t_58, __pyx_pybuffernd_box2.diminfo[0].strides)));
  __pyx_t_59 = 4;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.buf, __pyx_t_59, __pyx_pybuffernd_dx.diminfo[0].strides) = __pyx_t_31;
  __pyx_t_60 = 4;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.buf, __pyx_t_60, __pyx_pybuffernd_dy.diminfo[0].strides) = __pyx_t_25;
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">407</span>:     <span class="n">distance</span><span class="p">[</span><span class="mf">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">dx</span><span class="p">[</span><span class="mf">4</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">dy</span><span class="p">[</span><span class="mf">4</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)))</span>   <span class="c">#xmin,ymax</span></pre>
<pre class='cython code score-14 '>  __pyx_t_61 = 4;
  __pyx_t_62 = 4;
  __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(sqrt((pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.buf, __pyx_t_61, __pyx_pybuffernd_dx.diminfo[0].strides)), 2.) + pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.buf, __pyx_t_62, __pyx_pybuffernd_dy.diminfo[0].strides)), 2.))));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 407, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 407, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_25 = __Pyx_PyInt_As_npy_int32(__pyx_t_2); if (unlikely((__pyx_t_25 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 407, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_63 = 4;
  *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer.buf, __pyx_t_63, __pyx_pybuffernd_distance.diminfo[0].strides) = __pyx_t_25;
</pre><pre class="cython line score-0">&#xA0;<span class="">408</span>: </pre>
<pre class="cython line score-50" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">409</span>:     <span class="n">point_idex</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span></pre>
<pre class='cython code score-50 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 409, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_argmin);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 409, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_1)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
    }
  }
  if (!__pyx_t_1) {
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, ((PyObject *)__pyx_v_distance));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 409, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_1, ((PyObject *)__pyx_v_distance)};
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 409, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_1, ((PyObject *)__pyx_v_distance)};
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 409, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    } else
    #endif
    {
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 409, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_1); __pyx_t_1 = NULL;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_distance));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_distance));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+1, ((PyObject *)__pyx_v_distance));
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 409, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_2); if (unlikely((__pyx_t_16 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 409, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_point_idex = __pyx_t_16;
</pre><pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">410</span>:     <span class="n">dx_nearest</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dx</span><span class="p">[</span><span class="n">point_idex</span><span class="p">])</span></pre>
<pre class='cython code score-11 '>  __pyx_t_64 = __pyx_v_point_idex;
  __pyx_t_2 = __Pyx_PyInt_From_npy_int32((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dx.rcbuffer-&gt;pybuffer.buf, __pyx_t_64, __pyx_pybuffernd_dx.diminfo[0].strides)));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 410, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyNumber_Absolute</span>(__pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 410, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_3); if (unlikely((__pyx_t_16 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 410, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_dx_nearest = __pyx_t_16;
</pre><pre class="cython line score-11" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">411</span>:     <span class="n">dy_nearest</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dy</span><span class="p">[</span><span class="n">point_idex</span><span class="p">])</span></pre>
<pre class='cython code score-11 '>  __pyx_t_65 = __pyx_v_point_idex;
  __pyx_t_3 = __Pyx_PyInt_From_npy_int32((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dy.rcbuffer-&gt;pybuffer.buf, __pyx_t_65, __pyx_pybuffernd_dy.diminfo[0].strides)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 411, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyNumber_Absolute</span>(__pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 411, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_2); if (unlikely((__pyx_t_16 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 411, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_v_dy_nearest = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">412</span>:     <span class="n">distance_nearest</span> <span class="o">=</span> <span class="n">distance</span><span class="p">[</span><span class="n">point_idex</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>  __pyx_t_66 = __pyx_v_point_idex;
  __pyx_v_distance_nearest = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_distance.rcbuffer-&gt;pybuffer.buf, __pyx_t_66, __pyx_pybuffernd_distance.diminfo[0].strides));
</pre><pre class="cython line score-0">&#xA0;<span class="">413</span>: </pre>
<pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">414</span>:     <span class="k">return</span> <span class="n">point_idex</span><span class="p">,</span> <span class="n">dx_nearest</span><span class="p">,</span> <span class="n">dy_nearest</span><span class="p">,</span> <span class="n">distance_nearest</span></pre>
<pre class='cython code score-18 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_point_idex);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 414, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_dx_nearest);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 414, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_dy_nearest);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 414, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_distance_nearest);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 414, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(4);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 414, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 1, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 2, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 3, __pyx_t_1);
  __pyx_t_2 = 0;
  __pyx_t_3 = 0;
  __pyx_t_4 = 0;
  __pyx_t_1 = 0;
  __pyx_r = __pyx_t_6;
  __pyx_t_6 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">415</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">416</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">417</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">418</span>: <span class="c">#Edited by HOUXUEYUAN at 20210630</span></pre>
<pre class="cython line score-51" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">419</span>: <span class="k">def</span> <span class="nf">get_fusioned_target</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">lidar_data</span><span class="p">):</span></pre>
<pre class='cython code score-51 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_23get_fusioned_target(PyObject *__pyx_self, PyObject *__pyx_v_lidar_data); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_23get_fusioned_target = {"get_fusioned_target", (PyCFunction)__pyx_pw_10Lidar_core_23get_fusioned_target, METH_O, 0};
static PyObject *__pyx_pw_10Lidar_core_23get_fusioned_target(PyObject *__pyx_self, PyObject *__pyx_v_lidar_data) {
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("get_fusioned_target (wrapper)", 0);
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_lidar_data), __pyx_ptype_5numpy_ndarray, 1, "lidar_data", 0))) <span class='error_goto'>__PYX_ERR(0, 419, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_22get_fusioned_target(__pyx_self, ((PyArrayObject *)__pyx_v_lidar_data));

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_22get_fusioned_target(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_lidar_data) {
  long __pyx_v_Kd_fusion;
  PyArrayObject *__pyx_v_selected = 0;
  PyArrayObject *__pyx_v_dr = 0;
  PyArrayObject *__pyx_v_target = 0;
  npy_intp __pyx_v_i;
  PyObject *__pyx_v_l2_distance = NULL;
  PyObject *__pyx_v_overlap_ratio = NULL;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_dr;
  __Pyx_Buffer __pyx_pybuffer_dr;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_lidar_data;
  __Pyx_Buffer __pyx_pybuffer_lidar_data;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_selected;
  __Pyx_Buffer __pyx_pybuffer_selected;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target;
  __Pyx_Buffer __pyx_pybuffer_target;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("get_fusioned_target", 0);
  __pyx_pybuffer_selected.pybuffer.buf = NULL;
  __pyx_pybuffer_selected.refcount = 0;
  __pyx_pybuffernd_selected.data = NULL;
  __pyx_pybuffernd_selected.rcbuffer = &amp;__pyx_pybuffer_selected;
  __pyx_pybuffer_dr.pybuffer.buf = NULL;
  __pyx_pybuffer_dr.refcount = 0;
  __pyx_pybuffernd_dr.data = NULL;
  __pyx_pybuffernd_dr.rcbuffer = &amp;__pyx_pybuffer_dr;
  __pyx_pybuffer_target.pybuffer.buf = NULL;
  __pyx_pybuffer_target.refcount = 0;
  __pyx_pybuffernd_target.data = NULL;
  __pyx_pybuffernd_target.rcbuffer = &amp;__pyx_pybuffer_target;
  __pyx_pybuffer_lidar_data.pybuffer.buf = NULL;
  __pyx_pybuffer_lidar_data.refcount = 0;
  __pyx_pybuffernd_lidar_data.data = NULL;
  __pyx_pybuffernd_lidar_data.rcbuffer = &amp;__pyx_pybuffer_lidar_data;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_data, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 419, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_lidar_data.diminfo[0].strides = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_data.diminfo[0].shape = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_data.diminfo[1].strides = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_data.diminfo[1].shape = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.shape[1];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_26);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_dr.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.get_fusioned_target", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_dr.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_selected);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_dr);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_target);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_l2_distance);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_overlap_ratio);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__140 = <span class='py_c_api'>PyTuple_Pack</span>(8, __pyx_n_s_lidar_data, __pyx_n_s_Kd_fusion, __pyx_n_s_selected, __pyx_n_s_dr, __pyx_n_s_target, __pyx_n_s_i, __pyx_n_s_l2_distance, __pyx_n_s_overlap_ratio);<span class='error_goto'> if (unlikely(!__pyx_tuple__140)) __PYX_ERR(0, 419, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__140);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__140);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_23get_fusioned_target, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 419, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_get_fusioned_target, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 419, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__141 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(1, 0, 8, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__140, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_get_fusioned_target, 419, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__141)) __PYX_ERR(0, 419, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">420</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">Kd_fusion</span> <span class="o">=</span> <span class="mf">80</span></pre>
<pre class='cython code score-0 '>  __pyx_v_Kd_fusion = 80;
</pre><pre class="cython line score-0">&#xA0;<span class="">421</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">selected</span><span class="p">,</span> <span class="n">dr</span><span class="p">,</span> <span class="n">target</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">422</span>: </pre>
<pre class="cython line score-71" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">423</span>:     <span class="n">dr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-71 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 423, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 423, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 423, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 423, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 423, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_2, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 423, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_2, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 423, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 423, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_4) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_2);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_5);
    __pyx_t_2 = 0;
    __pyx_t_5 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 423, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 423, __pyx_L1_error)</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_dr.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_dr.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_dr.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_dr, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
      }
      __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
    }
    __pyx_pybuffernd_dr.diminfo[0].strides = __pyx_pybuffernd_dr.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_dr.diminfo[0].shape = __pyx_pybuffernd_dr.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 423, __pyx_L1_error)</span>
  }
  __pyx_t_8 = 0;
  __pyx_v_dr = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-71" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">424</span>:     <span class="n">target</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span> <span class="c"># lidar_data.shape[1] = 9</span></pre>
<pre class='cython code score-71 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 424, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 424, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[1]));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 424, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 424, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 424, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_3, __pyx_t_2};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 424, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_3, __pyx_t_2};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 424, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  {
    __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 424, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (__pyx_t_5) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+__pyx_t_6, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1+__pyx_t_6, __pyx_t_2);
    __pyx_t_3 = 0;
    __pyx_t_2 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 424, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 424, __pyx_L1_error)</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
      }
      __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
    }
    __pyx_pybuffernd_target.diminfo[0].strides = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target.diminfo[0].shape = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 424, __pyx_L1_error)</span>
  }
  __pyx_t_8 = 0;
  __pyx_v_target = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">425</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">426</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_12 = (__pyx_v_lidar_data-&gt;dimensions[0]);
  __pyx_t_13 = __pyx_t_12;
  for (__pyx_t_14 = 0; __pyx_t_14 &lt; __pyx_t_13; __pyx_t_14+=1) {
    __pyx_v_i = __pyx_t_14;
</pre><pre class="cython line score-0">&#xA0;<span class="">427</span>:         <span class="c">#每一行与第一行的2范数距离</span></pre>
<pre class="cython line score-9" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">428</span>:         <span class="n">l2_distance</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">lidar_data</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span><span class="o">-</span><span class="n">lidar_data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">0</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">lidar_data</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span><span class="o">-</span><span class="n">lidar_data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">1</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)))</span></pre>
<pre class='cython code score-9 '>    __pyx_t_15 = 0;
    __pyx_t_16 = 0;
    __pyx_t_17 = __pyx_v_i;
    __pyx_t_18 = 0;
    __pyx_t_19 = 0;
    __pyx_t_20 = 1;
    __pyx_t_21 = __pyx_v_i;
    __pyx_t_22 = 1;
    __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(sqrt((pow(((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_lidar_data.diminfo[0].strides, __pyx_t_16, __pyx_pybuffernd_lidar_data.diminfo[1].strides)) - (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.buf, __pyx_t_17, __pyx_pybuffernd_lidar_data.diminfo[0].strides, __pyx_t_18, __pyx_pybuffernd_lidar_data.diminfo[1].strides))), 2.) + pow(((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.buf, __pyx_t_19, __pyx_pybuffernd_lidar_data.diminfo[0].strides, __pyx_t_20, __pyx_pybuffernd_lidar_data.diminfo[1].strides)) - (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.buf, __pyx_t_21, __pyx_pybuffernd_lidar_data.diminfo[0].strides, __pyx_t_22, __pyx_pybuffernd_lidar_data.diminfo[1].strides))), 2.))));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 428, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 428, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_l2_distance, ((PyObject*)__pyx_t_7));
    __pyx_t_7 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">429</span>:         <span class="c">#第一行相对于每一行的覆盖比例</span></pre>
<pre class="cython line score-72" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">430</span>:         <span class="n">overlap_ratio</span> <span class="o">=</span> <span class="n">cal_overlap_ratio</span><span class="p">(</span><span class="n">lidar_data</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">2</span><span class="p">:</span><span class="mf">6</span><span class="p">],</span> <span class="n">lidar_data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mf">2</span><span class="p">:</span><span class="mf">6</span><span class="p">])</span></pre>
<pre class='cython code score-72 '>    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_cal_overlap_ratio);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/* … */
  __pyx_slice__9 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_6, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__9)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__9);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__9);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_data), __pyx_tuple__10);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_tuple__10 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_0, __pyx_slice__9);<span class='error_goto'> if (unlikely(!__pyx_tuple__10)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__10);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__10);
    __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__11);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__11);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_slice__11);
    __pyx_t_2 = 0;
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_data), __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = NULL;
    __pyx_t_6 = 0;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
      __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
      if (likely(__pyx_t_3)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
        __pyx_t_6 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_1)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_4, __pyx_t_2};
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_1)) {
      PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_4, __pyx_t_2};
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    {
      __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      if (__pyx_t_3) {
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_3); __pyx_t_3 = NULL;
      }
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+__pyx_t_6, __pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1+__pyx_t_6, __pyx_t_2);
      __pyx_t_4 = 0;
      __pyx_t_2 = 0;
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_overlap_ratio, __pyx_t_7);
    __pyx_t_7 = 0;
  __pyx_slice__11 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_6, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__11)) __PYX_ERR(0, 430, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__11);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__11);
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">431</span>:         <span class="k">if</span> <span class="p">(</span><span class="n">overlap_ratio</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">l2_distance</span> <span class="o">&lt;</span> <span class="n">Kd_fusion</span><span class="p">):</span></pre>
<pre class='cython code score-19 '>    __pyx_t_7 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_overlap_ratio, __pyx_float_0_5, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 431, __pyx_L1_error)</span>
    __pyx_t_24 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_7); if (unlikely(__pyx_t_24 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 431, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    if (!__pyx_t_24) {
    } else {
      __pyx_t_23 = __pyx_t_24;
      goto __pyx_L6_bool_binop_done;
    }
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_Kd_fusion);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 431, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_l2_distance, __pyx_t_7, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 431, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_24 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_24 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 431, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_23 = __pyx_t_24;
    __pyx_L6_bool_binop_done:;
    if (__pyx_t_23) {
/* … */
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">432</span>:             <span class="n">dr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mf">100</span></pre>
<pre class='cython code score-0 '>      __pyx_t_25 = __pyx_v_i;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_dr.rcbuffer-&gt;pybuffer.buf, __pyx_t_25, __pyx_pybuffernd_dr.diminfo[0].strides) = 0x64;
</pre><pre class="cython line score-117" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">433</span>:         <span class="n">selected</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">dr</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">)[</span><span class="mf">0</span><span class="p">])</span> <span class="c">#距离值小于Kd_fusion或者overlap大于0.5的索引</span></pre>
<pre class='cython code score-117 '>    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_where);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = <span class='py_c_api'>PyObject_RichCompare</span>(((PyObject *)__pyx_v_dr), __pyx_int_0, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
    __pyx_t_3 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
      __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
      if (likely(__pyx_t_3)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
      }
    }
    if (!__pyx_t_3) {
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    } else {
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_2};
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_4)) {
        PyObject *__pyx_temp[2] = {__pyx_t_3, __pyx_t_2};
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      } else
      #endif
      {
        __pyx_t_26 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_26)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_26);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_26, 0, __pyx_t_3); __pyx_t_3 = NULL;
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_26, 0+1, __pyx_t_2);
        __pyx_t_2 = 0;
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_26, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_26); __pyx_t_26 = 0;
      }
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_7, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_5))) {
      __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_5);
      if (likely(__pyx_t_7)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_5, function);
      }
    }
    if (!__pyx_t_7) {
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_5, __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_5)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_4};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_5)) {
        PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_4};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_26 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_26)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_26);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_26, 0, __pyx_t_7); __pyx_t_7 = NULL;
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_26, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_t_26, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 433, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_26); __pyx_t_26 = 0;
      }
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 433, __pyx_L1_error)</span>
    __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
    {
      __Pyx_BufFmt_StackElem __pyx_stack[1];
      <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
      if (unlikely(__pyx_t_6 &lt; 0)) {
        <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
        if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_selected, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
          Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
          <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
        } else {
          <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
        }
        __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
      }
      __pyx_pybuffernd_selected.diminfo[0].strides = __pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_selected.diminfo[0].shape = __pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer.shape[0];
      if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 433, __pyx_L1_error)</span>
    }
    __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_selected, ((PyArrayObject *)__pyx_t_1));
    __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">434</span>:         <span class="k">if</span> <span class="n">selected</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">==</span> <span class="mf">1</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_23 = (((__pyx_v_selected-&gt;dimensions[0]) == 1) != 0);
    if (__pyx_t_23) {
/* … */
      goto __pyx_L8;
    }
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">435</span>:             <span class="n">target</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">lidar_data</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="p">:]</span></pre>
<pre class='cython code score-23 '>  __pyx_slice__12 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__12)) __PYX_ERR(0, 435, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__12);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__12);
/* … */
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_data), __pyx_tuple__13);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 435, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_tuple__13 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_0, __pyx_slice__12);<span class='error_goto'> if (unlikely(!__pyx_tuple__13)) __PYX_ERR(0, 435, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__13);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__13);
      if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_target), __pyx_slice__14, __pyx_t_1) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 435, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_slice__14 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__14)) __PYX_ERR(0, 435, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__14);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__14);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">436</span>:         <span class="k">elif</span>  <span class="n">selected</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_23 = (((__pyx_v_selected-&gt;dimensions[0]) &gt; 1) != 0);
    if (__pyx_t_23) {
/* … */
      goto __pyx_L8;
    }
</pre><pre class="cython line score-64" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">437</span>:             <span class="n">target</span> <span class="o">=</span> <span class="n">target_fusion</span><span class="p">(</span><span class="n">lidar_data</span><span class="p">[</span><span class="n">selected</span><span class="p">])</span>    <span class="c">#把符合条件的目标合为一体</span></pre>
<pre class='cython code score-64 '>      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_target_fusion);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 437, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      __pyx_t_26 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_data), ((PyObject *)__pyx_v_selected));<span class='error_goto'> if (unlikely(!__pyx_t_26)) __PYX_ERR(0, 437, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_26);
      __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_5))) {
        __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_5);
        if (likely(__pyx_t_4)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_5);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_5, function);
        }
      }
      if (!__pyx_t_4) {
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_5, __pyx_t_26);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 437, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_26); __pyx_t_26 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      } else {
        #if CYTHON_FAST_PYCALL
        if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_5)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_26};
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 437, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_26); __pyx_t_26 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_5)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_26};
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 437, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_26); __pyx_t_26 = 0;
        } else
        #endif
        {
          __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 437, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_4); __pyx_t_4 = NULL;
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_26);
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+1, __pyx_t_26);
          __pyx_t_26 = 0;
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 437, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        }
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 437, __pyx_L1_error)</span>
      __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
      {
        __Pyx_BufFmt_StackElem __pyx_stack[1];
        <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
        __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
        if (unlikely(__pyx_t_6 &lt; 0)) {
          <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
          if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
            Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
            <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
          } else {
            <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
          }
          __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
        }
        __pyx_pybuffernd_target.diminfo[0].strides = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target.diminfo[0].shape = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.shape[0];
        if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 437, __pyx_L1_error)</span>
      }
      __pyx_t_8 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_target, ((PyArrayObject *)__pyx_t_1));
      __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">438</span>:         <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">439</span>:             <span class="k">print</span><span class="p">(</span><span class="s">&quot;selected is wrong&quot;</span><span class="p">)</span></pre>
<pre class='cython code score-2 '>    /*else*/ {
      if (<span class='pyx_c_api'>__Pyx_PrintOne</span>(0, __pyx_kp_s_selected_is_wrong) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 439, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">440</span>:             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>      goto __pyx_L3_continue;
    }
    __pyx_L8:;
    __pyx_L3_continue:;
  }
</pre><pre class="cython line score-10" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">441</span>:     <span class="k">return</span> <span class="n">target</span><span class="p">,</span> <span class="n">selected</span></pre>
<pre class='cython code score-10 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 441, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_target));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_target));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((PyObject *)__pyx_v_target));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_selected));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_selected));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, ((PyObject *)__pyx_v_selected));
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">442</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">443</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">444</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">445</span>: <span class="c">#功能：设定跟踪门，匹配当前帧目标和历史目标</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">446</span>: <span class="c">#输入：</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">447</span>: <span class="c">#    lidar_data:排序后的lidar_data,即当前帧grid_cluster后的所有target</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">448</span>: <span class="c">#    lidar_predict:历史信息（last_lidar_state）中，所有目标的预测位置</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">449</span>: <span class="c">#输出：</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">450</span>: <span class="c">#    target_3Dlist：历史目标和当前目标的对应关系（目标对应关系）</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">451</span>: <span class="c">#    target_3Dlist_num:历史目标和当前目标的对应关系（目标的对应数量关系）</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">452</span>: <span class="c">#    new_targets:新目标</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">453</span>: <span class="c">#Edited by HOUXUEYUAN at 20210630</span></pre>
<pre class="cython line score-106" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">454</span>: <span class="k">def</span> <span class="nf">track_process</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">lidar_data</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">lidar_predict</span><span class="p">):</span></pre>
<pre class='cython code score-106 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_25track_process(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_25track_process = {"track_process", (PyCFunction)__pyx_pw_10Lidar_core_25track_process, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_25track_process(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_lidar_data = 0;
  PyArrayObject *__pyx_v_lidar_predict = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("track_process (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_lidar_data,&amp;__pyx_n_s_lidar_predict,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_lidar_data)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_lidar_predict)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("track_process", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(0, 454, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "track_process") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 454, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_lidar_data = ((PyArrayObject *)values[0]);
    __pyx_v_lidar_predict = ((PyArrayObject *)values[1]);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("track_process", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 454, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.track_process", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_lidar_data), __pyx_ptype_5numpy_ndarray, 1, "lidar_data", 0))) <span class='error_goto'>__PYX_ERR(0, 454, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_lidar_predict), __pyx_ptype_5numpy_ndarray, 1, "lidar_predict", 0))) <span class='error_goto'>__PYX_ERR(0, 454, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_24track_process(__pyx_self, __pyx_v_lidar_data, __pyx_v_lidar_predict);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_24track_process(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_lidar_data, PyArrayObject *__pyx_v_lidar_predict) {
  CYTHON_UNUSED double __pyx_v_aspect_ratio;
  long __pyx_v_i;
  long __pyx_v_j;
  long __pyx_v_k;
  long __pyx_v_dx_nearest;
  long __pyx_v_dy_nearest;
  long __pyx_v_dx_thresh;
  long __pyx_v_dy_thresh;
  long __pyx_v_distance_thresh;
  long __pyx_v_distance_nearest;
  CYTHON_UNUSED long __pyx_v_lidar_predict_area;
  PyArrayObject *__pyx_v_selected = 0;
  PyArrayObject *__pyx_v_target = 0;
  PyArrayObject *__pyx_v_trace_d = 0;
  PyArrayObject *__pyx_v_target_3Dlist_num = 0;
  PyArrayObject *__pyx_v_distance_list = 0;
  PyArrayObject *__pyx_v_new_targets = 0;
  PyArrayObject *__pyx_v_target_3Dlist = 0;
  PyObject *__pyx_v_overlap_index = NULL;
  CYTHON_UNUSED PyObject *__pyx_v_point_idex = NULL;
  PyObject *__pyx_v_idex = NULL;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_distance_list;
  __Pyx_Buffer __pyx_pybuffer_distance_list;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_lidar_data;
  __Pyx_Buffer __pyx_pybuffer_lidar_data;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_lidar_predict;
  __Pyx_Buffer __pyx_pybuffer_lidar_predict;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_new_targets;
  __Pyx_Buffer __pyx_pybuffer_new_targets;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_selected;
  __Pyx_Buffer __pyx_pybuffer_selected;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target;
  __Pyx_Buffer __pyx_pybuffer_target;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target_3Dlist;
  __Pyx_Buffer __pyx_pybuffer_target_3Dlist;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target_3Dlist_num;
  __Pyx_Buffer __pyx_pybuffer_target_3Dlist_num;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_trace_d;
  __Pyx_Buffer __pyx_pybuffer_trace_d;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("track_process", 0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_lidar_data);
  __pyx_pybuffer_selected.pybuffer.buf = NULL;
  __pyx_pybuffer_selected.refcount = 0;
  __pyx_pybuffernd_selected.data = NULL;
  __pyx_pybuffernd_selected.rcbuffer = &amp;__pyx_pybuffer_selected;
  __pyx_pybuffer_target.pybuffer.buf = NULL;
  __pyx_pybuffer_target.refcount = 0;
  __pyx_pybuffernd_target.data = NULL;
  __pyx_pybuffernd_target.rcbuffer = &amp;__pyx_pybuffer_target;
  __pyx_pybuffer_trace_d.pybuffer.buf = NULL;
  __pyx_pybuffer_trace_d.refcount = 0;
  __pyx_pybuffernd_trace_d.data = NULL;
  __pyx_pybuffernd_trace_d.rcbuffer = &amp;__pyx_pybuffer_trace_d;
  __pyx_pybuffer_target_3Dlist_num.pybuffer.buf = NULL;
  __pyx_pybuffer_target_3Dlist_num.refcount = 0;
  __pyx_pybuffernd_target_3Dlist_num.data = NULL;
  __pyx_pybuffernd_target_3Dlist_num.rcbuffer = &amp;__pyx_pybuffer_target_3Dlist_num;
  __pyx_pybuffer_distance_list.pybuffer.buf = NULL;
  __pyx_pybuffer_distance_list.refcount = 0;
  __pyx_pybuffernd_distance_list.data = NULL;
  __pyx_pybuffernd_distance_list.rcbuffer = &amp;__pyx_pybuffer_distance_list;
  __pyx_pybuffer_new_targets.pybuffer.buf = NULL;
  __pyx_pybuffer_new_targets.refcount = 0;
  __pyx_pybuffernd_new_targets.data = NULL;
  __pyx_pybuffernd_new_targets.rcbuffer = &amp;__pyx_pybuffer_new_targets;
  __pyx_pybuffer_target_3Dlist.pybuffer.buf = NULL;
  __pyx_pybuffer_target_3Dlist.refcount = 0;
  __pyx_pybuffernd_target_3Dlist.data = NULL;
  __pyx_pybuffernd_target_3Dlist.rcbuffer = &amp;__pyx_pybuffer_target_3Dlist;
  __pyx_pybuffer_lidar_data.pybuffer.buf = NULL;
  __pyx_pybuffer_lidar_data.refcount = 0;
  __pyx_pybuffernd_lidar_data.data = NULL;
  __pyx_pybuffernd_lidar_data.rcbuffer = &amp;__pyx_pybuffer_lidar_data;
  __pyx_pybuffer_lidar_predict.pybuffer.buf = NULL;
  __pyx_pybuffer_lidar_predict.refcount = 0;
  __pyx_pybuffernd_lidar_predict.data = NULL;
  __pyx_pybuffernd_lidar_predict.rcbuffer = &amp;__pyx_pybuffer_lidar_predict;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_data, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 454, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_lidar_data.diminfo[0].strides = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_data.diminfo[0].shape = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_data.diminfo[1].strides = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_data.diminfo[1].shape = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_predict, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 454, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_lidar_predict.diminfo[0].strides = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_predict.diminfo[0].shape = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_predict.diminfo[1].strides = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_predict.diminfo[1].shape = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.shape[1];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_34);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_new_targets.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_trace_d.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.track_process", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_new_targets.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_trace_d.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_selected);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_target);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_trace_d);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_target_3Dlist_num);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_distance_list);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_new_targets);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_target_3Dlist);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_overlap_index);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_point_idex);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_idex);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_lidar_data);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__142 = <span class='py_c_api'>PyTuple_Pack</span>(23, __pyx_n_s_lidar_data, __pyx_n_s_lidar_predict, __pyx_n_s_aspect_ratio, __pyx_n_s_i, __pyx_n_s_j, __pyx_n_s_k, __pyx_n_s_dx_nearest, __pyx_n_s_dy_nearest, __pyx_n_s_dx_thresh, __pyx_n_s_dy_thresh, __pyx_n_s_distance_thresh, __pyx_n_s_distance_nearest, __pyx_n_s_lidar_predict_area, __pyx_n_s_selected, __pyx_n_s_target, __pyx_n_s_trace_d, __pyx_n_s_target_3Dlist_num, __pyx_n_s_distance_list, __pyx_n_s_new_targets, __pyx_n_s_target_3Dlist, __pyx_n_s_overlap_index, __pyx_n_s_point_idex, __pyx_n_s_idex);<span class='error_goto'> if (unlikely(!__pyx_tuple__142)) __PYX_ERR(0, 454, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__142);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__142);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_25track_process, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 454, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_track_process, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 454, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__143 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(2, 0, 23, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__142, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_track_process, 454, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__143)) __PYX_ERR(0, 454, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">455</span>:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">aspect_ratio</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_aspect_ratio = 0.0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">456</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">j</span><span class="p">,</span> <span class="nf">k</span><span class="p">,</span> <span class="nf">dx_nearest</span><span class="p">,</span> <span class="nf">dy_nearest</span><span class="p">,</span> <span class="nf">dx_thresh</span><span class="p">,</span> <span class="nf">dy_thresh</span><span class="p">,</span> <span class="nf">distance_thresh</span><span class="p">,</span> <span class="nf">distance_nearest</span><span class="p">,</span> <span class="nf">lidar_predict_area</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_lidar_predict_area = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">457</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">selected</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">trace_d</span><span class="p">,</span> <span class="n">target_3Dlist_num</span><span class="p">,</span> <span class="n">distance_list</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">458</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">new_targets</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">459</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">3</span><span class="p">]</span> <span class="n">target_3Dlist</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">460</span>: </pre>
<pre class="cython line score-71" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">461</span>:     <span class="n">target</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span> <span class="c"># lidar_data.shape[1] = 9</span></pre>
<pre class='cython code score-71 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 461, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 461, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[1]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 461, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 461, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 461, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_2, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 461, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_2, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 461, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 461, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_4) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_2);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_5);
    __pyx_t_2 = 0;
    __pyx_t_5 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 461, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 461, __pyx_L1_error)</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
      }
      __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
    }
    __pyx_pybuffernd_target.diminfo[0].strides = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target.diminfo[0].shape = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 461, __pyx_L1_error)</span>
  }
  __pyx_t_8 = 0;
  __pyx_v_target = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-80" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">462</span>:     <span class="n">new_targets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-80 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 462, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 462, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 462, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[1]));<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 462, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 462, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, __pyx_t_5);
  __pyx_t_3 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 462, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 462, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_2, __pyx_t_3};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 462, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_2, __pyx_t_3};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 462, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  {
    __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 462, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (__pyx_t_5) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+__pyx_t_6, __pyx_t_2);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1+__pyx_t_6, __pyx_t_3);
    __pyx_t_2 = 0;
    __pyx_t_3 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 462, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 462, __pyx_L1_error)</span>
  __pyx_t_12 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_new_targets.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_new_targets.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_12, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_new_targets.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_new_targets, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
      }
      __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
    }
    __pyx_pybuffernd_new_targets.diminfo[0].strides = __pyx_pybuffernd_new_targets.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_new_targets.diminfo[0].shape = __pyx_pybuffernd_new_targets.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_new_targets.diminfo[1].strides = __pyx_pybuffernd_new_targets.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_new_targets.diminfo[1].shape = __pyx_pybuffernd_new_targets.rcbuffer-&gt;pybuffer.shape[1];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 462, __pyx_L1_error)</span>
  }
  __pyx_t_12 = 0;
  __pyx_v_new_targets = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-83" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">463</span>:     <span class="n">target_3Dlist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">lidar_predict</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-83 '>  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_predict-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[1]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_7);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 2, __pyx_t_2);
  __pyx_t_7 = 0;
  __pyx_t_3 = 0;
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_5, __pyx_t_3};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_5, __pyx_t_3};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_2) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_5);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_3);
    __pyx_t_5 = 0;
    __pyx_t_3 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 463, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 463, __pyx_L1_error)</span>
  __pyx_t_13 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_13, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 3, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target_3Dlist, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 3, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
      }
      __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
    }
    __pyx_pybuffernd_target_3Dlist.diminfo[0].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target_3Dlist.diminfo[0].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_target_3Dlist.diminfo[1].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_target_3Dlist.diminfo[1].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[1]; __pyx_pybuffernd_target_3Dlist.diminfo[2].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[2]; __pyx_pybuffernd_target_3Dlist.diminfo[2].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[2];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 463, __pyx_L1_error)</span>
  }
  __pyx_t_13 = 0;
  __pyx_v_target_3Dlist = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-71" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">464</span>:     <span class="n">target_3Dlist_num</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lidar_predict</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-71 '>  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 464, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 464, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_predict-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 464, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 464, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 464, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_4, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 464, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_4, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 464, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 464, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (__pyx_t_3) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_6, __pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_6, __pyx_t_5);
    __pyx_t_4 = 0;
    __pyx_t_5 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 464, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 464, __pyx_L1_error)</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target_3Dlist_num, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
      }
      __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
    }
    __pyx_pybuffernd_target_3Dlist_num.diminfo[0].strides = __pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target_3Dlist_num.diminfo[0].shape = __pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 464, __pyx_L1_error)</span>
  }
  __pyx_t_8 = 0;
  __pyx_v_target_3Dlist_num = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">465</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">466</span>:     <span class="c">#print(&quot;new_targets.shape[0], new_targets.shape[1]:&quot;, new_targets.shape[0], new_targets.shape[1])   </span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">467</span>:     <span class="n">j</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_j = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">468</span>:     <span class="k">while</span> <span class="p">(</span><span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  while (1) {
    __pyx_t_14 = (((__pyx_v_lidar_data-&gt;dimensions[0]) &gt; 0) != 0);
    if (!__pyx_t_14) break;
</pre><pre class="cython line score-125" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">469</span>:         <span class="n">target</span><span class="p">,</span> <span class="n">selected</span> <span class="o">=</span> <span class="n">get_fusioned_target</span><span class="p">(</span><span class="n">lidar_data</span><span class="p">)</span></pre>
<pre class='cython code score-125 '>    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_get_fusioned_target);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 469, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    __pyx_t_2 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
      __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
      if (likely(__pyx_t_2)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
      }
    }
    if (!__pyx_t_2) {
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_7, ((PyObject *)__pyx_v_lidar_data));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 469, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    } else {
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
        PyObject *__pyx_temp[2] = {__pyx_t_2, ((PyObject *)__pyx_v_lidar_data)};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 469, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
        PyObject *__pyx_temp[2] = {__pyx_t_2, ((PyObject *)__pyx_v_lidar_data)};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 469, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      } else
      #endif
      {
        __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 469, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_lidar_data));
        <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_lidar_data));
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+1, ((PyObject *)__pyx_v_lidar_data));
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 469, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      }
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_1))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_1))) {
      PyObject* sequence = __pyx_t_1;
      Py_ssize_t size = <span class='pyx_c_api'>__Pyx_PySequence_SIZE</span>(sequence);
      if (unlikely(size != 2)) {
        if (size &gt; 2) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(2);
        else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
        <span class='error_goto'>__PYX_ERR(0, 469, __pyx_L1_error)</span>
      }
      #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
      if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
        __pyx_t_7 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
        __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
      } else {
        __pyx_t_7 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
        __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
      }
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      #else
      __pyx_t_7 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 469, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_5 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 469, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      #endif
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    } else {
      Py_ssize_t index = -1;
      __pyx_t_2 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 469, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_15 = Py_TYPE(__pyx_t_2)-&gt;tp_iternext;
      index = 0; __pyx_t_7 = __pyx_t_15(__pyx_t_2); if (unlikely(!__pyx_t_7)) goto __pyx_L5_unpacking_failed;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      index = 1; __pyx_t_5 = __pyx_t_15(__pyx_t_2); if (unlikely(!__pyx_t_5)) goto __pyx_L5_unpacking_failed;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_15(__pyx_t_2), 2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 469, __pyx_L1_error)</span>
      __pyx_t_15 = NULL;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      goto __pyx_L6_unpacking_done;
      __pyx_L5_unpacking_failed:;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_15 = NULL;
      if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
      <span class='error_goto'>__PYX_ERR(0, 469, __pyx_L1_error)</span>
      __pyx_L6_unpacking_done:;
    }
    if (!(likely(((__pyx_t_7) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_7, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 469, __pyx_L1_error)</span>
    if (!(likely(((__pyx_t_5) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_5, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 469, __pyx_L1_error)</span>
    __pyx_t_8 = ((PyArrayObject *)__pyx_t_7);
    {
      __Pyx_BufFmt_StackElem __pyx_stack[1];
      <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
      if (unlikely(__pyx_t_6 &lt; 0)) {
        <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
        if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
          Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
          <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
        } else {
          <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
        }
        __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
      }
      __pyx_pybuffernd_target.diminfo[0].strides = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target.diminfo[0].shape = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.shape[0];
      if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 469, __pyx_L1_error)</span>
    }
    __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_target, ((PyArrayObject *)__pyx_t_7));
    __pyx_t_7 = 0;
    __pyx_t_8 = ((PyArrayObject *)__pyx_t_5);
    {
      __Pyx_BufFmt_StackElem __pyx_stack[1];
      <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
      if (unlikely(__pyx_t_6 &lt; 0)) {
        <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
        if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_selected, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
          Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
          <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
        } else {
          <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
        }
        __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
      }
      __pyx_pybuffernd_selected.diminfo[0].strides = __pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_selected.diminfo[0].shape = __pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer.shape[0];
      if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 469, __pyx_L1_error)</span>
    }
    __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_selected, ((PyArrayObject *)__pyx_t_5));
    __pyx_t_5 = 0;
</pre><pre class="cython line score-47" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">470</span>:         <span class="n">lidar_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">lidar_data</span><span class="p">,</span> <span class="n">selected</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mf">0</span><span class="p">)</span>  <span class="c"># 从lidar_data中移除已经选中的</span></pre>
<pre class='cython code score-47 '>    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 470, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_delete);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 470, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 470, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_lidar_data));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_lidar_data));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((PyObject *)__pyx_v_lidar_data));
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_selected));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_selected));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, ((PyObject *)__pyx_v_selected));
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 470, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_7, __pyx_n_s_axis, __pyx_int_0) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 470, __pyx_L1_error)</span>
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_t_1, __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 470, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 470, __pyx_L1_error)</span>
    __pyx_t_16 = ((PyArrayObject *)__pyx_t_2);
    {
      __Pyx_BufFmt_StackElem __pyx_stack[1];
      <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer);
      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_16, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack);
      if (unlikely(__pyx_t_6 &lt; 0)) {
        <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
        if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_data, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) {
          Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
          <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
        } else {
          <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
        }
        __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
      }
      __pyx_pybuffernd_lidar_data.diminfo[0].strides = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_data.diminfo[0].shape = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_data.diminfo[1].strides = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_data.diminfo[1].shape = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.shape[1];
      if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 470, __pyx_L1_error)</span>
    }
    __pyx_t_16 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_lidar_data, ((PyArrayObject *)__pyx_t_2));
    __pyx_t_2 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">471</span>:         <span class="k">if</span> <span class="n">target</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_14 = (((PyObject *)__pyx_v_target) == Py_None);
    __pyx_t_17 = (__pyx_t_14 != 0);
    if (__pyx_t_17) {
/* … */
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">472</span>:             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>      goto __pyx_L3_continue;
</pre><pre class="cython line score-0">&#xA0;<span class="">473</span>:         <span class="c"># target: xc, yc, xmin, xmax, ymin, ymax, zmin, zmax, I</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">474</span>:         <span class="c">#lidar_predict: class(0), xc(1), yc(2), vx(3), vy(4), xmin(5), xmax(6), ymin(7), ymax(8)</span></pre>
<pre class="cython line score-66" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">475</span>:         <span class="n">overlap_index</span> <span class="o">=</span> <span class="n">is_overlap</span><span class="p">(</span><span class="n">target</span><span class="p">[</span><span class="mf">2</span><span class="p">:</span><span class="mf">6</span><span class="p">],</span> <span class="n">lidar_predict</span><span class="p">[:,</span><span class="mf">5</span><span class="p">:])</span> <span class="c"># 查看该目标是否与上一帧预测的目标有足够的交集</span></pre>
<pre class='cython code score-66 '>    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_is_overlap);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 475, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_target), __pyx_slice__15);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 475, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/* … */
  __pyx_slice__15 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_6, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__15)) __PYX_ERR(0, 475, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__15);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__15);
  __pyx_slice__16 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__16)) __PYX_ERR(0, 475, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__16);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__16);
  __pyx_slice__17 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_5, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__17)) __PYX_ERR(0, 475, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__17);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__17);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_predict), __pyx_tuple__18);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 475, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_4 = NULL;
    __pyx_t_6 = 0;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
      __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
      if (likely(__pyx_t_4)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
        __pyx_t_6 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_1, __pyx_t_5};
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 475, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
      PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_1, __pyx_t_5};
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 475, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    } else
    #endif
    {
      __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 475, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      if (__pyx_t_4) {
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_4); __pyx_t_4 = NULL;
      }
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0+__pyx_t_6, __pyx_t_1);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1+__pyx_t_6, __pyx_t_5);
      __pyx_t_1 = 0;
      __pyx_t_5 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 475, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_overlap_index, __pyx_t_2);
    __pyx_t_2 = 0;
  __pyx_tuple__18 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_slice__16, __pyx_slice__17);<span class='error_goto'> if (unlikely(!__pyx_tuple__18)) __PYX_ERR(0, 475, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__18);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__18);
</pre><pre class="cython line score-78" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">476</span>:         <span class="n">trace_d</span> <span class="o">=</span> <span class="mf">1000</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">lidar_predict</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-78 '>    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 476, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_ones);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 476, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_predict-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 476, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 476, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 476, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = NULL;
    __pyx_t_6 = 0;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
      __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
      if (likely(__pyx_t_5)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
        __pyx_t_6 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_7, __pyx_t_1};
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 476, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_7, __pyx_t_1};
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 476, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    } else
    #endif
    {
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 476, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      if (__pyx_t_5) {
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_5); __pyx_t_5 = NULL;
      }
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+__pyx_t_6, __pyx_t_7);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1+__pyx_t_6, __pyx_t_1);
      __pyx_t_7 = 0;
      __pyx_t_1 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 476, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyNumber_Multiply</span>(__pyx_int_1000, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 476, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 476, __pyx_L1_error)</span>
    __pyx_t_8 = ((PyArrayObject *)__pyx_t_3);
    {
      __Pyx_BufFmt_StackElem __pyx_stack[1];
      <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_trace_d.rcbuffer-&gt;pybuffer);
      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_trace_d.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
      if (unlikely(__pyx_t_6 &lt; 0)) {
        <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
        if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_trace_d.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_trace_d, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
          Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
          <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
        } else {
          <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
        }
        __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
      }
      __pyx_pybuffernd_trace_d.diminfo[0].strides = __pyx_pybuffernd_trace_d.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_trace_d.diminfo[0].shape = __pyx_pybuffernd_trace_d.rcbuffer-&gt;pybuffer.shape[0];
      if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 476, __pyx_L1_error)</span>
    }
    __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_trace_d, ((PyArrayObject *)__pyx_t_3));
    __pyx_t_3 = 0;
</pre><pre class="cython line score-72" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">477</span>:         <span class="n">distance_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lidar_predict</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-72 '>    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 477, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 477, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_predict-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 477, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 477, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 477, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = NULL;
    __pyx_t_6 = 0;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
      __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
      if (likely(__pyx_t_1)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
        __pyx_t_6 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_t_2, __pyx_t_7};
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 477, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_4)) {
      PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_t_2, __pyx_t_7};
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 477, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    } else
    #endif
    {
      __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 477, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      if (__pyx_t_1) {
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_1); __pyx_t_1 = NULL;
      }
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+__pyx_t_6, __pyx_t_2);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1+__pyx_t_6, __pyx_t_7);
      __pyx_t_2 = 0;
      __pyx_t_7 = 0;
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 477, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 477, __pyx_L1_error)</span>
    __pyx_t_8 = ((PyArrayObject *)__pyx_t_3);
    {
      __Pyx_BufFmt_StackElem __pyx_stack[1];
      <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer);
      __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
      if (unlikely(__pyx_t_6 &lt; 0)) {
        <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
        if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_distance_list, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
          Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
          <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
        } else {
          <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
        }
        __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
      }
      __pyx_pybuffernd_distance_list.diminfo[0].strides = __pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_distance_list.diminfo[0].shape = __pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer.shape[0];
      if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 477, __pyx_L1_error)</span>
    }
    __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_distance_list, ((PyArrayObject *)__pyx_t_3));
    __pyx_t_3 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">478</span>:         <span class="k">if</span> <span class="n">lidar_predict</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_17 = (((__pyx_v_lidar_predict-&gt;dimensions[0]) &gt; 0) != 0);
    if (__pyx_t_17) {
/* … */
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">479</span>:             <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lidar_predict</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>      __pyx_t_18 = (__pyx_v_lidar_predict-&gt;dimensions[0]);
      __pyx_t_19 = __pyx_t_18;
      for (__pyx_t_20 = 0; __pyx_t_20 &lt; __pyx_t_19; __pyx_t_20+=1) {
        __pyx_v_k = __pyx_t_20;
</pre><pre class="cython line score-138" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">480</span>:                 <span class="n">point_idex</span><span class="p">,</span> <span class="n">dx_nearest</span><span class="p">,</span> <span class="n">dy_nearest</span><span class="p">,</span> <span class="n">distance_list</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_nearest_point</span><span class="p">(</span><span class="n">target</span><span class="p">[</span><span class="mf">2</span><span class="p">:</span><span class="mf">6</span><span class="p">],</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">k</span><span class="p">,</span><span class="mf">5</span><span class="p">:])</span></pre>
<pre class='cython code score-138 '>        __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_get_nearest_point);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
        __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_target), __pyx_slice__19);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_k);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
/* … */
  __pyx_slice__19 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_6, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__19)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__19);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__19);
        __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__20);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__20);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, __pyx_slice__20);
        __pyx_t_7 = 0;
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_predict), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        __pyx_t_2 = NULL;
        __pyx_t_6 = 0;
        if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
          __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
          if (likely(__pyx_t_2)) {
            PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
            <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
            __pyx_t_6 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_4)) {
          PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_5, __pyx_t_7};
          __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_4)) {
          PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_5, __pyx_t_7};
          __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        } else
        #endif
        {
          __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          if (__pyx_t_2) {
            <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_2); __pyx_t_2 = NULL;
          }
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0+__pyx_t_6, __pyx_t_5);
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1+__pyx_t_6, __pyx_t_7);
          __pyx_t_5 = 0;
          __pyx_t_7 = 0;
          __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        }
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_3))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_3))) {
          PyObject* sequence = __pyx_t_3;
          Py_ssize_t size = <span class='pyx_c_api'>__Pyx_PySequence_SIZE</span>(sequence);
          if (unlikely(size != 4)) {
            if (size &gt; 4) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(4);
            else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
            <span class='error_goto'>__PYX_ERR(0, 480, __pyx_L1_error)</span>
          }
          #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
          if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
            __pyx_t_4 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
            __pyx_t_1 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
            __pyx_t_7 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 2); 
            __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 3); 
          } else {
            __pyx_t_4 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
            __pyx_t_1 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
            __pyx_t_7 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 2); 
            __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 3); 
          }
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
          #else
          {
            Py_ssize_t i;
            PyObject** temps[4] = {&amp;__pyx_t_4,&amp;__pyx_t_1,&amp;__pyx_t_7,&amp;__pyx_t_5};
            for (i=0; i &lt; 4; i++) {
              PyObject* item = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, i);<span class='error_goto'> if (unlikely(!item)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
              <span class='refnanny'>__Pyx_GOTREF</span>(item);
              *(temps[i]) = item;
            }
          }
          #endif
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        } else {
          Py_ssize_t index = -1;
          PyObject** temps[4] = {&amp;__pyx_t_4,&amp;__pyx_t_1,&amp;__pyx_t_7,&amp;__pyx_t_5};
          __pyx_t_2 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
          __pyx_t_15 = Py_TYPE(__pyx_t_2)-&gt;tp_iternext;
          for (index=0; index &lt; 4; index++) {
            PyObject* item = __pyx_t_15(__pyx_t_2); if (unlikely(!item)) goto __pyx_L11_unpacking_failed;
            <span class='refnanny'>__Pyx_GOTREF</span>(item);
            *(temps[index]) = item;
          }
          if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_15(__pyx_t_2), 4) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 480, __pyx_L1_error)</span>
          __pyx_t_15 = NULL;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          goto __pyx_L12_unpacking_done;
          __pyx_L11_unpacking_failed:;
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          __pyx_t_15 = NULL;
          if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
          <span class='error_goto'>__PYX_ERR(0, 480, __pyx_L1_error)</span>
          __pyx_L12_unpacking_done:;
        }
        __pyx_t_21 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_1); if (unlikely((__pyx_t_21 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 480, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_22 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_7); if (unlikely((__pyx_t_22 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 480, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_23 = __Pyx_PyInt_As_npy_int32(__pyx_t_5); if (unlikely((__pyx_t_23 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 480, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_point_idex, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_v_dx_nearest = __pyx_t_21;
        __pyx_v_dy_nearest = __pyx_t_22;
        __pyx_t_24 = __pyx_v_k;
        *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer.buf, __pyx_t_24, __pyx_pybuffernd_distance_list.diminfo[0].strides) = __pyx_t_23;
      }
  __pyx_slice__20 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_5, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__20)) __PYX_ERR(0, 480, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__20);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__20);
</pre><pre class="cython line score-66" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">481</span>:             <span class="n">distance_list</span> <span class="o">=</span> <span class="n">distance_list</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">distance_list</span><span class="p">)]</span></pre>
<pre class='cython code score-66 '>      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 481, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_argsort);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 481, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
        __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
        if (likely(__pyx_t_5)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
        }
      }
      if (!__pyx_t_5) {
        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_7, ((PyObject *)__pyx_v_distance_list));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 481, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      } else {
        #if CYTHON_FAST_PYCALL
        if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
          PyObject *__pyx_temp[2] = {__pyx_t_5, ((PyObject *)__pyx_v_distance_list)};
          __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 481, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
          PyObject *__pyx_temp[2] = {__pyx_t_5, ((PyObject *)__pyx_v_distance_list)};
          __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 481, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        } else
        #endif
        {
          __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 481, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_5); __pyx_t_5 = NULL;
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_distance_list));
          <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_distance_list));
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0+1, ((PyObject *)__pyx_v_distance_list));
          __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 481, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        }
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_distance_list), __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 481, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      if (!(likely(((__pyx_t_7) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_7, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 481, __pyx_L1_error)</span>
      __pyx_t_8 = ((PyArrayObject *)__pyx_t_7);
      {
        __Pyx_BufFmt_StackElem __pyx_stack[1];
        <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer);
        __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
        if (unlikely(__pyx_t_6 &lt; 0)) {
          <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
          if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_distance_list, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
            Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
            <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
          } else {
            <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
          }
          __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
        }
        __pyx_pybuffernd_distance_list.diminfo[0].strides = __pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_distance_list.diminfo[0].shape = __pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer.shape[0];
        if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 481, __pyx_L1_error)</span>
      }
      __pyx_t_8 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_distance_list, ((PyArrayObject *)__pyx_t_7));
      __pyx_t_7 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">482</span>:         <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lidar_predict</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>    __pyx_t_18 = (__pyx_v_lidar_predict-&gt;dimensions[0]);
    __pyx_t_19 = __pyx_t_18;
    for (__pyx_t_20 = 0; __pyx_t_20 &lt; __pyx_t_19; __pyx_t_20+=1) {
      __pyx_v_i = __pyx_t_20;
</pre><pre class="cython line score-140" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">483</span>:             <span class="n">point_idex</span><span class="p">,</span> <span class="n">dx_nearest</span><span class="p">,</span> <span class="n">dy_nearest</span><span class="p">,</span> <span class="n">distance_nearest</span> <span class="o">=</span> <span class="n">get_nearest_point</span><span class="p">(</span><span class="n">target</span><span class="p">[</span><span class="mf">2</span><span class="p">:</span><span class="mf">6</span><span class="p">],</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">5</span><span class="p">:])</span></pre>
<pre class='cython code score-140 '>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_get_nearest_point);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_target), __pyx_slice__21);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
/* … */
  __pyx_slice__21 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_6, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__21)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__21);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__21);
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__22);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__22);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1, __pyx_slice__22);
      __pyx_t_5 = 0;
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_predict), __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_4)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
        PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_1, __pyx_t_5};
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
        PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_1, __pyx_t_5};
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      {
        __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        if (__pyx_t_4) {
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_4); __pyx_t_4 = NULL;
        }
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_6, __pyx_t_1);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_6, __pyx_t_5);
        __pyx_t_1 = 0;
        __pyx_t_5 = 0;
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_7))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_7))) {
        PyObject* sequence = __pyx_t_7;
        Py_ssize_t size = <span class='pyx_c_api'>__Pyx_PySequence_SIZE</span>(sequence);
        if (unlikely(size != 4)) {
          if (size &gt; 4) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(4);
          else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
          <span class='error_goto'>__PYX_ERR(0, 483, __pyx_L1_error)</span>
        }
        #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
        if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
          __pyx_t_3 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
          __pyx_t_2 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
          __pyx_t_5 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 2); 
          __pyx_t_1 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 3); 
        } else {
          __pyx_t_3 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
          __pyx_t_2 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
          __pyx_t_5 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 2); 
          __pyx_t_1 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 3); 
        }
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
        #else
        {
          Py_ssize_t i;
          PyObject** temps[4] = {&amp;__pyx_t_3,&amp;__pyx_t_2,&amp;__pyx_t_5,&amp;__pyx_t_1};
          for (i=0; i &lt; 4; i++) {
            PyObject* item = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, i);<span class='error_goto'> if (unlikely(!item)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
            <span class='refnanny'>__Pyx_GOTREF</span>(item);
            *(temps[i]) = item;
          }
        }
        #endif
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      } else {
        Py_ssize_t index = -1;
        PyObject** temps[4] = {&amp;__pyx_t_3,&amp;__pyx_t_2,&amp;__pyx_t_5,&amp;__pyx_t_1};
        __pyx_t_4 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_15 = Py_TYPE(__pyx_t_4)-&gt;tp_iternext;
        for (index=0; index &lt; 4; index++) {
          PyObject* item = __pyx_t_15(__pyx_t_4); if (unlikely(!item)) goto __pyx_L15_unpacking_failed;
          <span class='refnanny'>__Pyx_GOTREF</span>(item);
          *(temps[index]) = item;
        }
        if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_15(__pyx_t_4), 4) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 483, __pyx_L1_error)</span>
        __pyx_t_15 = NULL;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        goto __pyx_L16_unpacking_done;
        __pyx_L15_unpacking_failed:;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        __pyx_t_15 = NULL;
        if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
        <span class='error_goto'>__PYX_ERR(0, 483, __pyx_L1_error)</span>
        __pyx_L16_unpacking_done:;
      }
      __pyx_t_22 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_2); if (unlikely((__pyx_t_22 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 483, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_21 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_5); if (unlikely((__pyx_t_21 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 483, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_25 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_1); if (unlikely((__pyx_t_25 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 483, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_point_idex, __pyx_t_3);
      __pyx_t_3 = 0;
      __pyx_v_dx_nearest = __pyx_t_22;
      __pyx_v_dy_nearest = __pyx_t_21;
      __pyx_v_distance_nearest = __pyx_t_25;
  __pyx_slice__22 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_5, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__22)) __PYX_ERR(0, 483, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__22);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__22);
</pre><pre class="cython line score-0">&#xA0;<span class="">484</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">485</span>:             <span class="c">#设定行人的跟踪门大小(x,y方向均为1.5m)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">486</span>:             <span class="k">if</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span> <span class="o">==</span> <span class="mf">1</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>      __pyx_t_26 = __pyx_v_i;
      __pyx_t_27 = 0;
      __pyx_t_17 = (((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_26, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_27, __pyx_pybuffernd_lidar_predict.diminfo[1].strides)) == 1) != 0);
      if (__pyx_t_17) {
/* … */
        goto __pyx_L17;
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">487</span>:                 <span class="n">dx_thresh</span> <span class="o">=</span> <span class="mf">100</span></pre>
<pre class='cython code score-0 '>        __pyx_v_dx_thresh = 0x64;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">488</span>:                 <span class="n">dy_thresh</span> <span class="o">=</span> <span class="mf">100</span></pre>
<pre class='cython code score-0 '>        __pyx_v_dy_thresh = 0x64;
</pre><pre class="cython line score-0">&#xA0;<span class="">489</span>:             <span class="c">#根据目标位置设定车辆的跟踪门大小</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">490</span>:             <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">491</span>:                 <span class="k">if</span> <span class="p">(</span><span class="n">distance_list</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">==</span> <span class="mf">1</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">distance_list</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">600</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>      /*else*/ {
        __pyx_t_14 = (((__pyx_v_distance_list-&gt;dimensions[0]) == 1) != 0);
        if (!__pyx_t_14) {
        } else {
          __pyx_t_17 = __pyx_t_14;
          goto __pyx_L19_bool_binop_done;
        }
        __pyx_t_28 = 1;
        __pyx_t_14 = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_distance_list.rcbuffer-&gt;pybuffer.buf, __pyx_t_28, __pyx_pybuffernd_distance_list.diminfo[0].strides)) &gt; 0x258) != 0);
        __pyx_t_17 = __pyx_t_14;
        __pyx_L19_bool_binop_done:;
        if (__pyx_t_17) {
/* … */
          goto __pyx_L18;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">492</span>:                     <span class="n">dx_thresh</span> <span class="o">=</span> <span class="mf">300</span></pre>
<pre class='cython code score-0 '>          __pyx_v_dx_thresh = 0x12C;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">493</span>:                     <span class="n">dy_thresh</span> <span class="o">=</span> <span class="mf">500</span></pre>
<pre class='cython code score-0 '>          __pyx_v_dy_thresh = 0x1F4;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">494</span>:                 <span class="k">elif</span> <span class="mf">100</span> <span class="o">&lt;</span> <span class="n">target</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">1500</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>        __pyx_t_29 = 0;
        __pyx_t_23 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_29, __pyx_pybuffernd_target.diminfo[0].strides));
        __pyx_t_17 = (0x64 &lt; __pyx_t_23);
        if (__pyx_t_17) {
          __pyx_t_17 = (__pyx_t_23 &lt; 0x5DC);
        }
        __pyx_t_14 = (__pyx_t_17 != 0);
        if (__pyx_t_14) {
/* … */
          goto __pyx_L18;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">495</span>:                     <span class="n">dx_thresh</span> <span class="o">=</span> <span class="mf">180</span></pre>
<pre class='cython code score-0 '>          __pyx_v_dx_thresh = 0xB4;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">496</span>:                     <span class="n">dy_thresh</span> <span class="o">=</span> <span class="mf">500</span></pre>
<pre class='cython code score-0 '>          __pyx_v_dy_thresh = 0x1F4;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">497</span>:                 <span class="k">elif</span> <span class="n">target</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">1500</span> <span class="ow">and</span> <span class="o">-</span><span class="mf">950</span> <span class="o">&lt;=</span> <span class="n">target</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mf">600</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>        __pyx_t_30 = 0;
        __pyx_t_17 = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_30, __pyx_pybuffernd_target.diminfo[0].strides)) &gt;= 0x5DC) != 0);
        if (__pyx_t_17) {
        } else {
          __pyx_t_14 = __pyx_t_17;
          goto __pyx_L21_bool_binop_done;
        }
        __pyx_t_31 = 1;
        __pyx_t_23 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_31, __pyx_pybuffernd_target.diminfo[0].strides));
        __pyx_t_17 = (-950L &lt;= __pyx_t_23);
        if (__pyx_t_17) {
          __pyx_t_17 = (__pyx_t_23 &lt;= 0x258);
        }
        __pyx_t_32 = (__pyx_t_17 != 0);
        __pyx_t_14 = __pyx_t_32;
        __pyx_L21_bool_binop_done:;
        if (__pyx_t_14) {
/* … */
          goto __pyx_L18;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">498</span>:                     <span class="n">dx_thresh</span> <span class="o">=</span> <span class="mf">500</span></pre>
<pre class='cython code score-0 '>          __pyx_v_dx_thresh = 0x1F4;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">499</span>:                     <span class="n">dy_thresh</span> <span class="o">=</span> <span class="mf">300</span></pre>
<pre class='cython code score-0 '>          __pyx_v_dy_thresh = 0x12C;
</pre><pre class="cython line score-0">&#xA0;<span class="">500</span>:                 <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">501</span>:                     <span class="n">dx_thresh</span> <span class="o">=</span> <span class="mf">300</span></pre>
<pre class='cython code score-0 '>        /*else*/ {
          __pyx_v_dx_thresh = 0x12C;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">502</span>:                     <span class="n">dy_thresh</span> <span class="o">=</span> <span class="mf">300</span></pre>
<pre class='cython code score-0 '>          __pyx_v_dy_thresh = 0x12C;
        }
        __pyx_L18:;
      }
      __pyx_L17:;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">503</span>:             <span class="k">if</span> <span class="p">(</span><span class="n">dx_nearest</span> <span class="o">&lt;</span> <span class="n">dx_thresh</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">dy_nearest</span> <span class="o">&lt;</span> <span class="n">dy_thresh</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>      __pyx_t_32 = ((__pyx_v_dx_nearest &lt; __pyx_v_dx_thresh) != 0);
      if (__pyx_t_32) {
      } else {
        __pyx_t_14 = __pyx_t_32;
        goto __pyx_L24_bool_binop_done;
      }
      __pyx_t_32 = ((__pyx_v_dy_nearest &lt; __pyx_v_dy_thresh) != 0);
      __pyx_t_14 = __pyx_t_32;
      __pyx_L24_bool_binop_done:;
      if (__pyx_t_14) {
/* … */
      }
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">504</span>:                 <span class="n">trace_d</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance_nearest</span></pre>
<pre class='cython code score-0 '>        __pyx_t_33 = __pyx_v_i;
        *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_trace_d.rcbuffer-&gt;pybuffer.buf, __pyx_t_33, __pyx_pybuffernd_trace_d.diminfo[0].strides) = __pyx_v_distance_nearest;
</pre><pre class="cython line score-51" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">505</span>:         <span class="k">if</span> <span class="n">trace_d</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">trace_d</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1000</span><span class="p">:</span> <span class="c"># 小于1000表示有满足条件的trace_d</span></pre>
<pre class='cython code score-51 '>    __pyx_t_32 = (((__pyx_v_trace_d-&gt;dimensions[0]) &gt; 0) != 0);
    if (__pyx_t_32) {
    } else {
      __pyx_t_14 = __pyx_t_32;
      goto __pyx_L27_bool_binop_done;
    }
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 505, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_min);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 505, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_5))) {
      __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_5);
      if (likely(__pyx_t_1)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_5, function);
      }
    }
    if (!__pyx_t_1) {
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_5, ((PyObject *)__pyx_v_trace_d));<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 505, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    } else {
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_5)) {
        PyObject *__pyx_temp[2] = {__pyx_t_1, ((PyObject *)__pyx_v_trace_d)};
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 505, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_5)) {
        PyObject *__pyx_temp[2] = {__pyx_t_1, ((PyObject *)__pyx_v_trace_d)};
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 505, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      } else
      #endif
      {
        __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 505, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1); __pyx_t_1 = NULL;
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_trace_d));
        <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_trace_d));
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+1, ((PyObject *)__pyx_v_trace_d));
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 505, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      }
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_7, __pyx_int_1000, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 505, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_32 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_5); if (unlikely(__pyx_t_32 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 505, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_14 = __pyx_t_32;
    __pyx_L27_bool_binop_done:;
    if (__pyx_t_14) {
/* … */
      goto __pyx_L26;
    }
</pre><pre class="cython line score-46" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">506</span>:             <span class="n">idex</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">trace_d</span><span class="p">))</span>  <span class="c"># 当前帧和上一帧第idex个目标可能是同一个</span></pre>
<pre class='cython code score-46 '>      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 506, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_argmin);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 506, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
        __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
        if (likely(__pyx_t_7)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
        }
      }
      if (!__pyx_t_7) {
        __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, ((PyObject *)__pyx_v_trace_d));<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 506, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      } else {
        #if CYTHON_FAST_PYCALL
        if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
          PyObject *__pyx_temp[2] = {__pyx_t_7, ((PyObject *)__pyx_v_trace_d)};
          __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 506, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
          PyObject *__pyx_temp[2] = {__pyx_t_7, ((PyObject *)__pyx_v_trace_d)};
          __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 506, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        } else
        #endif
        {
          __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 506, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_7); __pyx_t_7 = NULL;
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_trace_d));
          <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_trace_d));
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0+1, ((PyObject *)__pyx_v_trace_d));
          __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 506, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        }
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 506, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_idex, ((PyObject*)__pyx_t_2));
      __pyx_t_2 = 0;
</pre><pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">507</span>:             <span class="k">if</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span> <span class="o">==</span> <span class="mf">1</span><span class="p">:</span></pre>
<pre class='cython code score-18 '>      __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 507, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_idex);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_idex);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_v_idex);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_0);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_0);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, __pyx_int_0);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_predict), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 507, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_EqObjC</span>(__pyx_t_5, __pyx_int_1, 1, 0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 507, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_14 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_2); if (unlikely(__pyx_t_14 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 507, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      if (__pyx_t_14) {
/* … */
        goto __pyx_L29;
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">508</span>:                 <span class="n">distance_thresh</span> <span class="o">=</span> <span class="mf">100</span></pre>
<pre class='cython code score-0 '>        __pyx_v_distance_thresh = 0x64;
</pre><pre class="cython line score-0">&#xA0;<span class="">509</span>:             <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">510</span>:                 <span class="n">distance_thresh</span> <span class="o">=</span> <span class="mf">400</span></pre>
<pre class='cython code score-0 '>      /*else*/ {
        __pyx_v_distance_thresh = 0x190;
      }
      __pyx_L29:;
</pre><pre class="cython line score-0">&#xA0;<span class="">511</span>:             <span class="c"># 将target放入对应的target_3Dlist中, target_3Dlist_num[idex]记录了target_3Dlist[idex]中存放了多少目标</span></pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">512</span>:             <span class="k">if</span> <span class="n">trace_d</span><span class="p">[</span><span class="n">idex</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">distance_thresh</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>      __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_trace_d), __pyx_v_idex);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 512, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_distance_thresh);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 512, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_2, __pyx_t_5, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 512, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_14 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_14 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 512, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (__pyx_t_14) {
/* … */
      }
</pre><pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">513</span>:                 <span class="n">target_3Dlist</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span> <span class="n">target_3Dlist_num</span><span class="p">[</span><span class="n">idex</span><span class="p">]]</span> <span class="o">=</span> <span class="n">target</span></pre>
<pre class='cython code score-16 '>        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_target_3Dlist_num), __pyx_v_idex);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 513, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 513, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_idex);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_idex);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_v_idex);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1, __pyx_t_1);
        __pyx_t_1 = 0;
        if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_target_3Dlist), __pyx_t_5, ((PyObject *)__pyx_v_target)) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 513, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">514</span>:                 <span class="n">target_3Dlist_num</span><span class="p">[</span><span class="n">idex</span><span class="p">]</span> <span class="o">+=</span> <span class="mf">1</span></pre>
<pre class='cython code score-13 '>        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_idex);
        __pyx_t_34 = __pyx_v_idex;
        __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_target_3Dlist_num), __pyx_t_34);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 514, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_AddObjC</span>(__pyx_t_5, __pyx_int_1, 1, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 514, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_target_3Dlist_num), __pyx_t_34, __pyx_t_1) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 514, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_34); __pyx_t_34 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">515</span>:         <span class="k">elif</span> <span class="n">overlap_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span> <span class="c"># 另一种被认为是同一目标的情况</span></pre>
<pre class='cython code score-0 '>    __pyx_t_14 = (__pyx_v_overlap_index != Py_None);
    __pyx_t_32 = (__pyx_t_14 != 0);
    if (__pyx_t_32) {
/* … */
      goto __pyx_L26;
    }
</pre><pre class="cython line score-18" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">516</span>:             <span class="k">if</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">overlap_index</span><span class="p">,</span> <span class="mf">0</span><span class="p">]</span> <span class="o">==</span> <span class="mf">1</span><span class="p">:</span></pre>
<pre class='cython code score-18 '>      __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 516, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_overlap_index);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_overlap_index);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_v_overlap_index);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_0);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_0);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, __pyx_int_0);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_predict), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 516, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_EqObjC</span>(__pyx_t_5, __pyx_int_1, 1, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 516, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_32 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_32 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 516, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (__pyx_t_32) {
/* … */
        goto __pyx_L31;
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">517</span>:                 <span class="n">distance_thresh</span> <span class="o">=</span> <span class="mf">100</span></pre>
<pre class='cython code score-0 '>        __pyx_v_distance_thresh = 0x64;
</pre><pre class="cython line score-0">&#xA0;<span class="">518</span>:             <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">519</span>:                 <span class="n">distance_thresh</span> <span class="o">=</span> <span class="mf">400</span></pre>
<pre class='cython code score-0 '>      /*else*/ {
        __pyx_v_distance_thresh = 0x190;
      }
      __pyx_L31:;
</pre><pre class="cython line score-17" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">520</span>:             <span class="k">if</span> <span class="n">trace_d</span><span class="p">[</span><span class="n">overlap_index</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">1.5</span><span class="o">*</span><span class="n">distance_thresh</span><span class="p">:</span></pre>
<pre class='cython code score-17 '>      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_trace_d), __pyx_v_overlap_index);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 520, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_5 = <span class='py_c_api'>PyFloat_FromDouble</span>((1.5 * __pyx_v_distance_thresh));<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 520, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      __pyx_t_2 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_1, __pyx_t_5, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 520, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_32 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_2); if (unlikely(__pyx_t_32 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 520, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      if (__pyx_t_32) {
/* … */
      }
</pre><pre class="cython line score-0">&#xA0;<span class="">521</span>:                 <span class="c"># 如果和一次预测的target有足够的交集, 且最近点在一定范围之内 </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">522</span>:                 <span class="c"># 将target放入对应的target_3Dlist中...记录lidar_predict中的每个目标可能对应的所有lidar_data</span></pre>
<pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">523</span>:                 <span class="n">target_3Dlist</span><span class="p">[</span><span class="n">overlap_index</span><span class="p">,</span> <span class="n">target_3Dlist_num</span><span class="p">[</span><span class="n">overlap_index</span><span class="p">]]</span> <span class="o">=</span> <span class="n">target</span></pre>
<pre class='cython code score-16 '>        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_target_3Dlist_num), __pyx_v_overlap_index);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 523, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 523, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_overlap_index);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_overlap_index);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_v_overlap_index);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1, __pyx_t_2);
        __pyx_t_2 = 0;
        if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_target_3Dlist), __pyx_t_5, ((PyObject *)__pyx_v_target)) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 523, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">524</span>:                 <span class="n">target_3Dlist_num</span><span class="p">[</span><span class="n">overlap_index</span><span class="p">]</span> <span class="o">+=</span> <span class="mf">1</span> <span class="c"># lidar_predict中的第overlap_index增加1</span></pre>
<pre class='cython code score-13 '>        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_overlap_index);
        __pyx_t_5 = __pyx_v_overlap_index;
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_target_3Dlist_num), __pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 524, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_AddObjC</span>(__pyx_t_2, __pyx_int_1, 1, 1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 524, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_target_3Dlist_num), __pyx_t_5, __pyx_t_1) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 524, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">525</span>:         <span class="k">else</span><span class="p">:</span> <span class="c"># 认为是一个新目标 </span></pre>
<pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">526</span>:             <span class="n">new_targets</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">target</span></pre>
<pre class='cython code score-21 '>    /*else*/ {
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_j);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 526, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 526, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__23);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__23);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, __pyx_slice__23);
      __pyx_t_5 = 0;
      if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_new_targets), __pyx_t_1, ((PyObject *)__pyx_v_target)) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 526, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
/* … */
  __pyx_slice__23 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__23)) __PYX_ERR(0, 526, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__23);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__23);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">527</span>:             <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>      __pyx_v_j = (__pyx_v_j + 1);
    }
    __pyx_L26:;
    __pyx_L3_continue:;
  }
</pre><pre class="cython line score-12" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">528</span>:     <span class="k">return</span> <span class="n">new_targets</span><span class="p">,</span> <span class="n">target_3Dlist</span><span class="p">,</span> <span class="n">target_3Dlist_num</span></pre>
<pre class='cython code score-12 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 528, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_new_targets));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_new_targets));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((PyObject *)__pyx_v_new_targets));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_target_3Dlist));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_target_3Dlist));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, ((PyObject *)__pyx_v_target_3Dlist));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_target_3Dlist_num));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_target_3Dlist_num));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 2, ((PyObject *)__pyx_v_target_3Dlist_num));
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">529</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">530</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">531</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">532</span>: <span class="c">#功能：根据历史信息修正当前目标</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">533</span>: <span class="c">#输入：</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">534</span>: <span class="c">#    box:xmin,xmax,ymin,ymax</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">535</span>: <span class="c">#    predict_box:xmin,xmax,ymin,ymax</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">536</span>: <span class="c">#输出：</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">537</span>: <span class="c">#    corrected_box：修正后的xmin,xmax,ymin,ymax</span></pre>
<pre class="cython line score-69" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">538</span>: <span class="k">def</span> <span class="nf">correct</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">box</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">predict_box</span><span class="p">):</span></pre>
<pre class='cython code score-69 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_27correct(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_27correct = {"correct", (PyCFunction)__pyx_pw_10Lidar_core_27correct, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_27correct(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_box = 0;
  PyArrayObject *__pyx_v_predict_box = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("correct (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_box,&amp;__pyx_n_s_predict_box,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_box)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_predict_box)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("correct", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(0, 538, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "correct") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 538, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_box = ((PyArrayObject *)values[0]);
    __pyx_v_predict_box = ((PyArrayObject *)values[1]);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("correct", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 538, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.correct", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_box), __pyx_ptype_5numpy_ndarray, 1, "box", 0))) <span class='error_goto'>__PYX_ERR(0, 538, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_predict_box), __pyx_ptype_5numpy_ndarray, 1, "predict_box", 0))) <span class='error_goto'>__PYX_ERR(0, 538, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_26correct(__pyx_self, __pyx_v_box, __pyx_v_predict_box);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_26correct(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_box, PyArrayObject *__pyx_v_predict_box) {
  long __pyx_v_box_area;
  long __pyx_v_predict_box_area;
  double __pyx_v_area_ratio;
  PyArrayObject *__pyx_v_corrected_box = 0;
  long __pyx_v_i;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_box;
  __Pyx_Buffer __pyx_pybuffer_box;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_corrected_box;
  __Pyx_Buffer __pyx_pybuffer_corrected_box;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_predict_box;
  __Pyx_Buffer __pyx_pybuffer_predict_box;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("correct", 0);
  __pyx_pybuffer_corrected_box.pybuffer.buf = NULL;
  __pyx_pybuffer_corrected_box.refcount = 0;
  __pyx_pybuffernd_corrected_box.data = NULL;
  __pyx_pybuffernd_corrected_box.rcbuffer = &amp;__pyx_pybuffer_corrected_box;
  __pyx_pybuffer_box.pybuffer.buf = NULL;
  __pyx_pybuffer_box.refcount = 0;
  __pyx_pybuffernd_box.data = NULL;
  __pyx_pybuffernd_box.rcbuffer = &amp;__pyx_pybuffer_box;
  __pyx_pybuffer_predict_box.pybuffer.buf = NULL;
  __pyx_pybuffer_predict_box.refcount = 0;
  __pyx_pybuffernd_predict_box.data = NULL;
  __pyx_pybuffernd_predict_box.rcbuffer = &amp;__pyx_pybuffer_predict_box;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_box, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 538, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_box.diminfo[0].strides = __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_box.diminfo[0].shape = __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_predict_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_predict_box, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 538, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_predict_box.diminfo[0].strides = __pyx_pybuffernd_predict_box.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_predict_box.diminfo[0].shape = __pyx_pybuffernd_predict_box.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_box.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_corrected_box.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_predict_box.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.correct", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_box.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_corrected_box.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_predict_box.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_corrected_box);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__144 = <span class='py_c_api'>PyTuple_Pack</span>(7, __pyx_n_s_box, __pyx_n_s_predict_box, __pyx_n_s_box_area, __pyx_n_s_predict_box_area, __pyx_n_s_area_ratio, __pyx_n_s_corrected_box, __pyx_n_s_i);<span class='error_goto'> if (unlikely(!__pyx_tuple__144)) __PYX_ERR(0, 538, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__144);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__144);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_27correct, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 538, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_correct, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 538, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__145 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(2, 0, 7, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__144, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_correct, 538, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__145)) __PYX_ERR(0, 538, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">539</span>:     <span class="c"># area_ratio:xy平面，面积比 box_area/predict_box_area</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">540</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">box_area</span><span class="p">,</span> <span class="nf">predict_box_area</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_predict_box_area = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">541</span>:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">area_ratio</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_area_ratio = 0.0;
</pre><pre class="cython line score-0">&#xA0;<span class="">542</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">corrected_box</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">543</span>: </pre>
<pre class="cython line score-68" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">544</span>:     <span class="n">corrected_box</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mf">4</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-68 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 544, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 544, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 544, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 544, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_int_4, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 544, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_int_4, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 544, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 544, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    if (__pyx_t_2) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0+__pyx_t_5, __pyx_int_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 1+__pyx_t_5, __pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_6, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 544, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 544, __pyx_L1_error)</span>
  __pyx_t_7 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_corrected_box.rcbuffer-&gt;pybuffer);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_corrected_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_7, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_5 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_8, &amp;__pyx_t_9, &amp;__pyx_t_10);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_corrected_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_corrected_box, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_8); Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_8, __pyx_t_9, __pyx_t_10);
      }
      __pyx_t_8 = __pyx_t_9 = __pyx_t_10 = 0;
    }
    __pyx_pybuffernd_corrected_box.diminfo[0].strides = __pyx_pybuffernd_corrected_box.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_corrected_box.diminfo[0].shape = __pyx_pybuffernd_corrected_box.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_5 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 544, __pyx_L1_error)</span>
  }
  __pyx_t_7 = 0;
  __pyx_v_corrected_box = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">545</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">546</span>:     <span class="n">box_area</span> <span class="o">=</span> <span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">box</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">box</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>  __pyx_t_11 = 1;
  __pyx_t_12 = 0;
  __pyx_t_13 = 3;
  __pyx_t_14 = 2;
  __pyx_v_box_area = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_11, __pyx_pybuffernd_box.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_12, __pyx_pybuffernd_box.diminfo[0].strides))) * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_13, __pyx_pybuffernd_box.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_14, __pyx_pybuffernd_box.diminfo[0].strides))));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">547</span>:     <span class="n">predict_box_area</span> <span class="o">=</span> <span class="p">(</span><span class="n">predict_box</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">predict_box</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">predict_box</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">predict_box</span><span class="p">[</span><span class="mf">2</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>  __pyx_t_15 = 1;
  __pyx_t_16 = 0;
  __pyx_t_17 = 3;
  __pyx_t_18 = 2;
  __pyx_v_predict_box_area = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_predict_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_predict_box.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_predict_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_16, __pyx_pybuffernd_predict_box.diminfo[0].strides))) * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_predict_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_17, __pyx_pybuffernd_predict_box.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_predict_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_18, __pyx_pybuffernd_predict_box.diminfo[0].strides))));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">548</span>:     <span class="k">if</span> <span class="p">(</span><span class="n">predict_box_area</span> <span class="o">!=</span> <span class="mf">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">box_area</span> <span class="o">!=</span> <span class="mf">0</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_20 = ((__pyx_v_predict_box_area != 0) != 0);
  if (__pyx_t_20) {
  } else {
    __pyx_t_19 = __pyx_t_20;
    goto __pyx_L4_bool_binop_done;
  }
  __pyx_t_20 = ((__pyx_v_box_area != 0) != 0);
  __pyx_t_19 = __pyx_t_20;
  __pyx_L4_bool_binop_done:;
  if (__pyx_t_19) {
/* … */
    goto __pyx_L3;
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">549</span>:         <span class="n">area_ratio</span> <span class="o">=</span> <span class="n">box_area</span><span class="o">/</span><span class="n">predict_box_area</span></pre>
<pre class='cython code score-0 '>    __pyx_v_area_ratio = (__pyx_v_box_area / __pyx_v_predict_box_area);
</pre><pre class="cython line score-0">&#xA0;<span class="">550</span>:     <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">551</span>:         <span class="k">print</span><span class="p">(</span><span class="s">&quot;predict_box or box is empty!&quot;</span><span class="p">)</span></pre>
<pre class='cython code score-2 '>  /*else*/ {
    if (<span class='pyx_c_api'>__Pyx_PrintOne</span>(0, __pyx_kp_s_predict_box_or_box_is_empty) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 551, __pyx_L1_error)</span>
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">552</span>:         <span class="k">return</span> <span class="n">box</span></pre>
<pre class='cython code score-2 '>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_box));
    __pyx_r = ((PyObject *)__pyx_v_box);
    goto __pyx_L0;
  }
  __pyx_L3:;
</pre><pre class="cython line score-0">&#xA0;<span class="">553</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">554</span>:     <span class="k">if</span> <span class="p">(</span><span class="n">area_ratio</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">area_ratio</span> <span class="o">&gt;</span> <span class="mf">2</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_20 = ((__pyx_v_area_ratio &lt; 0.5) != 0);
  if (!__pyx_t_20) {
  } else {
    __pyx_t_19 = __pyx_t_20;
    goto __pyx_L7_bool_binop_done;
  }
  __pyx_t_20 = ((__pyx_v_area_ratio &gt; 2.0) != 0);
  __pyx_t_19 = __pyx_t_20;
  __pyx_L7_bool_binop_done:;
  if (__pyx_t_19) {
/* … */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">555</span>:         <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">4</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>    for (__pyx_t_21 = 0; __pyx_t_21 &lt; 4; __pyx_t_21+=1) {
      __pyx_v_i = __pyx_t_21;
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">556</span>:             <span class="n">corrected_box</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="mf">0.8</span><span class="o">*</span><span class="n">box</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.2</span><span class="o">*</span><span class="n">predict_box</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></pre>
<pre class='cython code score-14 '>      __pyx_t_22 = __pyx_v_i;
      __pyx_t_23 = __pyx_v_i;
      __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(((0.8 * (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_22, __pyx_pybuffernd_box.diminfo[0].strides))) + (0.2 * (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_predict_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_23, __pyx_pybuffernd_predict_box.diminfo[0].strides)))));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 556, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 556, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_24 = __Pyx_PyInt_As_npy_int32(__pyx_t_3); if (unlikely((__pyx_t_24 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 556, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_25 = __pyx_v_i;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_corrected_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_25, __pyx_pybuffernd_corrected_box.diminfo[0].strides) = __pyx_t_24;
    }
</pre><pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">557</span>:         <span class="k">return</span> <span class="n">corrected_box</span></pre>
<pre class='cython code score-2 '>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_corrected_box));
    __pyx_r = ((PyObject *)__pyx_v_corrected_box);
    goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">558</span>:     <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-2" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">559</span>:         <span class="k">return</span> <span class="n">box</span></pre>
<pre class='cython code score-2 '>  /*else*/ {
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_box));
    __pyx_r = ((PyObject *)__pyx_v_box);
    goto __pyx_L0;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">560</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">561</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">562</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">563</span>: <span class="c">#xy:xmin,xmax,ymin,ymax</span></pre>
<pre class="cython line score-76" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">564</span>: <span class="k">def</span> <span class="nf">box_modify</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">xy</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">lxy</span><span class="p">):</span></pre>
<pre class='cython code score-76 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_29box_modify(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_29box_modify = {"box_modify", (PyCFunction)__pyx_pw_10Lidar_core_29box_modify, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_29box_modify(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_xy = 0;
  PyArrayObject *__pyx_v_lxy = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("box_modify (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_xy,&amp;__pyx_n_s_lxy,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_xy)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_lxy)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("box_modify", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(0, 564, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "box_modify") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 564, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_xy = ((PyArrayObject *)values[0]);
    __pyx_v_lxy = ((PyArrayObject *)values[1]);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("box_modify", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 564, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.box_modify", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_xy), __pyx_ptype_5numpy_ndarray, 1, "xy", 0))) <span class='error_goto'>__PYX_ERR(0, 564, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_lxy), __pyx_ptype_5numpy_ndarray, 1, "lxy", 0))) <span class='error_goto'>__PYX_ERR(0, 564, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_28box_modify(__pyx_self, __pyx_v_xy, __pyx_v_lxy);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_28box_modify(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_xy, PyArrayObject *__pyx_v_lxy) {
  PyArrayObject *__pyx_v_box = 0;
  PyArrayObject *__pyx_v_lbox = 0;
  long __pyx_v_idex;
  long __pyx_v_w;
  long __pyx_v_l;
  long __pyx_v_xmin;
  long __pyx_v_ymin;
  long __pyx_v_xmax;
  long __pyx_v_ymax;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_box;
  __Pyx_Buffer __pyx_pybuffer_box;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_lbox;
  __Pyx_Buffer __pyx_pybuffer_lbox;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_lxy;
  __Pyx_Buffer __pyx_pybuffer_lxy;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_xy;
  __Pyx_Buffer __pyx_pybuffer_xy;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("box_modify", 0);
  __pyx_pybuffer_box.pybuffer.buf = NULL;
  __pyx_pybuffer_box.refcount = 0;
  __pyx_pybuffernd_box.data = NULL;
  __pyx_pybuffernd_box.rcbuffer = &amp;__pyx_pybuffer_box;
  __pyx_pybuffer_lbox.pybuffer.buf = NULL;
  __pyx_pybuffer_lbox.refcount = 0;
  __pyx_pybuffernd_lbox.data = NULL;
  __pyx_pybuffernd_lbox.rcbuffer = &amp;__pyx_pybuffer_lbox;
  __pyx_pybuffer_xy.pybuffer.buf = NULL;
  __pyx_pybuffer_xy.refcount = 0;
  __pyx_pybuffernd_xy.data = NULL;
  __pyx_pybuffernd_xy.rcbuffer = &amp;__pyx_pybuffer_xy;
  __pyx_pybuffer_lxy.pybuffer.buf = NULL;
  __pyx_pybuffer_lxy.refcount = 0;
  __pyx_pybuffernd_lxy.data = NULL;
  __pyx_pybuffernd_lxy.rcbuffer = &amp;__pyx_pybuffer_lxy;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_xy.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_xy, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 564, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_xy.diminfo[0].strides = __pyx_pybuffernd_xy.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_xy.diminfo[0].shape = __pyx_pybuffernd_xy.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lxy.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lxy, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 564, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_lxy.diminfo[0].strides = __pyx_pybuffernd_lxy.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lxy.diminfo[0].shape = __pyx_pybuffernd_lxy.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_17);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_63);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_box.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lbox.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lxy.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_xy.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.box_modify", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_box.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lbox.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lxy.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_xy.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_box);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_lbox);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__146 = <span class='py_c_api'>PyTuple_Pack</span>(13, __pyx_n_s_xy, __pyx_n_s_lxy, __pyx_n_s_box, __pyx_n_s_lbox, __pyx_n_s_cxy, __pyx_n_s_lcxy, __pyx_n_s_idex, __pyx_n_s_w, __pyx_n_s_l, __pyx_n_s_xmin, __pyx_n_s_ymin, __pyx_n_s_xmax, __pyx_n_s_ymax);<span class='error_goto'> if (unlikely(!__pyx_tuple__146)) __PYX_ERR(0, 564, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__146);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__146);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_29box_modify, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 564, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_box_modify, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 564, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__147 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(2, 0, 13, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__146, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_box_modify, 564, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__147)) __PYX_ERR(0, 564, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">565</span>:         <span class="c"># 根据l_xy修正 xy: xmin, ymin, xmax, ymax</span></pre>
<pre class="cython line score-116" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">566</span>:         <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">box</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mf">5</span><span class="p">,</span><span class="mf">2</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">),</span> <span class="n">lbox</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mf">5</span><span class="p">,</span><span class="mf">2</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-116 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_tuple__24, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_tuple__24, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_6 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
    if (__pyx_t_2) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_tuple__24);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__24);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 0+__pyx_t_5, __pyx_tuple__24);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_6, 1+__pyx_t_5, __pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_6, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 566, __pyx_L1_error)</span>
  __pyx_t_7 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_7, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) {
      __pyx_v_box = ((PyArrayObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None); __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf = NULL;
      <span class='error_goto'>__PYX_ERR(0, 566, __pyx_L1_error)</span>
    } else {__pyx_pybuffernd_box.diminfo[0].strides = __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_box.diminfo[0].shape = __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_box.diminfo[1].strides = __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_box.diminfo[1].shape = __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.shape[1];
    }
  }
  __pyx_t_7 = 0;
  __pyx_v_box = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
/* … */
  __pyx_tuple__24 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_5, __pyx_int_2);<span class='error_goto'> if (unlikely(!__pyx_tuple__24)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__24);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__24);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_6))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_6);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_6, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_6)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_tuple__25, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_6)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_tuple__25, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_6, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (__pyx_t_3) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_tuple__25);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__25);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_5, __pyx_tuple__25);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_5, __pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_6, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 566, __pyx_L1_error)</span>
  __pyx_t_7 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lbox.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_7, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) {
      __pyx_v_lbox = ((PyArrayObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None); __pyx_pybuffernd_lbox.rcbuffer-&gt;pybuffer.buf = NULL;
      <span class='error_goto'>__PYX_ERR(0, 566, __pyx_L1_error)</span>
    } else {__pyx_pybuffernd_lbox.diminfo[0].strides = __pyx_pybuffernd_lbox.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lbox.diminfo[0].shape = __pyx_pybuffernd_lbox.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lbox.diminfo[1].strides = __pyx_pybuffernd_lbox.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lbox.diminfo[1].shape = __pyx_pybuffernd_lbox.rcbuffer-&gt;pybuffer.shape[1];
    }
  }
  __pyx_t_7 = 0;
  __pyx_v_lbox = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_tuple__25 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_5, __pyx_int_2);<span class='error_goto'> if (unlikely(!__pyx_tuple__25)) __PYX_ERR(0, 566, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__25);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__25);
</pre><pre class="cython line score-0">&#xA0;<span class="">567</span>:         <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">cxy</span><span class="p">,</span> <span class="n">lcxy</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">568</span>:         <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">idex</span><span class="p">,</span> <span class="nf">w</span><span class="p">,</span> <span class="nf">l</span><span class="p">,</span> <span class="nf">xmin</span><span class="p">,</span> <span class="nf">ymin</span><span class="p">,</span> <span class="nf">xmax</span><span class="p">,</span> <span class="nf">ymax</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">569</span>:         <span class="n">xy</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">xy</span><span class="p">[[</span><span class="mf">0</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="mf">3</span><span class="p">]]</span></pre>
<pre class='cython code score-27 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 569, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_int_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_2);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_int_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 2, __pyx_int_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 3, __pyx_int_3);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_xy), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 569, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_xy), __pyx_slice__26, __pyx_t_6) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 569, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
/* … */
  __pyx_slice__26 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__26)) __PYX_ERR(0, 569, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__26);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__26);
</pre><pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">570</span>:         <span class="n">lxy</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">lxy</span><span class="p">[[</span><span class="mf">0</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="mf">3</span><span class="p">]]</span></pre>
<pre class='cython code score-27 '>  __pyx_t_6 = <span class='py_c_api'>PyList_New</span>(4);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 570, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 0, __pyx_int_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_2);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 1, __pyx_int_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 2, __pyx_int_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_6, 3, __pyx_int_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lxy), __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 570, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_lxy), __pyx_slice__27, __pyx_t_1) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 570, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
/* … */
  __pyx_slice__27 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__27)) __PYX_ERR(0, 570, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__27);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__27);
</pre><pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">571</span>:         <span class="n">w</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="mf">0.2</span><span class="o">*</span><span class="p">(</span><span class="n">xy</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="o">-</span><span class="n">xy</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span> <span class="o">+</span> <span class="mf">0.8</span><span class="o">*</span><span class="p">(</span><span class="n">lxy</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="o">-</span><span class="n">lxy</span><span class="p">[</span><span class="mf">0</span><span class="p">]))</span></pre>
<pre class='cython code score-16 '>  __pyx_t_8 = 2;
  __pyx_t_9 = 0;
  __pyx_t_10 = 2;
  __pyx_t_11 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(((0.2 * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_xy.rcbuffer-&gt;pybuffer.buf, __pyx_t_8, __pyx_pybuffernd_xy.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_xy.rcbuffer-&gt;pybuffer.buf, __pyx_t_9, __pyx_pybuffernd_xy.diminfo[0].strides)))) + (0.8 * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lxy.rcbuffer-&gt;pybuffer.buf, __pyx_t_10, __pyx_pybuffernd_lxy.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lxy.rcbuffer-&gt;pybuffer.buf, __pyx_t_11, __pyx_pybuffernd_lxy.diminfo[0].strides))))));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 571, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 571, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_6); if (unlikely((__pyx_t_12 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 571, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_v_w = __pyx_t_12;
</pre><pre class="cython line score-16" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">572</span>:         <span class="n">l</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="mf">0.2</span><span class="o">*</span><span class="p">(</span><span class="n">xy</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">-</span><span class="n">xy</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span> <span class="o">+</span> <span class="mf">0.8</span><span class="o">*</span><span class="p">(</span><span class="n">lxy</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span><span class="o">-</span><span class="n">lxy</span><span class="p">[</span><span class="mf">1</span><span class="p">]))</span></pre>
<pre class='cython code score-16 '>  __pyx_t_13 = 3;
  __pyx_t_14 = 1;
  __pyx_t_15 = 3;
  __pyx_t_16 = 1;
  __pyx_t_6 = <span class='py_c_api'>PyFloat_FromDouble</span>(((0.2 * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_xy.rcbuffer-&gt;pybuffer.buf, __pyx_t_13, __pyx_pybuffernd_xy.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_xy.rcbuffer-&gt;pybuffer.buf, __pyx_t_14, __pyx_pybuffernd_xy.diminfo[0].strides)))) + (0.8 * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lxy.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_lxy.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lxy.rcbuffer-&gt;pybuffer.buf, __pyx_t_16, __pyx_pybuffernd_lxy.diminfo[0].strides))))));<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 572, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 572, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_1); if (unlikely((__pyx_t_12 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 572, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_l = __pyx_t_12;
</pre><pre class="cython line score-56" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">573</span>:         <span class="n">box</span><span class="p">[</span><span class="mf">1</span><span class="p">,:],</span> <span class="n">lbox</span><span class="p">[</span><span class="mf">1</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">xy</span><span class="p">[[</span><span class="mf">0</span><span class="p">,</span><span class="mf">1</span><span class="p">]],</span> <span class="n">lxy</span><span class="p">[[</span><span class="mf">0</span><span class="p">,</span><span class="mf">1</span><span class="p">]]</span>   <span class="c"># xmin, ymin</span></pre>
<pre class='cython code score-56 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 573, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_int_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_int_1);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_xy), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 573, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 573, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_int_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_int_1);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lxy), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 573, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
/* … */
  __pyx_slice__28 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__28)) __PYX_ERR(0, 573, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__28);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__28);
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_box), __pyx_tuple__29, __pyx_t_6) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 573, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_tuple__29 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_1, __pyx_slice__28);<span class='error_goto'> if (unlikely(!__pyx_tuple__29)) __PYX_ERR(0, 573, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__29);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__29);
  __pyx_slice__30 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__30)) __PYX_ERR(0, 573, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__30);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__30);
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_lbox), __pyx_tuple__31, __pyx_t_2) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 573, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_tuple__31 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_1, __pyx_slice__30);<span class='error_goto'> if (unlikely(!__pyx_tuple__31)) __PYX_ERR(0, 573, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__31);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__31);
</pre><pre class="cython line score-56" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">574</span>:         <span class="n">box</span><span class="p">[</span><span class="mf">2</span><span class="p">,:],</span> <span class="n">lbox</span><span class="p">[</span><span class="mf">2</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">xy</span><span class="p">[[</span><span class="mf">0</span><span class="p">,</span><span class="mf">3</span><span class="p">]],</span> <span class="n">lxy</span><span class="p">[[</span><span class="mf">0</span><span class="p">,</span><span class="mf">3</span><span class="p">]]</span>   <span class="c"># xmin, ymax</span></pre>
<pre class='cython code score-56 '>  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 574, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_int_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 1, __pyx_int_3);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_xy), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 574, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 574, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_0);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_0);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_int_0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 1, __pyx_int_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lxy), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 574, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
/* … */
  __pyx_slice__32 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__32)) __PYX_ERR(0, 574, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__32);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__32);
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_box), __pyx_tuple__33, __pyx_t_6) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 574, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_tuple__33 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_2, __pyx_slice__32);<span class='error_goto'> if (unlikely(!__pyx_tuple__33)) __PYX_ERR(0, 574, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__33);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__33);
  __pyx_slice__34 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__34)) __PYX_ERR(0, 574, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__34);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__34);
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_lbox), __pyx_tuple__35, __pyx_t_1) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 574, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_tuple__35 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_2, __pyx_slice__34);<span class='error_goto'> if (unlikely(!__pyx_tuple__35)) __PYX_ERR(0, 574, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__35);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__35);
</pre><pre class="cython line score-56" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">575</span>:         <span class="n">box</span><span class="p">[</span><span class="mf">3</span><span class="p">,:],</span> <span class="n">lbox</span><span class="p">[</span><span class="mf">3</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">xy</span><span class="p">[[</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">]],</span> <span class="n">lxy</span><span class="p">[[</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">]]</span>   <span class="c"># xmax, ymax</span></pre>
<pre class='cython code score-56 '>  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 575, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_2);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_int_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_int_3);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_xy), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 575, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 575, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_2);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 0, __pyx_int_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_1, 1, __pyx_int_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lxy), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 575, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
/* … */
  __pyx_slice__36 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__36)) __PYX_ERR(0, 575, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__36);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__36);
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_box), __pyx_tuple__37, __pyx_t_6) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 575, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_tuple__37 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_3, __pyx_slice__36);<span class='error_goto'> if (unlikely(!__pyx_tuple__37)) __PYX_ERR(0, 575, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__37);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__37);
  __pyx_slice__38 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__38)) __PYX_ERR(0, 575, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__38);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__38);
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_lbox), __pyx_tuple__39, __pyx_t_2) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 575, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_tuple__39 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_3, __pyx_slice__38);<span class='error_goto'> if (unlikely(!__pyx_tuple__39)) __PYX_ERR(0, 575, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__39);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__39);
</pre><pre class="cython line score-56" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">576</span>:         <span class="n">box</span><span class="p">[</span><span class="mf">4</span><span class="p">,:],</span> <span class="n">lbox</span><span class="p">[</span><span class="mf">4</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">xy</span><span class="p">[[</span><span class="mf">2</span><span class="p">,</span><span class="mf">1</span><span class="p">]],</span> <span class="n">lxy</span><span class="p">[[</span><span class="mf">2</span><span class="p">,</span><span class="mf">1</span><span class="p">]]</span>   <span class="c"># xmax, ymin</span></pre>
<pre class='cython code score-56 '>  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 576, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_2);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_int_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 1, __pyx_int_1);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_xy), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 576, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyList_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 576, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_2);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 0, __pyx_int_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_2, 1, __pyx_int_1);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lxy), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 576, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
/* … */
  __pyx_slice__40 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__40)) __PYX_ERR(0, 576, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__40);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__40);
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_box), __pyx_tuple__41, __pyx_t_6) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 576, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_tuple__41 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_4, __pyx_slice__40);<span class='error_goto'> if (unlikely(!__pyx_tuple__41)) __PYX_ERR(0, 576, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__41);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__41);
  __pyx_slice__42 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__42)) __PYX_ERR(0, 576, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__42);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__42);
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_lbox), __pyx_tuple__43, __pyx_t_1) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 576, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_tuple__43 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_4, __pyx_slice__42);<span class='error_goto'> if (unlikely(!__pyx_tuple__43)) __PYX_ERR(0, 576, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__43);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__43);
</pre><pre class="cython line score-100" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">577</span>:         <span class="n">box</span><span class="p">[</span><span class="mf">0</span><span class="p">,:],</span> <span class="n">lbox</span><span class="p">[</span><span class="mf">0</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">(</span><span class="n">box</span><span class="p">[</span><span class="mf">3</span><span class="p">,:]</span> <span class="o">+</span> <span class="n">box</span><span class="p">[</span><span class="mf">1</span><span class="p">,:])</span> <span class="o">//</span> <span class="mf">2</span><span class="p">,</span> <span class="p">(</span><span class="n">lbox</span><span class="p">[</span><span class="mf">3</span><span class="p">,:]</span> <span class="o">+</span> <span class="n">lbox</span><span class="p">[</span><span class="mf">1</span><span class="p">,:])</span> <span class="o">//</span> <span class="mf">2</span> <span class="c"># center</span></pre>
<pre class='cython code score-100 '>  __pyx_slice__44 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__44)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__44);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__44);
/* … */
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_box), __pyx_tuple__45);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_tuple__45 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_3, __pyx_slice__44);<span class='error_goto'> if (unlikely(!__pyx_tuple__45)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__45);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__45);
  __pyx_slice__46 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__46)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__46);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__46);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_box), __pyx_tuple__47);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_2 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_1, __pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_FloorDivideObjC</span>(__pyx_t_2, __pyx_int_2, 2, 0);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_tuple__47 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_1, __pyx_slice__46);<span class='error_goto'> if (unlikely(!__pyx_tuple__47)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__47);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__47);
  __pyx_slice__48 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__48)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__48);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__48);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lbox), __pyx_tuple__49);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_tuple__49 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_3, __pyx_slice__48);<span class='error_goto'> if (unlikely(!__pyx_tuple__49)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__49);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__49);
  __pyx_slice__50 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__50)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__50);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__50);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lbox), __pyx_tuple__51);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_4 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_2, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_FloorDivideObjC</span>(__pyx_t_4, __pyx_int_2, 2, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_tuple__51 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_1, __pyx_slice__50);<span class='error_goto'> if (unlikely(!__pyx_tuple__51)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__51);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__51);
  __pyx_slice__52 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__52)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__52);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__52);
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_box), __pyx_tuple__53, __pyx_t_6) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_tuple__53 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_0, __pyx_slice__52);<span class='error_goto'> if (unlikely(!__pyx_tuple__53)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__53);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__53);
  __pyx_slice__54 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__54)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__54);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__54);
  if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_lbox), __pyx_tuple__55, __pyx_t_1) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_tuple__55 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_0, __pyx_slice__54);<span class='error_goto'> if (unlikely(!__pyx_tuple__55)) __PYX_ERR(0, 577, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__55);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__55);
</pre><pre class="cython line score-83" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">578</span>:         <span class="n">idex</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">((</span><span class="n">lbox</span> <span class="o">-</span> <span class="n">box</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mf">1</span><span class="p">))</span> <span class="c"># 距离最小的索引</span></pre>
<pre class='cython code score-83 '>  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_6, __pyx_n_s_argmin);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_6, __pyx_n_s_linalg);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_norm);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyNumber_Subtract</span>(((PyObject *)__pyx_v_lbox), ((PyObject *)__pyx_v_box));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_2);
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, __pyx_n_s_axis, __pyx_int_1) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 578, __pyx_L1_error)</span>
  __pyx_t_17 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_6, __pyx_t_3, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_17);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
    }
  }
  if (!__pyx_t_2) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_4, __pyx_t_17);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_17); __pyx_t_17 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_4)) {
      PyObject *__pyx_temp[2] = {__pyx_t_2, __pyx_t_17};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_17); __pyx_t_17 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_4)) {
      PyObject *__pyx_temp[2] = {__pyx_t_2, __pyx_t_17};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_17); __pyx_t_17 = 0;
    } else
    #endif
    {
      __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_2); __pyx_t_2 = NULL;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_17);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0+1, __pyx_t_17);
      __pyx_t_17 = 0;
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 578, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_1); if (unlikely((__pyx_t_12 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 578, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_v_idex = __pyx_t_12;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">579</span>:         <span class="k">if</span> <span class="n">idex</span> <span class="o">==</span> <span class="mf">0</span><span class="p">:</span> <span class="c"># 中心点最接近</span></pre>
<pre class='cython code score-0 '>  switch (__pyx_v_idex) {
    case 0:
/* … */
    break;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">580</span>:             <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">box</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">w</span><span class="o">//</span><span class="mf">2</span><span class="p">,</span> <span class="n">box</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">l</span><span class="o">//</span><span class="mf">2</span><span class="p">,</span> <span class="n">box</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">w</span><span class="o">//</span><span class="mf">2</span><span class="p">,</span> <span class="n">box</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">l</span><span class="o">//</span><span class="mf">2</span></pre>
<pre class='cython code score-0 '>    __pyx_t_18 = 0;
    __pyx_t_19 = 0;
    __pyx_t_12 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_18, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_19, __pyx_pybuffernd_box.diminfo[1].strides)) - (__pyx_v_w / 2));
    __pyx_t_20 = 0;
    __pyx_t_21 = 1;
    __pyx_t_22 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_20, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_21, __pyx_pybuffernd_box.diminfo[1].strides)) - (__pyx_v_l / 2));
    __pyx_t_23 = 0;
    __pyx_t_24 = 0;
    __pyx_t_25 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_23, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_24, __pyx_pybuffernd_box.diminfo[1].strides)) + (__pyx_v_w / 2));
    __pyx_t_26 = 0;
    __pyx_t_27 = 1;
    __pyx_t_28 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_26, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_27, __pyx_pybuffernd_box.diminfo[1].strides)) + (__pyx_v_l / 2));
    __pyx_v_xmin = __pyx_t_12;
    __pyx_v_ymin = __pyx_t_22;
    __pyx_v_xmax = __pyx_t_25;
    __pyx_v_ymax = __pyx_t_28;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">581</span>:         <span class="k">elif</span> <span class="n">idex</span> <span class="o">==</span> <span class="mf">1</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    case 1:
/* … */
    break;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">582</span>:             <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">0</span><span class="p">],</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">1</span><span class="p">],</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">l</span></pre>
<pre class='cython code score-0 '>    __pyx_t_29 = __pyx_v_idex;
    __pyx_t_30 = 0;
    __pyx_t_31 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_29, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_30, __pyx_pybuffernd_box.diminfo[1].strides));
    __pyx_t_32 = __pyx_v_idex;
    __pyx_t_33 = 1;
    __pyx_t_34 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_32, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_33, __pyx_pybuffernd_box.diminfo[1].strides));
    __pyx_t_35 = __pyx_v_idex;
    __pyx_t_36 = 0;
    __pyx_t_28 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_35, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_36, __pyx_pybuffernd_box.diminfo[1].strides)) + __pyx_v_w);
    __pyx_t_37 = __pyx_v_idex;
    __pyx_t_38 = 1;
    __pyx_t_25 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_37, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_38, __pyx_pybuffernd_box.diminfo[1].strides)) + __pyx_v_l);
    __pyx_v_xmin = __pyx_t_31;
    __pyx_v_ymin = __pyx_t_34;
    __pyx_v_xmax = __pyx_t_28;
    __pyx_v_ymax = __pyx_t_25;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">583</span>:         <span class="k">elif</span> <span class="n">idex</span> <span class="o">==</span> <span class="mf">2</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    case 2:
/* … */
    break;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">584</span>:             <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">0</span><span class="p">],</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">l</span><span class="p">,</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">w</span><span class="p">,</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_39 = __pyx_v_idex;
    __pyx_t_40 = 0;
    __pyx_t_34 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_39, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_40, __pyx_pybuffernd_box.diminfo[1].strides));
    __pyx_t_41 = __pyx_v_idex;
    __pyx_t_42 = 1;
    __pyx_t_25 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_41, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_42, __pyx_pybuffernd_box.diminfo[1].strides)) - __pyx_v_l);
    __pyx_t_43 = __pyx_v_idex;
    __pyx_t_44 = 0;
    __pyx_t_28 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_43, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_44, __pyx_pybuffernd_box.diminfo[1].strides)) + __pyx_v_w);
    __pyx_t_45 = __pyx_v_idex;
    __pyx_t_46 = 1;
    __pyx_t_31 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_45, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_46, __pyx_pybuffernd_box.diminfo[1].strides));
    __pyx_v_xmin = __pyx_t_34;
    __pyx_v_ymin = __pyx_t_25;
    __pyx_v_xmax = __pyx_t_28;
    __pyx_v_ymax = __pyx_t_31;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">585</span>:         <span class="k">elif</span> <span class="n">idex</span> <span class="o">==</span> <span class="mf">3</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    case 3:
/* … */
    break;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">586</span>:             <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">w</span><span class="p">,</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">l</span><span class="p">,</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">0</span><span class="p">],</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_47 = __pyx_v_idex;
    __pyx_t_48 = 0;
    __pyx_t_28 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_47, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_48, __pyx_pybuffernd_box.diminfo[1].strides)) - __pyx_v_w);
    __pyx_t_49 = __pyx_v_idex;
    __pyx_t_50 = 1;
    __pyx_t_25 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_49, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_50, __pyx_pybuffernd_box.diminfo[1].strides)) - __pyx_v_l);
    __pyx_t_51 = __pyx_v_idex;
    __pyx_t_52 = 0;
    __pyx_t_31 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_51, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_52, __pyx_pybuffernd_box.diminfo[1].strides));
    __pyx_t_53 = __pyx_v_idex;
    __pyx_t_54 = 1;
    __pyx_t_34 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_53, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_54, __pyx_pybuffernd_box.diminfo[1].strides));
    __pyx_v_xmin = __pyx_t_28;
    __pyx_v_ymin = __pyx_t_25;
    __pyx_v_xmax = __pyx_t_31;
    __pyx_v_ymax = __pyx_t_34;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">587</span>:         <span class="k">elif</span> <span class="n">idex</span> <span class="o">==</span> <span class="mf">4</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    case 4:
/* … */
    break;
    default: break;
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">588</span>:             <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">w</span><span class="p">,</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">1</span><span class="p">],</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">0</span><span class="p">],</span> <span class="n">box</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">l</span></pre>
<pre class='cython code score-0 '>    __pyx_t_55 = __pyx_v_idex;
    __pyx_t_56 = 0;
    __pyx_t_25 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_55, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_56, __pyx_pybuffernd_box.diminfo[1].strides)) - __pyx_v_w);
    __pyx_t_57 = __pyx_v_idex;
    __pyx_t_58 = 1;
    __pyx_t_34 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_57, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_58, __pyx_pybuffernd_box.diminfo[1].strides));
    __pyx_t_59 = __pyx_v_idex;
    __pyx_t_60 = 0;
    __pyx_t_31 = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_59, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_60, __pyx_pybuffernd_box.diminfo[1].strides));
    __pyx_t_61 = __pyx_v_idex;
    __pyx_t_62 = 1;
    __pyx_t_28 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_61, __pyx_pybuffernd_box.diminfo[0].strides, __pyx_t_62, __pyx_pybuffernd_box.diminfo[1].strides)) + __pyx_v_l);
    __pyx_v_xmin = __pyx_t_25;
    __pyx_v_ymin = __pyx_t_34;
    __pyx_v_xmax = __pyx_t_31;
    __pyx_v_ymax = __pyx_t_28;
</pre><pre class="cython line score-67" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">589</span>:         <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-67 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_asarray);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_xmin);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_17 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_xmax);<span class='error_goto'> if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_17);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_ymin);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_ymax);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_63 = <span class='py_c_api'>PyList_New</span>(4);<span class='error_goto'> if (unlikely(!__pyx_t_63)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_63);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_63, 0, __pyx_t_4);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_17);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_63, 1, __pyx_t_17);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_63, 2, __pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_63, 3, __pyx_t_6);
  __pyx_t_4 = 0;
  __pyx_t_17 = 0;
  __pyx_t_2 = 0;
  __pyx_t_6 = 0;
  __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_6)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_6);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_6, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
  __pyx_t_6 = NULL;
  __pyx_t_5 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_6 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_6)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_6);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_5 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_63, __pyx_t_2};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_63); __pyx_t_63 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_6, __pyx_t_63, __pyx_t_2};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_5, 2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_6); __pyx_t_6 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_63); __pyx_t_63 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  {
    __pyx_t_17 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_17)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_17);
    if (__pyx_t_6) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_6); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_17, 0, __pyx_t_6); __pyx_t_6 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_63);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_17, 0+__pyx_t_5, __pyx_t_63);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_17, 1+__pyx_t_5, __pyx_t_2);
    __pyx_t_63 = 0;
    __pyx_t_2 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_17, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 589, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_17); __pyx_t_17 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">590</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">591</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">592</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">593</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-61" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">594</span>: <span class="k">def</span> <span class="nf">heading</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">vxy</span><span class="p">,</span> <span class="nb">long</span> <span class="n">thresh</span><span class="o">=</span><span class="mf">300</span><span class="p">):</span></pre>
<pre class='cython code score-61 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_31heading(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_31heading = {"heading", (PyCFunction)__pyx_pw_10Lidar_core_31heading, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_31heading(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_vxy = 0;
  long __pyx_v_thresh;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("heading (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_vxy,&amp;__pyx_n_s_thresh,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_vxy)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (kw_args &gt; 0) {
          PyObject* value = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_thresh);
          if (value) { values[1] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "heading") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 594, __pyx_L3_error)</span>
      }
    } else {
      switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_vxy = ((PyArrayObject *)values[0]);
    if (values[1]) {
      __pyx_v_thresh = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(values[1]); if (unlikely((__pyx_v_thresh == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 594, __pyx_L3_error)</span>
    } else {
      __pyx_v_thresh = ((long)0x12C);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("heading", 0, 1, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 594, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.heading", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_vxy), __pyx_ptype_5numpy_ndarray, 1, "vxy", 0))) <span class='error_goto'>__PYX_ERR(0, 594, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_30heading(__pyx_self, __pyx_v_vxy, __pyx_v_thresh);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_30heading(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_vxy, long __pyx_v_thresh) {
  double __pyx_v_vx;
  double __pyx_v_vy;
  double __pyx_v_heading;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_vxy;
  __Pyx_Buffer __pyx_pybuffer_vxy;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("heading", 0);
  __pyx_pybuffer_vxy.pybuffer.buf = NULL;
  __pyx_pybuffer_vxy.refcount = 0;
  __pyx_pybuffernd_vxy.data = NULL;
  __pyx_pybuffernd_vxy.rcbuffer = &amp;__pyx_pybuffer_vxy;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_vxy.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_vxy, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 594, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_vxy.diminfo[0].strides = __pyx_pybuffernd_vxy.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_vxy.diminfo[0].shape = __pyx_pybuffernd_vxy.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_vxy.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.heading", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_vxy.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__148 = <span class='py_c_api'>PyTuple_Pack</span>(5, __pyx_n_s_vxy, __pyx_n_s_thresh, __pyx_n_s_vx, __pyx_n_s_vy, __pyx_n_s_heading);<span class='error_goto'> if (unlikely(!__pyx_tuple__148)) __PYX_ERR(0, 594, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__148);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__148);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_31heading, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 594, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_heading, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 594, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__149 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(2, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__148, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_heading, 594, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__149)) __PYX_ERR(0, 594, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">595</span>:     <span class="c"># 根据速度向量求航向角</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">596</span>:     <span class="c"># 6月25日改：输出无效值的阈值改为输入参数，默认值提高到800</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">597</span>:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">vx</span> <span class="o">=</span> <span class="n">vxy</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">vy</span> <span class="o">=</span> <span class="n">vxy</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="n">heading</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = 0;
  __pyx_v_vx = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_vxy.rcbuffer-&gt;pybuffer.buf, __pyx_t_1, __pyx_pybuffernd_vxy.diminfo[0].strides));
  __pyx_t_2 = 1;
  __pyx_v_vy = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_vxy.rcbuffer-&gt;pybuffer.buf, __pyx_t_2, __pyx_pybuffernd_vxy.diminfo[0].strides));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">598</span>:     <span class="k">if</span> <span class="n">sqrt</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">vx</span><span class="p">,</span><span class="mf">2.</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">vy</span><span class="p">,</span><span class="mf">2.</span><span class="p">))</span> <span class="o">&lt;</span> <span class="n">thresh</span><span class="p">:</span> <span class="c">#</span></pre>
<pre class='cython code score-0 '>  __pyx_t_3 = ((sqrt((pow(__pyx_v_vx, 2.) + pow(__pyx_v_vy, 2.))) &lt; __pyx_v_thresh) != 0);
  if (__pyx_t_3) {
/* … */
  }
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">599</span>:         <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">(</span><span class="mf">3600</span><span class="p">)</span>  <span class="c"># 速度小于thresh，输出一个无效值</span></pre>
<pre class='cython code score-14 '>    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 599, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 599, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_tuple__56, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 599, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_r = __pyx_t_4;
    __pyx_t_4 = 0;
    goto __pyx_L0;
/* … */
  __pyx_tuple__56 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_int_3600);<span class='error_goto'> if (unlikely(!__pyx_tuple__56)) __PYX_ERR(0, 599, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__56);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__56);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">600</span>:     <span class="k">elif</span> <span class="n">vy</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">:</span> <span class="n">heading</span> <span class="o">=</span> <span class="n">atan</span><span class="p">(</span><span class="n">vx</span> <span class="o">/</span> <span class="n">vy</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>  __pyx_t_3 = ((__pyx_v_vy &gt; 0.0) != 0);
  if (__pyx_t_3) {
    __pyx_v_heading = atan((__pyx_v_vx / __pyx_v_vy));
    goto __pyx_L3;
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">601</span>:     <span class="k">elif</span> <span class="n">vy</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span> <span class="n">heading</span> <span class="o">=</span> <span class="n">atan</span><span class="p">(</span><span class="n">vx</span> <span class="o">/</span> <span class="n">vy</span><span class="p">)</span> <span class="o">+</span> <span class="n">M_PI</span></pre>
<pre class='cython code score-0 '>  __pyx_t_3 = ((__pyx_v_vy &lt; 0.0) != 0);
  if (__pyx_t_3) {
    __pyx_v_heading = (atan((__pyx_v_vx / __pyx_v_vy)) + M_PI);
    goto __pyx_L3;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">602</span>:     <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">603</span>:         <span class="k">if</span> <span class="n">vx</span> <span class="o">&gt;</span> <span class="mf">0</span><span class="p">:</span> <span class="n">heading</span> <span class="o">=</span> <span class="n">M_PI</span> <span class="o">/</span> <span class="mf">2.</span></pre>
<pre class='cython code score-0 '>  /*else*/ {
    __pyx_t_3 = ((__pyx_v_vx &gt; 0.0) != 0);
    if (__pyx_t_3) {
      __pyx_v_heading = (M_PI / 2.);
      goto __pyx_L4;
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">604</span>:         <span class="k">elif</span> <span class="n">vx</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span> <span class="n">heading</span> <span class="o">=</span> <span class="n">M_PI</span> <span class="o">*</span> <span class="p">(</span><span class="mf">3</span> <span class="o">/</span> <span class="mf">2.</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>    __pyx_t_3 = ((__pyx_v_vx &lt; 0.0) != 0);
    if (__pyx_t_3) {
      __pyx_v_heading = (M_PI * (3.0 / 2.));
      goto __pyx_L4;
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">605</span>:         <span class="k">else</span><span class="p">:</span> <span class="n">heading</span> <span class="o">=</span> <span class="mf">2</span> <span class="o">*</span> <span class="n">M_PI</span></pre>
<pre class='cython code score-0 '>    /*else*/ {
      __pyx_v_heading = (2.0 * M_PI);
    }
    __pyx_L4:;
  }
  __pyx_L3:;
</pre><pre class="cython line score-123" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">606</span>:     <span class="n">heading</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">heading</span><span class="p">)</span> <span class="o">+</span> <span class="mf">360</span> <span class="k">if</span> <span class="o">-</span><span class="n">M_PI</span><span class="o">/</span><span class="mf">2</span> <span class="o">&lt;</span> <span class="n">heading</span> <span class="o">&lt;</span> <span class="mf">0</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">heading</span><span class="p">)</span></pre>
<pre class='cython code score-123 '>  __pyx_t_3 = (((-M_PI) / 2.0) &lt; __pyx_v_heading);
  if (__pyx_t_3) {
    __pyx_t_3 = (__pyx_v_heading &lt; 0.0);
  }
  if ((__pyx_t_3 != 0)) {
    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_degrees);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_5 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_heading);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_8 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
      __pyx_t_8 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
      if (likely(__pyx_t_8)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_8);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
      }
    }
    if (!__pyx_t_8) {
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_7, __pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    } else {
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
        PyObject *__pyx_temp[2] = {__pyx_t_8, __pyx_t_5};
        __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
        PyObject *__pyx_temp[2] = {__pyx_t_8, __pyx_t_5};
        __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      {
        __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_8); __pyx_t_8 = NULL;
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0+1, __pyx_t_5);
        __pyx_t_5 = 0;
        __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_9, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
      }
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_AddObjC</span>(__pyx_t_4, __pyx_int_360, 0x168, 0);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_10 = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(__pyx_t_7); if (unlikely((__pyx_t_10 == (double)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 606, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_6 = __pyx_t_10;
  } else {
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_degrees);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_heading);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_5 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_9))) {
      __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_9);
      if (likely(__pyx_t_5)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_9);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_9, function);
      }
    }
    if (!__pyx_t_5) {
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_9, __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    } else {
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_9)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_9, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_9)) {
        PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_4};
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_9, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      } else
      #endif
      {
        __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0+1, __pyx_t_4);
        __pyx_t_4 = 0;
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_9, __pyx_t_8, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 606, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      }
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
    __pyx_t_10 = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(__pyx_t_7); if (unlikely((__pyx_t_10 == (double)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 606, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_6 = __pyx_t_10;
  }
  __pyx_v_heading = __pyx_t_6;
</pre><pre class="cython line score-9" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">607</span>:     <span class="k">return</span> <span class="nb">long</span><span class="p">(</span><span class="n">heading</span><span class="o">*</span><span class="mf">10</span><span class="p">)</span> <span class="c"># 返回10倍角度值</span></pre>
<pre class='cython code score-9 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_7 = <span class='py_c_api'>PyFloat_FromDouble</span>((__pyx_v_heading * 10.0));<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 607, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __pyx_t_9 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_9)) __PYX_ERR(0, 607, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_r = __pyx_t_9;
  __pyx_t_9 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">608</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">609</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">610</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">611</span>: <span class="c">#ini_heading_array = [3309,1509,1959,2409,609,1059]</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">612</span>: <span class="c">#[[100,-4000],[100,2500],[1500,2500],[2000,1500],[3000,600],[3000,-950],[2000,-1700],[1500,-4000],[100, -4000]]</span></pre>
<pre class="cython line score-60" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">613</span>: <span class="k">def</span> <span class="nf">get_ini_heading</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">target_position</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">ini_headings</span><span class="p">):</span></pre>
<pre class='cython code score-60 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_33get_ini_heading(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_33get_ini_heading = {"get_ini_heading", (PyCFunction)__pyx_pw_10Lidar_core_33get_ini_heading, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_33get_ini_heading(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_target_position = 0;
  PyArrayObject *__pyx_v_ini_headings = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("get_ini_heading (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_target_position,&amp;__pyx_n_s_ini_headings,0};
    PyObject* values[2] = {0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_target_position)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_ini_headings)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("get_ini_heading", 1, 2, 2, 1); <span class='error_goto'>__PYX_ERR(0, 613, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "get_ini_heading") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 613, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 2) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
    }
    __pyx_v_target_position = ((PyArrayObject *)values[0]);
    __pyx_v_ini_headings = ((PyArrayObject *)values[1]);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("get_ini_heading", 1, 2, 2, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 613, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.get_ini_heading", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_target_position), __pyx_ptype_5numpy_ndarray, 1, "target_position", 0))) <span class='error_goto'>__PYX_ERR(0, 613, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_ini_headings), __pyx_ptype_5numpy_ndarray, 1, "ini_headings", 0))) <span class='error_goto'>__PYX_ERR(0, 613, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_32get_ini_heading(__pyx_self, __pyx_v_target_position, __pyx_v_ini_headings);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_32get_ini_heading(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_target_position, PyArrayObject *__pyx_v_ini_headings) {
  long __pyx_v_px;
  long __pyx_v_py;
  long __pyx_v_ini_heading;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_ini_headings;
  __Pyx_Buffer __pyx_pybuffer_ini_headings;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target_position;
  __Pyx_Buffer __pyx_pybuffer_target_position;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("get_ini_heading", 0);
  __pyx_pybuffer_target_position.pybuffer.buf = NULL;
  __pyx_pybuffer_target_position.refcount = 0;
  __pyx_pybuffernd_target_position.data = NULL;
  __pyx_pybuffernd_target_position.rcbuffer = &amp;__pyx_pybuffer_target_position;
  __pyx_pybuffer_ini_headings.pybuffer.buf = NULL;
  __pyx_pybuffer_ini_headings.refcount = 0;
  __pyx_pybuffernd_ini_headings.data = NULL;
  __pyx_pybuffernd_ini_headings.rcbuffer = &amp;__pyx_pybuffer_ini_headings;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_position.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target_position, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 613, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_target_position.diminfo[0].strides = __pyx_pybuffernd_target_position.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target_position.diminfo[0].shape = __pyx_pybuffernd_target_position.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_ini_headings, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 613, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_ini_headings.diminfo[0].strides = __pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_ini_headings.diminfo[0].shape = __pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_12);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_position.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.get_ini_heading", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_position.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__150 = <span class='py_c_api'>PyTuple_Pack</span>(5, __pyx_n_s_target_position, __pyx_n_s_ini_headings, __pyx_n_s_px, __pyx_n_s_py, __pyx_n_s_ini_heading);<span class='error_goto'> if (unlikely(!__pyx_tuple__150)) __PYX_ERR(0, 613, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__150);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__150);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_33get_ini_heading, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 613, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_get_ini_heading, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 613, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__151 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(2, 0, 5, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__150, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_get_ini_heading, 613, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__151)) __PYX_ERR(0, 613, __pyx_L1_error)</span>
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">614</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">px</span><span class="p">,</span> <span class="nf">py</span><span class="p">,</span> <span class="nf">ini_heading</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_ini_heading = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">615</span>:     <span class="n">px</span> <span class="o">=</span> <span class="n">target_position</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>  __pyx_t_1 = 0;
  __pyx_v_px = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_position.rcbuffer-&gt;pybuffer.buf, __pyx_t_1, __pyx_pybuffernd_target_position.diminfo[0].strides));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">616</span>:     <span class="n">py</span> <span class="o">=</span> <span class="n">target_position</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>  __pyx_t_2 = 1;
  __pyx_v_py = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_position.rcbuffer-&gt;pybuffer.buf, __pyx_t_2, __pyx_pybuffernd_target_position.diminfo[0].strides));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">617</span>:     <span class="k">if</span> <span class="mf">100</span><span class="o">&lt;</span> <span class="n">px</span> <span class="o">&lt;</span> <span class="mf">800</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_3 = (0x64 &lt; __pyx_v_px);
  if (__pyx_t_3) {
    __pyx_t_3 = (__pyx_v_px &lt; 0x320);
  }
  __pyx_t_4 = (__pyx_t_3 != 0);
  if (__pyx_t_4) {
/* … */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">618</span>:         <span class="n">ini_heading</span> <span class="o">=</span> <span class="n">ini_headings</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_5 = 0;
    __pyx_v_ini_heading = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer.buf, __pyx_t_5, __pyx_pybuffernd_ini_headings.diminfo[0].strides));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">619</span>:     <span class="k">if</span> <span class="p">(</span><span class="mf">800</span> <span class="o">&lt;=</span> <span class="n">px</span> <span class="o">&lt;=</span> <span class="mf">1400</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">px</span> <span class="o">&gt;=</span><span class="mf">800</span> <span class="ow">and</span> <span class="n">py</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">2200</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_3 = (0x320 &lt;= __pyx_v_px);
  if (__pyx_t_3) {
    __pyx_t_3 = (__pyx_v_px &lt;= 0x578);
  }
  __pyx_t_6 = (__pyx_t_3 != 0);
  if (!__pyx_t_6) {
  } else {
    __pyx_t_4 = __pyx_t_6;
    goto __pyx_L5_bool_binop_done;
  }
  __pyx_t_6 = ((__pyx_v_px &gt;= 0x320) != 0);
  if (__pyx_t_6) {
  } else {
    __pyx_t_4 = __pyx_t_6;
    goto __pyx_L5_bool_binop_done;
  }
  __pyx_t_6 = ((__pyx_v_py &lt; -2200L) != 0);
  __pyx_t_4 = __pyx_t_6;
  __pyx_L5_bool_binop_done:;
  if (__pyx_t_4) {
/* … */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">620</span>:         <span class="n">ini_heading</span> <span class="o">=</span> <span class="n">ini_headings</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_7 = 1;
    __pyx_v_ini_heading = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer.buf, __pyx_t_7, __pyx_pybuffernd_ini_headings.diminfo[0].strides));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">621</span>:     <span class="k">if</span> <span class="n">px</span> <span class="o">&gt;</span> <span class="mf">1400</span> <span class="ow">and</span> <span class="o">-</span><span class="mf">2200</span> <span class="o">&lt;=</span> <span class="n">py</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">950</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_6 = ((__pyx_v_px &gt; 0x578) != 0);
  if (__pyx_t_6) {
  } else {
    __pyx_t_4 = __pyx_t_6;
    goto __pyx_L9_bool_binop_done;
  }
  __pyx_t_6 = (-2200L &lt;= __pyx_v_py);
  if (__pyx_t_6) {
    __pyx_t_6 = (__pyx_v_py &lt;= -950L);
  }
  __pyx_t_3 = (__pyx_t_6 != 0);
  __pyx_t_4 = __pyx_t_3;
  __pyx_L9_bool_binop_done:;
  if (__pyx_t_4) {
/* … */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">622</span>:         <span class="n">ini_heading</span> <span class="o">=</span> <span class="n">ini_headings</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_8 = 2;
    __pyx_v_ini_heading = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer.buf, __pyx_t_8, __pyx_pybuffernd_ini_headings.diminfo[0].strides));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">623</span>:     <span class="k">if</span> <span class="n">px</span> <span class="o">&gt;</span> <span class="mf">1400</span> <span class="ow">and</span> <span class="o">-</span><span class="mf">950</span> <span class="o">&lt;</span> <span class="n">py</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mf">200</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_3 = ((__pyx_v_px &gt; 0x578) != 0);
  if (__pyx_t_3) {
  } else {
    __pyx_t_4 = __pyx_t_3;
    goto __pyx_L12_bool_binop_done;
  }
  __pyx_t_3 = (-950L &lt; __pyx_v_py);
  if (__pyx_t_3) {
    __pyx_t_3 = (__pyx_v_py &lt;= -200L);
  }
  __pyx_t_6 = (__pyx_t_3 != 0);
  __pyx_t_4 = __pyx_t_6;
  __pyx_L12_bool_binop_done:;
  if (__pyx_t_4) {
/* … */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">624</span>:         <span class="n">ini_heading</span> <span class="o">=</span> <span class="n">ini_headings</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_9 = 3;
    __pyx_v_ini_heading = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer.buf, __pyx_t_9, __pyx_pybuffernd_ini_headings.diminfo[0].strides));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">625</span>:     <span class="k">if</span> <span class="n">px</span> <span class="o">&gt;</span> <span class="mf">1400</span> <span class="ow">and</span> <span class="o">-</span><span class="mf">200</span> <span class="o">&lt;</span> <span class="n">py</span> <span class="o">&lt;=</span> <span class="mf">600</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_6 = ((__pyx_v_px &gt; 0x578) != 0);
  if (__pyx_t_6) {
  } else {
    __pyx_t_4 = __pyx_t_6;
    goto __pyx_L15_bool_binop_done;
  }
  __pyx_t_6 = (-200L &lt; __pyx_v_py);
  if (__pyx_t_6) {
    __pyx_t_6 = (__pyx_v_py &lt;= 0x258);
  }
  __pyx_t_3 = (__pyx_t_6 != 0);
  __pyx_t_4 = __pyx_t_3;
  __pyx_L15_bool_binop_done:;
  if (__pyx_t_4) {
/* … */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">626</span>:         <span class="n">ini_heading</span> <span class="o">=</span> <span class="n">ini_headings</span><span class="p">[</span><span class="mf">4</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_10 = 4;
    __pyx_v_ini_heading = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer.buf, __pyx_t_10, __pyx_pybuffernd_ini_headings.diminfo[0].strides));
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">627</span>:     <span class="k">if</span> <span class="n">px</span> <span class="o">&gt;</span> <span class="mf">1400</span> <span class="ow">and</span> <span class="mf">600</span> <span class="o">&lt;</span> <span class="n">py</span> <span class="o">&lt;=</span> <span class="mf">2500</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>  __pyx_t_3 = ((__pyx_v_px &gt; 0x578) != 0);
  if (__pyx_t_3) {
  } else {
    __pyx_t_4 = __pyx_t_3;
    goto __pyx_L18_bool_binop_done;
  }
  __pyx_t_3 = (0x258 &lt; __pyx_v_py);
  if (__pyx_t_3) {
    __pyx_t_3 = (__pyx_v_py &lt;= 0x9C4);
  }
  __pyx_t_6 = (__pyx_t_3 != 0);
  __pyx_t_4 = __pyx_t_6;
  __pyx_L18_bool_binop_done:;
  if (__pyx_t_4) {
/* … */
  }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">628</span>:         <span class="n">ini_heading</span> <span class="o">=</span> <span class="n">ini_headings</span><span class="p">[</span><span class="mf">5</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_11 = 5;
    __pyx_v_ini_heading = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer.buf, __pyx_t_11, __pyx_pybuffernd_ini_headings.diminfo[0].strides));
</pre><pre class="cython line score-3" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">629</span>:     <span class="k">return</span> <span class="n">ini_heading</span></pre>
<pre class='cython code score-3 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_12 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_ini_heading);<span class='error_goto'> if (unlikely(!__pyx_t_12)) __PYX_ERR(0, 629, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_12);
  __pyx_r = __pyx_t_12;
  __pyx_t_12 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">630</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">631</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">632</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-80" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">633</span>: <span class="k">def</span> <span class="nf">lidar2UTM</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">coordinate</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">R_c2w</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">P0_UTM</span><span class="p">):</span></pre>
<pre class='cython code score-80 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_35lidar2UTM(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_35lidar2UTM = {"lidar2UTM", (PyCFunction)__pyx_pw_10Lidar_core_35lidar2UTM, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_35lidar2UTM(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_coordinate = 0;
  PyArrayObject *__pyx_v_R_c2w = 0;
  PyArrayObject *__pyx_v_P0_UTM = 0;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("lidar2UTM (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_coordinate,&amp;__pyx_n_s_R_c2w,&amp;__pyx_n_s_P0_UTM,0};
    PyObject* values[3] = {0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_coordinate)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_R_c2w)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lidar2UTM", 1, 3, 3, 1); <span class='error_goto'>__PYX_ERR(0, 633, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_P0_UTM)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lidar2UTM", 1, 3, 3, 2); <span class='error_goto'>__PYX_ERR(0, 633, __pyx_L3_error)</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lidar2UTM") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 633, __pyx_L3_error)</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 3) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
    }
    __pyx_v_coordinate = ((PyArrayObject *)values[0]);
    __pyx_v_R_c2w = ((PyArrayObject *)values[1]);
    __pyx_v_P0_UTM = ((PyArrayObject *)values[2]);
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lidar2UTM", 1, 3, 3, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 633, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.lidar2UTM", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_coordinate), __pyx_ptype_5numpy_ndarray, 1, "coordinate", 0))) <span class='error_goto'>__PYX_ERR(0, 633, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_R_c2w), __pyx_ptype_5numpy_ndarray, 1, "R_c2w", 0))) <span class='error_goto'>__PYX_ERR(0, 633, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_P0_UTM), __pyx_ptype_5numpy_ndarray, 1, "P0_UTM", 0))) <span class='error_goto'>__PYX_ERR(0, 633, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_34lidar2UTM(__pyx_self, __pyx_v_coordinate, __pyx_v_R_c2w, __pyx_v_P0_UTM);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_34lidar2UTM(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_coordinate, PyArrayObject *__pyx_v_R_c2w, PyArrayObject *__pyx_v_P0_UTM) {
  PyObject *__pyx_v_coordinate_rotation = NULL;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_P0_UTM;
  __Pyx_Buffer __pyx_pybuffer_P0_UTM;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_R_c2w;
  __Pyx_Buffer __pyx_pybuffer_R_c2w;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_coordinate;
  __Pyx_Buffer __pyx_pybuffer_coordinate;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("lidar2UTM", 0);
  __pyx_pybuffer_coordinate.pybuffer.buf = NULL;
  __pyx_pybuffer_coordinate.refcount = 0;
  __pyx_pybuffernd_coordinate.data = NULL;
  __pyx_pybuffernd_coordinate.rcbuffer = &amp;__pyx_pybuffer_coordinate;
  __pyx_pybuffer_R_c2w.pybuffer.buf = NULL;
  __pyx_pybuffer_R_c2w.refcount = 0;
  __pyx_pybuffernd_R_c2w.data = NULL;
  __pyx_pybuffernd_R_c2w.rcbuffer = &amp;__pyx_pybuffer_R_c2w;
  __pyx_pybuffer_P0_UTM.pybuffer.buf = NULL;
  __pyx_pybuffer_P0_UTM.refcount = 0;
  __pyx_pybuffernd_P0_UTM.data = NULL;
  __pyx_pybuffernd_P0_UTM.rcbuffer = &amp;__pyx_pybuffer_P0_UTM;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_coordinate.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_coordinate, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 633, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_coordinate.diminfo[0].strides = __pyx_pybuffernd_coordinate.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_coordinate.diminfo[0].shape = __pyx_pybuffernd_coordinate.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_R_c2w, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 633, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_R_c2w.diminfo[0].strides = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_R_c2w.diminfo[0].shape = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_R_c2w.diminfo[1].strides = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_R_c2w.diminfo[1].shape = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_P0_UTM, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 633, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_P0_UTM.diminfo[0].strides = __pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_P0_UTM.diminfo[0].shape = __pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_coordinate.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.lidar2UTM", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_coordinate.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_coordinate_rotation);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__152 = <span class='py_c_api'>PyTuple_Pack</span>(4, __pyx_n_s_coordinate, __pyx_n_s_R_c2w, __pyx_n_s_P0_UTM, __pyx_n_s_coordinate_rotation);<span class='error_goto'> if (unlikely(!__pyx_tuple__152)) __PYX_ERR(0, 633, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__152);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__152);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_35lidar2UTM, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 633, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_lidar2UTM, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 633, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__153 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(3, 0, 4, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__152, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_lidar2UTM, 633, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__153)) __PYX_ERR(0, 633, __pyx_L1_error)</span>
</pre><pre class="cython line score-42" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">634</span>:     <span class="n">coordinate_rotation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">coordinate</span><span class="p">)</span></pre>
<pre class='cython code score-42 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 634, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_copy);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 634, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
    }
  }
  if (!__pyx_t_2) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, ((PyObject *)__pyx_v_coordinate));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 634, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_2, ((PyObject *)__pyx_v_coordinate)};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 634, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_2, ((PyObject *)__pyx_v_coordinate)};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 634, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 634, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_2); __pyx_t_2 = NULL;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_coordinate));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_coordinate));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+1, ((PyObject *)__pyx_v_coordinate));
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 634, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_coordinate_rotation = __pyx_t_1;
  __pyx_t_1 = 0;
</pre><pre class="cython line score-65" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">635</span>:     <span class="n">coordinate_rotation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">R_c2w</span><span class="p">,</span> <span class="n">coordinate</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span></pre>
<pre class='cython code score-65 '>  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 635, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_dot);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 635, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_coordinate), __pyx_n_s_T);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 635, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, ((PyObject *)__pyx_v_R_c2w), __pyx_t_4};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 635, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, ((PyObject *)__pyx_v_R_c2w), __pyx_t_4};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 635, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 635, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_5) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_R_c2w));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_R_c2w));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, ((PyObject *)__pyx_v_R_c2w));
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_4);
    __pyx_t_4 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 635, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_transpose);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 635, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
    }
  }
  if (__pyx_t_3) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 635, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 635, __pyx_L1_error)</span>
  }
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_coordinate_rotation, __pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">636</span>:     <span class="k">if</span> <span class="n">P0_UTM</span><span class="o">.</span><span class="n">any</span><span class="p">():</span></pre>
<pre class='cython code score-21 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(((PyObject *)__pyx_v_P0_UTM), __pyx_n_s_any);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 636, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
    }
  }
  if (__pyx_t_3) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 636, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  } else {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 636, __pyx_L1_error)</span>
  }
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_8 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 636, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (__pyx_t_8) {
/* … */
  }
</pre><pre class="cython line score-6" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">637</span>:         <span class="n">coordinate_rotation</span> <span class="o">=</span> <span class="n">coordinate_rotation</span> <span class="o">+</span> <span class="n">P0_UTM</span></pre>
<pre class='cython code score-6 '>    __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_v_coordinate_rotation, ((PyObject *)__pyx_v_P0_UTM));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 637, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_coordinate_rotation, __pyx_t_1);
    __pyx_t_1 = 0;
</pre><pre class="cython line score-43" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">638</span>:     <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">(</span><span class="n">coordinate_rotation</span><span class="p">)</span></pre>
<pre class='cython code score-43 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 638, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 638, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
    }
  }
  if (!__pyx_t_2) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_v_coordinate_rotation);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 638, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_2, __pyx_v_coordinate_rotation};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 638, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_2, __pyx_v_coordinate_rotation};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 638, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    } else
    #endif
    {
      __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 638, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_2); __pyx_t_2 = NULL;
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_coordinate_rotation);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_coordinate_rotation);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+1, __pyx_v_coordinate_rotation);
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 638, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">639</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">640</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">641</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">642</span>: <span class="c">#功能：对跟踪到的目标进行处理</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">643</span>: <span class="c">#输入：</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">644</span>: <span class="c">#    target_3Dlist:历史目标和当前目标的对应关系（目标对应关系）</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">645</span>: <span class="c">#    target_3Dlist_num:历史目标和当前目标的对应关系（目标的对应数量关系）</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">646</span>: <span class="c">#    lidar_state：状态信息（ID[0], class[1], xc[2], yc[3], vx[4], vy[5], xmin[6], xmax[7], ymin[8], ymax[9], </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">647</span>: <span class="c">#              zmin[10], zmax[11], I[12], life[13], heading[14]）</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">648</span>: <span class="c">#    lidar_predict:class(0), xc(1), yc(2), vx(3), vy(4), xmin(5), xmax(6), ymin(7), ymax(8)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">649</span>: <span class="c">#输出：</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">650</span>: <span class="c">#    selected：未被跟踪到的历史目标的索引</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">651</span>: <span class="c">#    lidar_state:更新后的状态信息</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">652</span>: <span class="c">#Edited by HOUXUEYUAN at 20210701</span></pre>
<pre class="cython line score-200" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">653</span>: <span class="k">def</span> <span class="nf">tracked_targets_process</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">3</span><span class="p">]</span> <span class="n">target_3Dlist</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">target_3Dlist_num</span><span class="p">,</span></pre>
<pre class='cython code score-200 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_37tracked_targets_process(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_37tracked_targets_process = {"tracked_targets_process", (PyCFunction)__pyx_pw_10Lidar_core_37tracked_targets_process, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_37tracked_targets_process(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_target_3Dlist = 0;
  PyArrayObject *__pyx_v_target_3Dlist_num = 0;
  PyArrayObject *__pyx_v_lidar_state = 0;
  PyArrayObject *__pyx_v_last_lidar_state = 0;
  PyArrayObject *__pyx_v_lidar_predict = 0;
  long __pyx_v_full_life;
  PyArrayObject *__pyx_v_R_c2w = 0;
  PyArrayObject *__pyx_v_P0_UTM = 0;
  double __pyx_v_dt;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("tracked_targets_process (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_target_3Dlist,&amp;__pyx_n_s_target_3Dlist_num,&amp;__pyx_n_s_lidar_state,&amp;__pyx_n_s_last_lidar_state,&amp;__pyx_n_s_lidar_predict,&amp;__pyx_n_s_full_life,&amp;__pyx_n_s_R_c2w,&amp;__pyx_n_s_P0_UTM,&amp;__pyx_n_s_dt,0};
    PyObject* values[9] = {0,0,0,0,0,0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  9: values[8] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 8);
        CYTHON_FALLTHROUGH;
        case  8: values[7] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7);
        CYTHON_FALLTHROUGH;
        case  7: values[6] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6);
        CYTHON_FALLTHROUGH;
        case  6: values[5] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_target_3Dlist)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_target_3Dlist_num)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("tracked_targets_process", 0, 8, 9, 1); <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_lidar_state)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("tracked_targets_process", 0, 8, 9, 2); <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (likely((values[3] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_last_lidar_state)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("tracked_targets_process", 0, 8, 9, 3); <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (likely((values[4] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_lidar_predict)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("tracked_targets_process", 0, 8, 9, 4); <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  5:
        if (likely((values[5] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_full_life)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("tracked_targets_process", 0, 8, 9, 5); <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  6:
        if (likely((values[6] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_R_c2w)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("tracked_targets_process", 0, 8, 9, 6); <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  7:
        if (likely((values[7] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_P0_UTM)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("tracked_targets_process", 0, 8, 9, 7); <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  8:
        if (kw_args &gt; 0) {
          PyObject* value = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt);
          if (value) { values[8] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "tracked_targets_process") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L3_error)</span>
      }
    } else {
      switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
        case  9: values[8] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 8);
        CYTHON_FALLTHROUGH;
        case  8: values[7] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7);
        values[6] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6);
        values[5] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5);
        values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
        values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_target_3Dlist = ((PyArrayObject *)values[0]);
    __pyx_v_target_3Dlist_num = ((PyArrayObject *)values[1]);
    __pyx_v_lidar_state = ((PyArrayObject *)values[2]);
    __pyx_v_last_lidar_state = ((PyArrayObject *)values[3]);
    __pyx_v_lidar_predict = ((PyArrayObject *)values[4]);
    __pyx_v_full_life = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(values[5]); if (unlikely((__pyx_v_full_life == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 655, __pyx_L3_error)</span>
    __pyx_v_R_c2w = ((PyArrayObject *)values[6]);
    __pyx_v_P0_UTM = ((PyArrayObject *)values[7]);
    if (values[8]) {
      __pyx_v_dt = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(values[8]); if (unlikely((__pyx_v_dt == (double)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 656, __pyx_L3_error)</span>
    } else {
      __pyx_v_dt = ((double)0.1);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("tracked_targets_process", 0, 8, 9, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.tracked_targets_process", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_target_3Dlist), __pyx_ptype_5numpy_ndarray, 1, "target_3Dlist", 0))) <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_target_3Dlist_num), __pyx_ptype_5numpy_ndarray, 1, "target_3Dlist_num", 0))) <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_lidar_state), __pyx_ptype_5numpy_ndarray, 1, "lidar_state", 0))) <span class='error_goto'>__PYX_ERR(0, 654, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_last_lidar_state), __pyx_ptype_5numpy_ndarray, 1, "last_lidar_state", 0))) <span class='error_goto'>__PYX_ERR(0, 654, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_lidar_predict), __pyx_ptype_5numpy_ndarray, 1, "lidar_predict", 0))) <span class='error_goto'>__PYX_ERR(0, 655, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_R_c2w), __pyx_ptype_5numpy_ndarray, 1, "R_c2w", 0))) <span class='error_goto'>__PYX_ERR(0, 655, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_P0_UTM), __pyx_ptype_5numpy_ndarray, 1, "P0_UTM", 0))) <span class='error_goto'>__PYX_ERR(0, 656, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_36tracked_targets_process(__pyx_self, __pyx_v_target_3Dlist, __pyx_v_target_3Dlist_num, __pyx_v_lidar_state, __pyx_v_last_lidar_state, __pyx_v_lidar_predict, __pyx_v_full_life, __pyx_v_R_c2w, __pyx_v_P0_UTM, __pyx_v_dt);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_36tracked_targets_process(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_target_3Dlist, PyArrayObject *__pyx_v_target_3Dlist_num, PyArrayObject *__pyx_v_lidar_state, PyArrayObject *__pyx_v_last_lidar_state, PyArrayObject *__pyx_v_lidar_predict, long __pyx_v_full_life, PyArrayObject *__pyx_v_R_c2w, PyArrayObject *__pyx_v_P0_UTM, double __pyx_v_dt) {
  long __pyx_v_i;
  long __pyx_v_idex;
  long __pyx_v_target_num;
  long __pyx_v_ll;
  CYTHON_UNUSED long __pyx_v_heading_1;
  CYTHON_UNUSED long __pyx_v_area_predict;
  long __pyx_v_xmin;
  long __pyx_v_xmax;
  long __pyx_v_ymin;
  long __pyx_v_ymax;
  long __pyx_v_zmin;
  long __pyx_v_zmax;
  long __pyx_v_I;
  PyArrayObject *__pyx_v_selected = 0;
  PyArrayObject *__pyx_v_fusioned_target = 0;
  PyArrayObject *__pyx_v_fusioned_target_box = 0;
  PyArrayObject *__pyx_v_tmp_state = 0;
  PyArrayObject *__pyx_v_coordinate_rotation = 0;
  PyArrayObject *__pyx_v_last_coordinate_rotation = 0;
  double __pyx_v_last_speed;
  long __pyx_v_static_thresh;
  PyObject *__pyx_v_ini_headings = NULL;
  PyObject *__pyx_v_targetx = NULL;
  PyObject *__pyx_v_tmp_class = NULL;
  PyObject *__pyx_v_xc = NULL;
  PyObject *__pyx_v_yc = NULL;
  PyObject *__pyx_v_head = NULL;
  PyObject *__pyx_v_lhead = NULL;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_P0_UTM;
  __Pyx_Buffer __pyx_pybuffer_P0_UTM;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_R_c2w;
  __Pyx_Buffer __pyx_pybuffer_R_c2w;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_coordinate_rotation;
  __Pyx_Buffer __pyx_pybuffer_coordinate_rotation;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_fusioned_target;
  __Pyx_Buffer __pyx_pybuffer_fusioned_target;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_fusioned_target_box;
  __Pyx_Buffer __pyx_pybuffer_fusioned_target_box;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_last_coordinate_rotation;
  __Pyx_Buffer __pyx_pybuffer_last_coordinate_rotation;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_last_lidar_state;
  __Pyx_Buffer __pyx_pybuffer_last_lidar_state;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_lidar_predict;
  __Pyx_Buffer __pyx_pybuffer_lidar_predict;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_lidar_state;
  __Pyx_Buffer __pyx_pybuffer_lidar_state;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_selected;
  __Pyx_Buffer __pyx_pybuffer_selected;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target_3Dlist;
  __Pyx_Buffer __pyx_pybuffer_target_3Dlist;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target_3Dlist_num;
  __Pyx_Buffer __pyx_pybuffer_target_3Dlist_num;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_tmp_state;
  __Pyx_Buffer __pyx_pybuffer_tmp_state;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("tracked_targets_process", 0);
  __pyx_pybuffer_selected.pybuffer.buf = NULL;
  __pyx_pybuffer_selected.refcount = 0;
  __pyx_pybuffernd_selected.data = NULL;
  __pyx_pybuffernd_selected.rcbuffer = &amp;__pyx_pybuffer_selected;
  __pyx_pybuffer_fusioned_target.pybuffer.buf = NULL;
  __pyx_pybuffer_fusioned_target.refcount = 0;
  __pyx_pybuffernd_fusioned_target.data = NULL;
  __pyx_pybuffernd_fusioned_target.rcbuffer = &amp;__pyx_pybuffer_fusioned_target;
  __pyx_pybuffer_fusioned_target_box.pybuffer.buf = NULL;
  __pyx_pybuffer_fusioned_target_box.refcount = 0;
  __pyx_pybuffernd_fusioned_target_box.data = NULL;
  __pyx_pybuffernd_fusioned_target_box.rcbuffer = &amp;__pyx_pybuffer_fusioned_target_box;
  __pyx_pybuffer_tmp_state.pybuffer.buf = NULL;
  __pyx_pybuffer_tmp_state.refcount = 0;
  __pyx_pybuffernd_tmp_state.data = NULL;
  __pyx_pybuffernd_tmp_state.rcbuffer = &amp;__pyx_pybuffer_tmp_state;
  __pyx_pybuffer_coordinate_rotation.pybuffer.buf = NULL;
  __pyx_pybuffer_coordinate_rotation.refcount = 0;
  __pyx_pybuffernd_coordinate_rotation.data = NULL;
  __pyx_pybuffernd_coordinate_rotation.rcbuffer = &amp;__pyx_pybuffer_coordinate_rotation;
  __pyx_pybuffer_last_coordinate_rotation.pybuffer.buf = NULL;
  __pyx_pybuffer_last_coordinate_rotation.refcount = 0;
  __pyx_pybuffernd_last_coordinate_rotation.data = NULL;
  __pyx_pybuffernd_last_coordinate_rotation.rcbuffer = &amp;__pyx_pybuffer_last_coordinate_rotation;
  __pyx_pybuffer_target_3Dlist.pybuffer.buf = NULL;
  __pyx_pybuffer_target_3Dlist.refcount = 0;
  __pyx_pybuffernd_target_3Dlist.data = NULL;
  __pyx_pybuffernd_target_3Dlist.rcbuffer = &amp;__pyx_pybuffer_target_3Dlist;
  __pyx_pybuffer_target_3Dlist_num.pybuffer.buf = NULL;
  __pyx_pybuffer_target_3Dlist_num.refcount = 0;
  __pyx_pybuffernd_target_3Dlist_num.data = NULL;
  __pyx_pybuffernd_target_3Dlist_num.rcbuffer = &amp;__pyx_pybuffer_target_3Dlist_num;
  __pyx_pybuffer_lidar_state.pybuffer.buf = NULL;
  __pyx_pybuffer_lidar_state.refcount = 0;
  __pyx_pybuffernd_lidar_state.data = NULL;
  __pyx_pybuffernd_lidar_state.rcbuffer = &amp;__pyx_pybuffer_lidar_state;
  __pyx_pybuffer_last_lidar_state.pybuffer.buf = NULL;
  __pyx_pybuffer_last_lidar_state.refcount = 0;
  __pyx_pybuffernd_last_lidar_state.data = NULL;
  __pyx_pybuffernd_last_lidar_state.rcbuffer = &amp;__pyx_pybuffer_last_lidar_state;
  __pyx_pybuffer_lidar_predict.pybuffer.buf = NULL;
  __pyx_pybuffer_lidar_predict.refcount = 0;
  __pyx_pybuffernd_lidar_predict.data = NULL;
  __pyx_pybuffernd_lidar_predict.rcbuffer = &amp;__pyx_pybuffer_lidar_predict;
  __pyx_pybuffer_R_c2w.pybuffer.buf = NULL;
  __pyx_pybuffer_R_c2w.refcount = 0;
  __pyx_pybuffernd_R_c2w.data = NULL;
  __pyx_pybuffernd_R_c2w.rcbuffer = &amp;__pyx_pybuffer_R_c2w;
  __pyx_pybuffer_P0_UTM.pybuffer.buf = NULL;
  __pyx_pybuffer_P0_UTM.refcount = 0;
  __pyx_pybuffernd_P0_UTM.data = NULL;
  __pyx_pybuffernd_P0_UTM.rcbuffer = &amp;__pyx_pybuffer_P0_UTM;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target_3Dlist, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 3, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_target_3Dlist.diminfo[0].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target_3Dlist.diminfo[0].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_target_3Dlist.diminfo[1].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_target_3Dlist.diminfo[1].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[1]; __pyx_pybuffernd_target_3Dlist.diminfo[2].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[2]; __pyx_pybuffernd_target_3Dlist.diminfo[2].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[2];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target_3Dlist_num, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_target_3Dlist_num.diminfo[0].strides = __pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target_3Dlist_num.diminfo[0].shape = __pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_state, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_lidar_state.diminfo[0].strides = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_state.diminfo[0].shape = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_state.diminfo[1].strides = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_state.diminfo[1].shape = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_last_lidar_state, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_last_lidar_state.diminfo[0].strides = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_last_lidar_state.diminfo[0].shape = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_last_lidar_state.diminfo[1].strides = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_last_lidar_state.diminfo[1].shape = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_predict, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_lidar_predict.diminfo[0].strides = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_predict.diminfo[0].shape = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_predict.diminfo[1].strides = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_predict.diminfo[1].shape = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_R_c2w, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_R_c2w.diminfo[0].strides = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_R_c2w.diminfo[0].shape = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_R_c2w.diminfo[1].strides = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_R_c2w.diminfo[1].shape = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_P0_UTM, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_P0_UTM.diminfo[0].strides = __pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_P0_UTM.diminfo[0].shape = __pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_91);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_coordinate_rotation.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_last_coordinate_rotation.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.tracked_targets_process", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_coordinate_rotation.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_last_coordinate_rotation.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_selected);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_fusioned_target);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_fusioned_target_box);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_tmp_state);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_coordinate_rotation);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_last_coordinate_rotation);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_ini_headings);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_targetx);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_tmp_class);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_xc);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_yc);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_head);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_lhead);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__154 = <span class='py_c_api'>PyTuple_Pack</span>(38, __pyx_n_s_target_3Dlist, __pyx_n_s_target_3Dlist_num, __pyx_n_s_lidar_state, __pyx_n_s_last_lidar_state, __pyx_n_s_lidar_predict, __pyx_n_s_full_life, __pyx_n_s_R_c2w, __pyx_n_s_P0_UTM, __pyx_n_s_dt, __pyx_n_s_i, __pyx_n_s_idex, __pyx_n_s_target_num, __pyx_n_s_ll, __pyx_n_s_heading_1, __pyx_n_s_area, __pyx_n_s_area_predict, __pyx_n_s_xmin, __pyx_n_s_xmax, __pyx_n_s_ymin, __pyx_n_s_ymax, __pyx_n_s_zmin, __pyx_n_s_zmax, __pyx_n_s_I, __pyx_n_s_selected, __pyx_n_s_fusioned_target, __pyx_n_s_fusioned_target_box, __pyx_n_s_tmp_state, __pyx_n_s_coordinate_rotation, __pyx_n_s_last_coordinate_rotation, __pyx_n_s_last_speed, __pyx_n_s_static_thresh, __pyx_n_s_ini_headings, __pyx_n_s_targetx, __pyx_n_s_tmp_class, __pyx_n_s_xc, __pyx_n_s_yc, __pyx_n_s_head, __pyx_n_s_lhead);<span class='error_goto'> if (unlikely(!__pyx_tuple__154)) __PYX_ERR(0, 653, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__154);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__154);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_37tracked_targets_process, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 653, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_tracked_targets_process, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 653, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__155 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(9, 0, 38, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__154, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_tracked_targets_process, 653, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__155)) __PYX_ERR(0, 653, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">654</span>:                     <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">lidar_state</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">last_lidar_state</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">655</span>:                     <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">lidar_predict</span><span class="p">,</span> <span class="nb">long</span> <span class="n">full_life</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">R_c2w</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">656</span>:                     <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">P0_UTM</span><span class="p">,</span> <span class="n">double</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">657</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">idex</span><span class="p">,</span> <span class="nf">target_num</span><span class="p">,</span> <span class="nf">ll</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_ll = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">658</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">heading_1</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_heading_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">659</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">area</span><span class="p">,</span> <span class="nf">area_predict</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_area_predict = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">660</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">xmin</span><span class="p">,</span> <span class="nf">xmax</span><span class="p">,</span> <span class="nf">ymin</span><span class="p">,</span> <span class="nf">ymax</span><span class="p">,</span> <span class="nf">zmin</span><span class="p">,</span> <span class="nf">zmax</span><span class="p">,</span> <span class="nf">I</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_I = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">661</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">selected</span><span class="p">,</span> <span class="n">fusioned_target</span><span class="p">,</span> <span class="n">fusioned_target_box</span><span class="p">,</span> <span class="n">tmp_state</span><span class="p">,</span> <span class="n">coordinate_rotation</span><span class="p">,</span> <span class="n">last_coordinate_rotation</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">662</span>:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">last_speed</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_last_speed = 0.0;
</pre><pre class="cython line score-0">&#xA0;<span class="">663</span>: </pre>
<pre class="cython line score-77" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">664</span>:     <span class="n">selected</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">target_3Dlist</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-77 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 664, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_ones);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 664, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_target_3Dlist-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 664, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 664, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 664, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_2, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 664, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_2, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 664, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 664, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_4) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_2);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_5);
    __pyx_t_2 = 0;
    __pyx_t_5 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 664, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyNumber_Negative</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 664, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 664, __pyx_L1_error)</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_3);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_selected, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
      }
      __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
    }
    __pyx_pybuffernd_selected.diminfo[0].strides = __pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_selected.diminfo[0].shape = __pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 664, __pyx_L1_error)</span>
  }
  __pyx_t_8 = 0;
  __pyx_v_selected = ((PyArrayObject *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">665</span>:     <span class="c"># fusioned_target: xc, yc, xmin, xmax, ymin, ymax, zmin, zmax, I</span></pre>
<pre class="cython line score-68" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">666</span>:     <span class="n">fusioned_target</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mf">9</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-68 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 666, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 666, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 666, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 666, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
    __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
    if (likely(__pyx_t_1)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_int_9, __pyx_t_5};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 666, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
    PyObject *__pyx_temp[3] = {__pyx_t_1, __pyx_int_9, __pyx_t_5};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 666, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 666, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (__pyx_t_1) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_1); __pyx_t_1 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_9);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_9);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_6, __pyx_int_9);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_6, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 666, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 666, __pyx_L1_error)</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_3);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_fusioned_target, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
      }
      __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
    }
    __pyx_pybuffernd_fusioned_target.diminfo[0].strides = __pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_fusioned_target.diminfo[0].shape = __pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 666, __pyx_L1_error)</span>
  }
  __pyx_t_8 = 0;
  __pyx_v_fusioned_target = ((PyArrayObject *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-68" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">667</span>:     <span class="n">tmp_state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mf">15</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span> <span class="c"># tmp_state.shape[0] = 15</span></pre>
<pre class='cython code score-68 '>  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 667, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 667, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 667, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 667, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_t_7 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_7)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_int_15, __pyx_t_5};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 667, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_7, __pyx_int_15, __pyx_t_5};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 667, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 667, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    if (__pyx_t_7) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_7); __pyx_t_7 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_15);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_15);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0+__pyx_t_6, __pyx_int_15);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1+__pyx_t_6, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_1, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 667, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 667, __pyx_L1_error)</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_3);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_tmp_state, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
      }
      __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
    }
    __pyx_pybuffernd_tmp_state.diminfo[0].strides = __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_tmp_state.diminfo[0].shape = __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 667, __pyx_L1_error)</span>
  }
  __pyx_t_8 = 0;
  __pyx_v_tmp_state = ((PyArrayObject *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-68" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">668</span>:     <span class="n">fusioned_target_box</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="mf">4</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>  <span class="c">#xmin, xmax, ymin, ymax</span></pre>
<pre class='cython code score-68 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 668, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 668, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 668, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 668, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_6 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
      __pyx_t_6 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_1)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_int_4, __pyx_t_5};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 668, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_1)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_int_4, __pyx_t_5};
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 668, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 668, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    if (__pyx_t_2) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_int_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_t_5);
    __pyx_t_5 = 0;
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 668, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 668, __pyx_L1_error)</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_3);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_fusioned_target_box, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
      }
      __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
    }
    __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides = __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_fusioned_target_box.diminfo[0].shape = __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 668, __pyx_L1_error)</span>
  }
  __pyx_t_8 = 0;
  __pyx_v_fusioned_target_box = ((PyArrayObject *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">669</span>:     <span class="c">#coordinate_rotation, last_coordinate_rotation = np.zeros(2, np.int32) </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">670</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">671</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">static_thresh</span> <span class="o">=</span> <span class="mf">50</span></pre>
<pre class='cython code score-0 '>  __pyx_v_static_thresh = 50;
</pre><pre class="cython line score-40" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">672</span>:     <span class="n">ini_headings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="mf">3309</span><span class="p">,</span><span class="mf">1509</span><span class="p">,</span><span class="mf">1959</span><span class="p">,</span><span class="mf">2409</span><span class="p">,</span><span class="mf">609</span><span class="p">,</span><span class="mf">1059</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;int32&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-40 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 672, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_asarray);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 672, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyList_New</span>(6);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 672, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3309);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3309);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 0, __pyx_int_3309);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1509);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1509);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 1, __pyx_int_1509);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1959);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1959);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 2, __pyx_int_1959);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2409);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_2409);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 3, __pyx_int_2409);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_609);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_609);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 4, __pyx_int_609);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1059);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1059);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_3, 5, __pyx_int_1059);
  __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 672, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_3);
  __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 672, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_3, __pyx_n_s_dtype, __pyx_n_s_int32) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 672, __pyx_L1_error)</span>
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_7, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 672, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_ini_headings = __pyx_t_5;
  __pyx_t_5 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">673</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">674</span>:     <span class="k">for</span> <span class="n">idex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">target_3Dlist</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_12 = (__pyx_v_target_3Dlist-&gt;dimensions[0]);
  __pyx_t_13 = __pyx_t_12;
  for (__pyx_t_14 = 0; __pyx_t_14 &lt; __pyx_t_13; __pyx_t_14+=1) {
    __pyx_v_idex = __pyx_t_14;
</pre><pre class="cython line score-19" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">675</span>:         <span class="n">targetx</span> <span class="o">=</span> <span class="n">target_3Dlist</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span> <span class="p">:</span><span class="n">target_3Dlist_num</span><span class="p">[</span><span class="n">idex</span><span class="p">]]</span></pre>
<pre class='cython code score-19 '>    __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_idex);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 675, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    __pyx_t_15 = __pyx_v_idex;
    __pyx_t_3 = __Pyx_PyInt_From_npy_int32((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_target_3Dlist_num.diminfo[0].strides)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 675, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_7 = <span class='py_c_api'>PySlice_New</span>(Py_None, __pyx_t_3, Py_None);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 675, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 675, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_5);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_t_7);
    __pyx_t_5 = 0;
    __pyx_t_7 = 0;
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_target_3Dlist), __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 675, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_targetx, __pyx_t_7);
    __pyx_t_7 = 0;
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">676</span>:         <span class="k">if</span> <span class="n">targetx</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">&gt;</span><span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-14 '>    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_targetx, __pyx_n_s_shape);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 676, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_7, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 676, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    __pyx_t_7 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_3, __pyx_int_0, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 676, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_7); if (unlikely(__pyx_t_16 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 676, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
    if (__pyx_t_16) {
/* … */
    }
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">677</span>:             <span class="c">#多个目标匹配到同一个历史目标时，对多个目标进行融合</span></pre>
<pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">678</span>:             <span class="n">xmin</span><span class="p">,</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">zmin</span> <span class="o">=</span> <span class="n">targetx</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">2</span><span class="p">],</span> <span class="n">targetx</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">4</span><span class="p">],</span> <span class="mf">0</span></pre>
<pre class='cython code score-30 '>      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_tuple__57);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 678, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_17 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_7); if (unlikely((__pyx_t_17 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 678, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
/* … */
  __pyx_tuple__57 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_0, __pyx_int_2);<span class='error_goto'> if (unlikely(!__pyx_tuple__57)) __PYX_ERR(0, 678, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__57);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__57);
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_tuple__58);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 678, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_18 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_7); if (unlikely((__pyx_t_18 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 678, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_19 = 0;
      __pyx_v_xmin = __pyx_t_17;
      __pyx_v_ymin = __pyx_t_18;
      __pyx_v_zmin = __pyx_t_19;
  __pyx_tuple__58 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_0, __pyx_int_4);<span class='error_goto'> if (unlikely(!__pyx_tuple__58)) __PYX_ERR(0, 678, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__58);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__58);
</pre><pre class="cython line score-45" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">679</span>:             <span class="n">xmax</span><span class="p">,</span> <span class="n">ymax</span><span class="p">,</span> <span class="n">zmax</span> <span class="o">=</span> <span class="n">targetx</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">3</span><span class="p">],</span> <span class="n">targetx</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">5</span><span class="p">],</span> <span class="n">targetx</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span><span class="mf">7</span><span class="p">]</span></pre>
<pre class='cython code score-45 '>      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_tuple__59);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 679, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_19 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_7); if (unlikely((__pyx_t_19 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 679, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
/* … */
  __pyx_tuple__59 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_0, __pyx_int_3);<span class='error_goto'> if (unlikely(!__pyx_tuple__59)) __PYX_ERR(0, 679, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__59);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__59);
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_tuple__60);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 679, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_18 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_7); if (unlikely((__pyx_t_18 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 679, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  __pyx_tuple__60 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_0, __pyx_int_5);<span class='error_goto'> if (unlikely(!__pyx_tuple__60)) __PYX_ERR(0, 679, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__60);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__60);
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_tuple__61);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 679, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_17 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_7); if (unlikely((__pyx_t_17 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 679, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_v_xmax = __pyx_t_19;
      __pyx_v_ymax = __pyx_t_18;
      __pyx_v_zmax = __pyx_t_17;
  __pyx_tuple__61 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_0, __pyx_int_7);<span class='error_goto'> if (unlikely(!__pyx_tuple__61)) __PYX_ERR(0, 679, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__61);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__61);
</pre><pre class="cython line score-15" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">680</span>:             <span class="n">I</span> <span class="o">=</span> <span class="n">targetx</span><span class="p">[</span><span class="mf">0</span><span class="p">,</span> <span class="mf">8</span><span class="p">]</span></pre>
<pre class='cython code score-15 '>      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_tuple__62);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 680, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_17 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_7); if (unlikely((__pyx_t_17 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 680, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_v_I = __pyx_t_17;
/* … */
  __pyx_tuple__62 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_int_0, __pyx_int_8);<span class='error_goto'> if (unlikely(!__pyx_tuple__62)) __PYX_ERR(0, 680, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__62);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__62);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">681</span>:             <span class="n">target_num</span> <span class="o">=</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>      __pyx_v_target_num = 1;
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">682</span>:             <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">1</span><span class="p">,</span> <span class="n">targetx</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-13 '>      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_targetx, __pyx_n_s_shape);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 682, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_7, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 682, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_17 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_3); if (unlikely((__pyx_t_17 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 682, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_18 = __pyx_t_17;
      for (__pyx_t_19 = 1; __pyx_t_19 &lt; __pyx_t_18; __pyx_t_19+=1) {
        __pyx_v_i = __pyx_t_19;
</pre><pre class="cython line score-72" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">683</span>:                 <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">targetx</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">2</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">xmax</span><span class="p">,</span> <span class="n">targetx</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">3</span><span class="p">])</span></pre>
<pre class='cython code score-72 '>        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_2);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1, __pyx_int_2);
        __pyx_t_3 = 0;
        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_20 = __pyx_v_xmin;
        __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_t_20);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_3, __pyx_t_5, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_16 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        if (__pyx_t_16) {
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
          __pyx_t_7 = __pyx_t_3;
        } else {
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_t_20);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          __pyx_t_7 = __pyx_t_1;
          __pyx_t_1 = 0;
        }
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_20 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_7); if (unlikely((__pyx_t_20 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_int_3);
        __pyx_t_7 = 0;
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_21 = __pyx_v_xmax;
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_t_21);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        __pyx_t_5 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_7, __pyx_t_1, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_5); if (unlikely(__pyx_t_16 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        if (__pyx_t_16) {
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
          __pyx_t_3 = __pyx_t_7;
        } else {
          __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_t_21);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 683, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
          __pyx_t_3 = __pyx_t_5;
          __pyx_t_5 = 0;
        }
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_21 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_3); if (unlikely((__pyx_t_21 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 683, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_v_xmin = __pyx_t_20;
        __pyx_v_xmax = __pyx_t_21;
</pre><pre class="cython line score-72" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">684</span>:                 <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span> <span class="n">targetx</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">4</span><span class="p">]),</span> <span class="nb">max</span><span class="p">(</span><span class="n">ymax</span><span class="p">,</span> <span class="n">targetx</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">5</span><span class="p">])</span></pre>
<pre class='cython code score-72 '>        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_4);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_4);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1, __pyx_int_4);
        __pyx_t_3 = 0;
        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_21 = __pyx_v_ymin;
        __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_t_21);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_3, __pyx_t_5, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_16 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        if (__pyx_t_16) {
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
          __pyx_t_7 = __pyx_t_3;
        } else {
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_t_21);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          __pyx_t_7 = __pyx_t_1;
          __pyx_t_1 = 0;
        }
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_21 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_7); if (unlikely((__pyx_t_21 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_5);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_5);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_int_5);
        __pyx_t_7 = 0;
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_20 = __pyx_v_ymax;
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_t_20);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        __pyx_t_5 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_7, __pyx_t_1, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_5); if (unlikely(__pyx_t_16 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        if (__pyx_t_16) {
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
          __pyx_t_3 = __pyx_t_7;
        } else {
          __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_t_20);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 684, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
          __pyx_t_3 = __pyx_t_5;
          __pyx_t_5 = 0;
        }
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_20 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_3); if (unlikely((__pyx_t_20 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 684, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_v_ymin = __pyx_t_21;
        __pyx_v_ymax = __pyx_t_20;
</pre><pre class="cython line score-36" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">685</span>:                 <span class="n">zmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">zmax</span><span class="p">,</span> <span class="n">targetx</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">7</span><span class="p">])</span></pre>
<pre class='cython code score-36 '>        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 685, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 685, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_7);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_7);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1, __pyx_int_7);
        __pyx_t_3 = 0;
        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 685, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_20 = __pyx_v_zmax;
        __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_t_20);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 685, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_3, __pyx_t_5, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 685, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_16 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 685, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        if (__pyx_t_16) {
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
          __pyx_t_7 = __pyx_t_3;
        } else {
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_t_20);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 685, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          __pyx_t_7 = __pyx_t_1;
          __pyx_t_1 = 0;
        }
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_20 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_7); if (unlikely((__pyx_t_20 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 685, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_v_zmax = __pyx_t_20;
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">686</span>:                 <span class="n">I</span> <span class="o">=</span> <span class="n">I</span> <span class="o">+</span> <span class="n">targetx</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">7</span><span class="p">]</span></pre>
<pre class='cython code score-30 '>        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_I);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 686, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 686, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 686, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_7);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_7);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, __pyx_int_7);
        __pyx_t_3 = 0;
        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_targetx, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 686, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_7, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 686, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_20 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_1); if (unlikely((__pyx_t_20 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 686, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_v_I = __pyx_t_20;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">687</span>:                 <span class="n">target_num</span> <span class="o">=</span> <span class="n">target_num</span> <span class="o">+</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>        __pyx_v_target_num = (__pyx_v_target_num + 1);
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">688</span>:             <span class="n">I</span> <span class="o">=</span> <span class="n">I</span><span class="o">//</span><span class="n">target_num</span></pre>
<pre class='cython code score-0 '>      __pyx_v_I = (__pyx_v_I / __pyx_v_target_num);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">689</span>:             <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span></pre>
<pre class='cython code score-0 '>      __pyx_t_17 = __pyx_v_xmin;
      __pyx_t_18 = __pyx_v_xmax;
      __pyx_t_22 = 0;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_22, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides) = __pyx_t_17;
      __pyx_t_23 = 1;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_23, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides) = __pyx_t_18;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">690</span>:             <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span></pre>
<pre class='cython code score-0 '>      __pyx_t_18 = __pyx_v_ymin;
      __pyx_t_17 = __pyx_v_ymax;
      __pyx_t_24 = 2;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_24, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides) = __pyx_t_18;
      __pyx_t_25 = 3;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_25, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides) = __pyx_t_17;
</pre><pre class="cython line score-0">&#xA0;<span class="">691</span>:             <span class="c">#对前后帧变化较大的目标，根据历史信息，对其进行修正</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">692</span>:             <span class="c">#fusioned_target_box = correct(fusioned_target_box, lidar_predict[idex, 5:])</span></pre>
<pre class="cython line score-79" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">693</span>:             <span class="n">fusioned_target_box</span> <span class="o">=</span> <span class="n">box_modify</span><span class="p">(</span><span class="n">fusioned_target_box</span><span class="p">,</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span> <span class="mf">5</span><span class="p">:])</span></pre>
<pre class='cython code score-79 '>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_box_modify);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 693, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_idex);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 693, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 693, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__63);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__63);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1, __pyx_slice__63);
      __pyx_t_7 = 0;
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_predict), __pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 693, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_5)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
        PyObject *__pyx_temp[3] = {__pyx_t_5, ((PyObject *)__pyx_v_fusioned_target_box), __pyx_t_7};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 693, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
        PyObject *__pyx_temp[3] = {__pyx_t_5, ((PyObject *)__pyx_v_fusioned_target_box), __pyx_t_7};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 693, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      } else
      #endif
      {
        __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 693, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        if (__pyx_t_5) {
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_5); __pyx_t_5 = NULL;
        }
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_fusioned_target_box));
        <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_fusioned_target_box));
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_6, ((PyObject *)__pyx_v_fusioned_target_box));
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_6, __pyx_t_7);
        __pyx_t_7 = 0;
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 693, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 693, __pyx_L1_error)</span>
      __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
      {
        __Pyx_BufFmt_StackElem __pyx_stack[1];
        <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer);
        __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
        if (unlikely(__pyx_t_6 &lt; 0)) {
          <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
          if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_fusioned_target_box, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
            Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
            <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
          } else {
            <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
          }
          __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
        }
        __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides = __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_fusioned_target_box.diminfo[0].shape = __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.shape[0];
        if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 693, __pyx_L1_error)</span>
      }
      __pyx_t_8 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_fusioned_target_box, ((PyArrayObject *)__pyx_t_1));
      __pyx_t_1 = 0;
/* … */
  __pyx_slice__63 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_5, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__63)) __PYX_ERR(0, 693, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__63);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__63);
</pre><pre class="cython line score-0">&#xA0;<span class="">694</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">695</span>:             <span class="n">fusioned_target</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span><span class="o">//</span><span class="mf">2</span> <span class="c">#xc</span></pre>
<pre class='cython code score-0 '>      __pyx_t_26 = 0;
      __pyx_t_27 = 1;
      __pyx_t_28 = 0;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_28, __pyx_pybuffernd_fusioned_target.diminfo[0].strides) = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_26, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides)) + (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_27, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides))) / 2);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">696</span>:             <span class="n">fusioned_target</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">3</span><span class="p">])</span><span class="o">//</span><span class="mf">2</span> <span class="c">#yc</span></pre>
<pre class='cython code score-0 '>      __pyx_t_29 = 2;
      __pyx_t_30 = 3;
      __pyx_t_31 = 1;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_31, __pyx_pybuffernd_fusioned_target.diminfo[0].strides) = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_29, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides)) + (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_30, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides))) / 2);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">697</span>:             <span class="n">fusioned_target</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span> <span class="n">fusioned_target</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="c">#xmin, xmax</span></pre>
<pre class='cython code score-0 '>      __pyx_t_32 = 0;
      __pyx_t_33 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_32, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides));
      __pyx_t_34 = 1;
      __pyx_t_35 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_34, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides));
      __pyx_t_36 = 2;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_36, __pyx_pybuffernd_fusioned_target.diminfo[0].strides) = __pyx_t_33;
      __pyx_t_37 = 3;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_37, __pyx_pybuffernd_fusioned_target.diminfo[0].strides) = __pyx_t_35;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">698</span>:             <span class="n">fusioned_target</span><span class="p">[</span><span class="mf">4</span><span class="p">],</span> <span class="n">fusioned_target</span><span class="p">[</span><span class="mf">5</span><span class="p">]</span> <span class="o">=</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>      __pyx_t_38 = 2;
      __pyx_t_35 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_38, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides));
      __pyx_t_39 = 3;
      __pyx_t_33 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_39, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides));
      __pyx_t_40 = 4;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_40, __pyx_pybuffernd_fusioned_target.diminfo[0].strides) = __pyx_t_35;
      __pyx_t_41 = 5;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_41, __pyx_pybuffernd_fusioned_target.diminfo[0].strides) = __pyx_t_33;
</pre><pre class="cython line score-0">&#xA0;<span class="">699</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">700</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_lidar_state</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span> <span class="c">#ID</span></pre>
<pre class='cython code score-0 '>      __pyx_t_42 = __pyx_v_idex;
      __pyx_t_43 = 0;
      __pyx_t_44 = 0;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_44, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_42, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_43, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides));
</pre><pre class="cython line score-0">&#xA0;<span class="">701</span>:             <span class="c">#在人行道区域，class用最新的检测特征进行判断</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">702</span>:             <span class="c">#1.设定人行道区域</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">703</span>:             <span class="c">#2.判定是否在人行道区域</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">704</span>:             <span class="c">#3.是，tmp_state[1]=lidar_class_new(fusioned_target)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">705</span>:             <span class="c">#4.否，tmp_state[1] = max(last_lidar_state[idex,1], lidar_class_new(fusioned_target))</span></pre>
<pre class="cython line score-40" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">706</span>:             <span class="n">tmp_class</span> <span class="o">=</span> <span class="n">lidar_class_new</span><span class="p">(</span><span class="n">fusioned_target</span><span class="p">)</span></pre>
<pre class='cython code score-40 '>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_lidar_class_new);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 706, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_2 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_2)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_2) {
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, ((PyObject *)__pyx_v_fusioned_target));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 706, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      } else {
        #if CYTHON_FAST_PYCALL
        if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_2, ((PyObject *)__pyx_v_fusioned_target)};
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 706, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_2, ((PyObject *)__pyx_v_fusioned_target)};
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 706, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        } else
        #endif
        {
          __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 706, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_2); __pyx_t_2 = NULL;
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_fusioned_target));
          <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_fusioned_target));
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+1, ((PyObject *)__pyx_v_fusioned_target));
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 706, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        }
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_tmp_class, __pyx_t_1);
      __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">707</span>:             <span class="n">last_speed</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">last_lidar_state</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">4</span><span class="p">],</span> <span class="mf">2.</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">last_lidar_state</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">5</span><span class="p">],</span> <span class="mf">2.</span><span class="p">))</span></pre>
<pre class='cython code score-0 '>      __pyx_t_45 = __pyx_v_idex;
      __pyx_t_46 = 4;
      __pyx_t_47 = __pyx_v_idex;
      __pyx_t_48 = 5;
      __pyx_v_last_speed = sqrt((pow((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_45, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_46, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides)), 2.) + pow((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_47, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_48, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides)), 2.)));
</pre><pre class="cython line score-0">&#xA0;<span class="">708</span>:             <span class="c">#if last_speed &gt;= 300:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">709</span>:             <span class="c">#    tmp_state[1] = max(last_lidar_state[idex,1], tmp_class)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">710</span>:             <span class="c">#elif (1900  &lt;= fusioned_target[0] &lt;=2500) or (1400 &lt;= fusioned_target[1] &lt;= 1950):</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">711</span>:             <span class="c">#    tmp_state[1] = tmp_class</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">712</span>:             <span class="c">#else:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">713</span>:             <span class="c">#    tmp_state[1] = max(last_lidar_state[idex,1], tmp_class) #class</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">714</span>:             <span class="k">if</span> <span class="p">(</span><span class="mf">1800</span>  <span class="o">&lt;=</span> <span class="n">fusioned_target</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">&lt;=</span><span class="mf">2500</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="mf">1300</span> <span class="o">&lt;=</span> <span class="n">fusioned_target</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mf">1950</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>      __pyx_t_49 = 0;
      __pyx_t_33 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_49, __pyx_pybuffernd_fusioned_target.diminfo[0].strides));
      __pyx_t_50 = (0x708 &lt;= __pyx_t_33);
      if (__pyx_t_50) {
        __pyx_t_50 = (__pyx_t_33 &lt;= 0x9C4);
      }
      __pyx_t_51 = (__pyx_t_50 != 0);
      if (!__pyx_t_51) {
      } else {
        __pyx_t_16 = __pyx_t_51;
        goto __pyx_L9_bool_binop_done;
      }
      __pyx_t_52 = 1;
      __pyx_t_33 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target.rcbuffer-&gt;pybuffer.buf, __pyx_t_52, __pyx_pybuffernd_fusioned_target.diminfo[0].strides));
      __pyx_t_51 = (0x514 &lt;= __pyx_t_33);
      if (__pyx_t_51) {
        __pyx_t_51 = (__pyx_t_33 &lt;= 0x79E);
      }
      __pyx_t_50 = (__pyx_t_51 != 0);
      __pyx_t_16 = __pyx_t_50;
      __pyx_L9_bool_binop_done:;
      if (__pyx_t_16) {
/* … */
        goto __pyx_L8;
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">715</span>:                 <span class="k">if</span> <span class="n">last_speed</span> <span class="o">&gt;=</span> <span class="mf">300</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>        __pyx_t_16 = ((__pyx_v_last_speed &gt;= 300.0) != 0);
        if (__pyx_t_16) {
/* … */
          goto __pyx_L11;
        }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">716</span>:                     <span class="n">tmp_state</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3</span></pre>
<pre class='cython code score-0 '>          __pyx_t_53 = 1;
          *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_53, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = 3;
</pre><pre class="cython line score-0">&#xA0;<span class="">717</span>:                 <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">718</span>:                     <span class="n">tmp_state</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp_class</span></pre>
<pre class='cython code score-5 '>        /*else*/ {
          __pyx_t_33 = __Pyx_PyInt_As_npy_int32(__pyx_v_tmp_class); if (unlikely((__pyx_t_33 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 718, __pyx_L1_error)</span>
          __pyx_t_54 = 1;
          *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_54, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_33;
        }
        __pyx_L11:;
</pre><pre class="cython line score-0">&#xA0;<span class="">719</span>:             <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">720</span>:                 <span class="n">tmp_state</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3</span></pre>
<pre class='cython code score-0 '>      /*else*/ {
        __pyx_t_55 = 1;
        *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_55, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = 3;
      }
      __pyx_L8:;
</pre><pre class="cython line score-0">&#xA0;<span class="">721</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">722</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span><span class="o">//</span><span class="mf">2</span> <span class="c">#xc</span></pre>
<pre class='cython code score-0 '>      __pyx_t_56 = 0;
      __pyx_t_57 = 1;
      __pyx_t_58 = 2;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_58, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_56, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides)) + (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_57, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides))) / 2);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">723</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">3</span><span class="p">])</span><span class="o">//</span><span class="mf">2</span> <span class="c">#yc</span></pre>
<pre class='cython code score-0 '>      __pyx_t_59 = 2;
      __pyx_t_60 = 3;
      __pyx_t_61 = 3;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_61, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_59, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides)) + (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_60, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides))) / 2);
</pre><pre class="cython line score-0">&#xA0;<span class="">724</span>:             <span class="c">#print(&quot;tmp_state[2:4]:&quot; ,tmp_state[2:4])</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">725</span>:             <span class="c">#print(&quot;last_lidar_state[idex,2:4]:&quot;, last_lidar_state[idex,2:4])</span></pre>
<pre class="cython line score-70" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">726</span>:             <span class="n">coordinate_rotation</span> <span class="o">=</span> <span class="n">lidar2UTM</span><span class="p">(</span><span class="n">tmp_state</span><span class="p">[</span><span class="mf">2</span><span class="p">:</span><span class="mf">4</span><span class="p">],</span> <span class="n">R_c2w</span><span class="p">,</span> <span class="n">P0_UTM</span><span class="p">)</span></pre>
<pre class='cython code score-70 '>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_lidar2UTM);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 726, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_tmp_state), __pyx_slice__64);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 726, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      __pyx_t_2 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_2)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
        PyObject *__pyx_temp[4] = {__pyx_t_2, __pyx_t_7, ((PyObject *)__pyx_v_R_c2w), ((PyObject *)__pyx_v_P0_UTM)};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 726, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
        PyObject *__pyx_temp[4] = {__pyx_t_2, __pyx_t_7, ((PyObject *)__pyx_v_R_c2w), ((PyObject *)__pyx_v_P0_UTM)};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 726, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      } else
      #endif
      {
        __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 726, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
        if (__pyx_t_2) {
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_2); __pyx_t_2 = NULL;
        }
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+__pyx_t_6, __pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_R_c2w));
        <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_R_c2w));
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1+__pyx_t_6, ((PyObject *)__pyx_v_R_c2w));
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_P0_UTM));
        <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_P0_UTM));
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 2+__pyx_t_6, ((PyObject *)__pyx_v_P0_UTM));
        __pyx_t_7 = 0;
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 726, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 726, __pyx_L1_error)</span>
      __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
      {
        __Pyx_BufFmt_StackElem __pyx_stack[1];
        <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_coordinate_rotation.rcbuffer-&gt;pybuffer);
        __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_coordinate_rotation.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
        if (unlikely(__pyx_t_6 &lt; 0)) {
          <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
          if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_coordinate_rotation.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_coordinate_rotation, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
            Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
            <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
          } else {
            <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
          }
          __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
        }
        __pyx_pybuffernd_coordinate_rotation.diminfo[0].strides = __pyx_pybuffernd_coordinate_rotation.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_coordinate_rotation.diminfo[0].shape = __pyx_pybuffernd_coordinate_rotation.rcbuffer-&gt;pybuffer.shape[0];
        if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 726, __pyx_L1_error)</span>
      }
      __pyx_t_8 = 0;
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_coordinate_rotation, ((PyArrayObject *)__pyx_t_1));
      __pyx_t_1 = 0;
/* … */
  __pyx_slice__64 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_4, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__64)) __PYX_ERR(0, 726, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__64);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__64);
</pre><pre class="cython line score-81" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">727</span>:             <span class="n">last_coordinate_rotation</span> <span class="o">=</span> <span class="n">lidar2UTM</span><span class="p">(</span><span class="n">last_lidar_state</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">2</span><span class="p">:</span><span class="mf">4</span><span class="p">],</span> <span class="n">R_c2w</span><span class="p">,</span> <span class="n">P0_UTM</span><span class="p">)</span></pre>
<pre class='cython code score-81 '>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_lidar2UTM);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 727, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_idex);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 727, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 727, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__65);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__65);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1, __pyx_slice__65);
      __pyx_t_5 = 0;
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_last_lidar_state), __pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 727, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = NULL;
      __pyx_t_6 = 0;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_7)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
          __pyx_t_6 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
        PyObject *__pyx_temp[4] = {__pyx_t_7, __pyx_t_5, ((PyObject *)__pyx_v_R_c2w), ((PyObject *)__pyx_v_P0_UTM)};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 727, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
        PyObject *__pyx_temp[4] = {__pyx_t_7, __pyx_t_5, ((PyObject *)__pyx_v_R_c2w), ((PyObject *)__pyx_v_P0_UTM)};
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 727, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      } else
      #endif
      {
        __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 727, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        if (__pyx_t_7) {
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_7); __pyx_t_7 = NULL;
        }
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_6, __pyx_t_5);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_R_c2w));
        <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_R_c2w));
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_6, ((PyObject *)__pyx_v_R_c2w));
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_P0_UTM));
        <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_P0_UTM));
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 2+__pyx_t_6, ((PyObject *)__pyx_v_P0_UTM));
        __pyx_t_5 = 0;
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 727, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 727, __pyx_L1_error)</span>
      __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
      {
        __Pyx_BufFmt_StackElem __pyx_stack[1];
        <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_last_coordinate_rotation.rcbuffer-&gt;pybuffer);
        __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_last_coordinate_rotation.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
        if (unlikely(__pyx_t_6 &lt; 0)) {
          <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_9, &amp;__pyx_t_10, &amp;__pyx_t_11);
          if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_last_coordinate_rotation.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_last_coordinate_rotation, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
            Py_XDECREF(__pyx_t_9); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11);
            <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
          } else {
            <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_9, __pyx_t_10, __pyx_t_11);
          }
          __pyx_t_9 = __pyx_t_10 = __pyx_t_11 = 0;
        }
        __pyx_pybuffernd_last_coordinate_rotation.diminfo[0].strides = __pyx_pybuffernd_last_coordinate_rotation.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_last_coordinate_rotation.diminfo[0].shape = __pyx_pybuffernd_last_coordinate_rotation.rcbuffer-&gt;pybuffer.shape[0];
        if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 727, __pyx_L1_error)</span>
      }
      __pyx_t_8 = 0;
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_last_coordinate_rotation, ((PyArrayObject *)__pyx_t_1));
      __pyx_t_1 = 0;
/* … */
  __pyx_slice__65 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_4, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__65)) __PYX_ERR(0, 727, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__65);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__65);
</pre><pre class="cython line score-0">&#xA0;<span class="">728</span>:             <span class="c">#print(&quot;coordinate_rotation:&quot;, coordinate_rotation)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">729</span>:             <span class="c">#print(&quot;last_coordinate_rotation:&quot;, last_coordinate_rotation)</span></pre>
<pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">730</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="mf">0.5</span><span class="o">*</span><span class="n">last_lidar_state</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">4</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">coordinate_rotation</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span><span class="o">-</span><span class="n">last_coordinate_rotation</span><span class="p">[</span><span class="mf">0</span><span class="p">])</span><span class="o">/</span><span class="n">dt</span><span class="p">)</span> <span class="c"># Vx</span></pre>
<pre class='cython code score-14 '>      __pyx_t_62 = __pyx_v_idex;
      __pyx_t_63 = 4;
      __pyx_t_64 = 0;
      __pyx_t_65 = 0;
      __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(((0.5 * (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_62, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_63, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides))) + ((0.5 * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_coordinate_rotation.rcbuffer-&gt;pybuffer.buf, __pyx_t_64, __pyx_pybuffernd_coordinate_rotation.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_coordinate_rotation.rcbuffer-&gt;pybuffer.buf, __pyx_t_65, __pyx_pybuffernd_last_coordinate_rotation.diminfo[0].strides)))) / __pyx_v_dt)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 730, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 730, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_33 = __Pyx_PyInt_As_npy_int32(__pyx_t_3); if (unlikely((__pyx_t_33 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 730, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_66 = 4;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_66, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_33;
</pre><pre class="cython line score-14" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">731</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">5</span><span class="p">]</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="mf">0.5</span><span class="o">*</span><span class="n">last_lidar_state</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">5</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">coordinate_rotation</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span><span class="o">-</span><span class="n">last_coordinate_rotation</span><span class="p">[</span><span class="mf">1</span><span class="p">])</span><span class="o">/</span><span class="n">dt</span><span class="p">)</span> <span class="c"># Vy </span></pre>
<pre class='cython code score-14 '>      __pyx_t_67 = __pyx_v_idex;
      __pyx_t_68 = 5;
      __pyx_t_69 = 1;
      __pyx_t_70 = 1;
      __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>(((0.5 * (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_67, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_68, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides))) + ((0.5 * ((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_coordinate_rotation.rcbuffer-&gt;pybuffer.buf, __pyx_t_69, __pyx_pybuffernd_coordinate_rotation.diminfo[0].strides)) - (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_coordinate_rotation.rcbuffer-&gt;pybuffer.buf, __pyx_t_70, __pyx_pybuffernd_last_coordinate_rotation.diminfo[0].strides)))) / __pyx_v_dt)));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 731, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 731, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_33 = __Pyx_PyInt_As_npy_int32(__pyx_t_1); if (unlikely((__pyx_t_33 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 731, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_71 = 5;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_71, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_33;
</pre><pre class="cython line score-0">&#xA0;<span class="">732</span>:             <span class="c">#tmp_state[4] = long(0.2*last_lidar_state[idex,4] + 0.8*(tmp_state[2]-last_lidar_state[idex,2])/dt) # Vx</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">733</span>:             <span class="c">#tmp_state[5] = long(0.2*last_lidar_state[idex,5] + 0.8*(tmp_state[3]-last_lidar_state[idex,3])/dt) # Vy </span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">734</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">6</span><span class="p">],</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="c">#xmin, xmax</span></pre>
<pre class='cython code score-0 '>      __pyx_t_72 = 0;
      __pyx_t_33 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_72, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides));
      __pyx_t_73 = 1;
      __pyx_t_35 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_73, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides));
      __pyx_t_74 = 6;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_74, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_33;
      __pyx_t_75 = 7;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_75, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_35;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">735</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">8</span><span class="p">],</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">9</span><span class="p">]</span> <span class="o">=</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">2</span><span class="p">],</span> <span class="n">fusioned_target_box</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>      __pyx_t_76 = 2;
      __pyx_t_35 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_76, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides));
      __pyx_t_77 = 3;
      __pyx_t_33 = (*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_fusioned_target_box.rcbuffer-&gt;pybuffer.buf, __pyx_t_77, __pyx_pybuffernd_fusioned_target_box.diminfo[0].strides));
      __pyx_t_78 = 8;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_78, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_35;
      __pyx_t_79 = 9;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_79, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_33;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">736</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">10</span><span class="p">],</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">11</span><span class="p">],</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">12</span><span class="p">]</span>  <span class="o">=</span> <span class="n">zmin</span><span class="p">,</span> <span class="n">zmax</span><span class="p">,</span> <span class="n">I</span>  <span class="c">#反射强度平均值</span></pre>
<pre class='cython code score-0 '>      __pyx_t_17 = __pyx_v_zmin;
      __pyx_t_18 = __pyx_v_zmax;
      __pyx_t_19 = __pyx_v_I;
      __pyx_t_80 = 10;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_80, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_17;
      __pyx_t_81 = 11;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_81, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_18;
      __pyx_t_82 = 12;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_82, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_19;
</pre><pre class="cython line score-0">&#xA0;<span class="">737</span>:             <span class="c">#车辆驶出检测区域后，生命周期清零</span></pre>
<pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">738</span>:             <span class="n">xc</span> <span class="o">=</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span></pre>
<pre class='cython code score-1 '>      __pyx_t_83 = 2;
      __pyx_t_1 = __Pyx_PyInt_From_npy_int32((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_83, __pyx_pybuffernd_tmp_state.diminfo[0].strides)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 738, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_xc, __pyx_t_1);
      __pyx_t_1 = 0;
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">739</span>:             <span class="n">yc</span> <span class="o">=</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">3</span><span class="p">]</span></pre>
<pre class='cython code score-1 '>      __pyx_t_84 = 3;
      __pyx_t_1 = __Pyx_PyInt_From_npy_int32((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_84, __pyx_pybuffernd_tmp_state.diminfo[0].strides)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 739, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_yc, __pyx_t_1);
      __pyx_t_1 = 0;
</pre><pre class="cython line score-56" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">740</span>:             <span class="k">if</span> <span class="p">(</span><span class="n">xc</span> <span class="o">&lt;</span> <span class="mf">800</span> <span class="ow">and</span> <span class="n">yc</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">3600</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">xc</span> <span class="o">&gt;</span> <span class="mf">800</span> <span class="ow">and</span> <span class="n">yc</span> <span class="o">&gt;</span> <span class="mf">2300</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">xc</span> <span class="o">&gt;</span> <span class="mf">2300</span> <span class="ow">and</span> <span class="p">(</span><span class="o">-</span><span class="mf">900</span> <span class="o">&lt;</span> <span class="n">yc</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mf">200</span><span class="p">)):</span></pre>
<pre class='cython code score-56 '>      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_xc, __pyx_int_800, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 740, __pyx_L1_error)</span>
      __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 740, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (!__pyx_t_50) {
        goto __pyx_L14_next_or;
      } else {
      }
      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_yc, __pyx_int_neg_3600, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 740, __pyx_L1_error)</span>
      __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 740, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (!__pyx_t_50) {
      } else {
        __pyx_t_16 = __pyx_t_50;
        goto __pyx_L13_bool_binop_done;
      }
      __pyx_L14_next_or:;
      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_xc, __pyx_int_800, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 740, __pyx_L1_error)</span>
      __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 740, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (!__pyx_t_50) {
        goto __pyx_L16_next_or;
      } else {
      }
      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_yc, __pyx_int_2300, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 740, __pyx_L1_error)</span>
      __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 740, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (!__pyx_t_50) {
      } else {
        __pyx_t_16 = __pyx_t_50;
        goto __pyx_L13_bool_binop_done;
      }
      __pyx_L16_next_or:;
      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_xc, __pyx_int_2300, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 740, __pyx_L1_error)</span>
      __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 740, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (__pyx_t_50) {
      } else {
        __pyx_t_16 = __pyx_t_50;
        goto __pyx_L13_bool_binop_done;
      }
      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_int_neg_900, __pyx_v_yc, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 740, __pyx_L1_error)</span>
      if (<span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1)) {
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1);
        __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_yc, __pyx_int_neg_200, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 740, __pyx_L1_error)</span>
      }
      __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 740, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_16 = __pyx_t_50;
      __pyx_L13_bool_binop_done:;
      if (__pyx_t_16) {
/* … */
        goto __pyx_L12;
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">741</span>:                 <span class="n">tmp_state</span><span class="p">[</span><span class="mf">13</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>        __pyx_t_85 = 13;
        *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_85, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = 0;
</pre><pre class="cython line score-24" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">742</span>:             <span class="k">elif</span> <span class="p">(</span><span class="n">xc</span> <span class="o">&lt;</span> <span class="mf">800</span> <span class="ow">and</span> <span class="mf">0</span> <span class="o">&lt;</span> <span class="n">yc</span> <span class="o">&lt;</span> <span class="mf">900</span><span class="p">):</span></pre>
<pre class='cython code score-24 '>      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_xc, __pyx_int_800, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 742, __pyx_L1_error)</span>
      __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 742, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (__pyx_t_50) {
      } else {
        __pyx_t_16 = __pyx_t_50;
        goto __pyx_L19_bool_binop_done;
      }
      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_int_0, __pyx_v_yc, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 742, __pyx_L1_error)</span>
      if (<span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1)) {
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1);
        __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_yc, __pyx_int_900, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 742, __pyx_L1_error)</span>
      }
      __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 742, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_16 = __pyx_t_50;
      __pyx_L19_bool_binop_done:;
      if (__pyx_t_16) {
/* … */
        goto __pyx_L12;
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">743</span>:                 <span class="n">tmp_state</span><span class="p">[</span><span class="mf">13</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>        __pyx_t_86 = 13;
        *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_86, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = 1;
</pre><pre class="cython line score-32" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">744</span>:             <span class="k">elif</span> <span class="p">(</span><span class="mf">1800</span>  <span class="o">&lt;=</span> <span class="n">xc</span> <span class="o">&lt;=</span><span class="mf">2500</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="mf">1300</span> <span class="o">&lt;=</span> <span class="n">yc</span> <span class="o">&lt;=</span> <span class="mf">1950</span><span class="p">):</span></pre>
<pre class='cython code score-32 '>      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_int_1800, __pyx_v_xc, Py_LE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 744, __pyx_L1_error)</span>
      if (<span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1)) {
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1);
        __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_xc, __pyx_int_2500, Py_LE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 744, __pyx_L1_error)</span>
      }
      __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 744, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      if (!__pyx_t_50) {
      } else {
        __pyx_t_16 = __pyx_t_50;
        goto __pyx_L21_bool_binop_done;
      }
      __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_int_1300, __pyx_v_yc, Py_LE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 744, __pyx_L1_error)</span>
      if (<span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1)) {
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1);
        __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_yc, __pyx_int_1950, Py_LE); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 744, __pyx_L1_error)</span>
      }
      __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 744, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_16 = __pyx_t_50;
      __pyx_L21_bool_binop_done:;
      if (__pyx_t_16) {
/* … */
        goto __pyx_L12;
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">745</span>:                 <span class="n">tmp_state</span><span class="p">[</span><span class="mf">13</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>        __pyx_t_87 = 13;
        *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_87, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = 1;
</pre><pre class="cython line score-0">&#xA0;<span class="">746</span>:             <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">747</span>:                 <span class="n">tmp_state</span><span class="p">[</span><span class="mf">13</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">full_life</span><span class="p">,</span> <span class="n">last_lidar_state</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span><span class="mf">13</span><span class="p">]</span><span class="o">+</span><span class="mf">1</span><span class="p">)</span></pre>
<pre class='cython code score-0 '>      /*else*/ {
        __pyx_t_88 = __pyx_v_idex;
        __pyx_t_89 = 13;
        __pyx_t_19 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_88, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_89, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides)) + 1);
        __pyx_t_18 = __pyx_v_full_life;
        if (((__pyx_t_19 &lt; __pyx_t_18) != 0)) {
          __pyx_t_17 = __pyx_t_19;
        } else {
          __pyx_t_17 = __pyx_t_18;
        }
        __pyx_t_90 = 13;
        *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_90, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_17;
      }
      __pyx_L12:;
</pre><pre class="cython line score-0">&#xA0;<span class="">748</span>:             <span class="c"># 添加heading</span></pre>
<pre class="cython line score-93" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">749</span>:             <span class="n">head</span> <span class="o">=</span> <span class="n">heading</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">(</span><span class="n">tmp_state</span><span class="p">[</span><span class="mf">4</span><span class="p">:</span><span class="mf">6</span><span class="p">]))</span></pre>
<pre class='cython code score-93 '>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_heading);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_float64);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_tmp_state), __pyx_slice__66);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      __pyx_t_4 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
        __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
        if (likely(__pyx_t_4)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
        }
      }
      if (!__pyx_t_4) {
        __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_7, __pyx_t_5);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      } else {
        #if CYTHON_FAST_PYCALL
        if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_5};
          __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
          PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_5};
          __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
        } else
        #endif
        {
          __pyx_t_91 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_91)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_91);
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_91, 0, __pyx_t_4); __pyx_t_4 = NULL;
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_91, 0+1, __pyx_t_5);
          __pyx_t_5 = 0;
          __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_91, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
        }
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
      __pyx_t_7 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
        __pyx_t_7 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
        if (likely(__pyx_t_7)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
        }
      }
      if (!__pyx_t_7) {
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      } else {
        #if CYTHON_FAST_PYCALL
        if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_2};
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
          PyObject *__pyx_temp[2] = {__pyx_t_7, __pyx_t_2};
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
        } else
        #endif
        {
          __pyx_t_91 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_91)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_91);
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_7); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_91, 0, __pyx_t_7); __pyx_t_7 = NULL;
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_91, 0+1, __pyx_t_2);
          __pyx_t_2 = 0;
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_91, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
        }
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_head, __pyx_t_1);
      __pyx_t_1 = 0;
/* … */
  __pyx_slice__66 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_4, __pyx_int_6, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__66)) __PYX_ERR(0, 749, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__66);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__66);
</pre><pre class="cython line score-1" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">750</span>:             <span class="n">lhead</span> <span class="o">=</span> <span class="n">last_lidar_state</span><span class="p">[</span><span class="n">idex</span><span class="p">,</span> <span class="mf">14</span><span class="p">]</span></pre>
<pre class='cython code score-1 '>      __pyx_t_92 = __pyx_v_idex;
      __pyx_t_93 = 14;
      __pyx_t_1 = __Pyx_PyInt_From_npy_int32((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_92, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_93, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 750, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_lhead, __pyx_t_1);
      __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">751</span>:             <span class="k">if</span> <span class="n">sqrt</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="n">tmp_state</span><span class="p">[</span><span class="mf">4</span><span class="p">],</span><span class="mf">2.</span><span class="p">)</span> <span class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="n">tmp_state</span><span class="p">[</span><span class="mf">5</span><span class="p">],</span><span class="mf">2.</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">static_thresh</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>      __pyx_t_94 = 4;
      __pyx_t_95 = 5;
      __pyx_t_16 = ((sqrt((pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_94, __pyx_pybuffernd_tmp_state.diminfo[0].strides)), 2.) + pow((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_95, __pyx_pybuffernd_tmp_state.diminfo[0].strides)), 2.))) &lt;= __pyx_v_static_thresh) != 0);
      if (__pyx_t_16) {
/* … */
        goto __pyx_L23;
      }
</pre><pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">752</span>:                 <span class="n">tmp_state</span><span class="p">[</span><span class="mf">14</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_ini_heading</span><span class="p">(</span><span class="n">tmp_state</span><span class="p">[</span><span class="mf">2</span><span class="p">:</span><span class="mf">4</span><span class="p">],</span> <span class="n">ini_headings</span><span class="p">)</span></pre>
<pre class='cython code score-53 '>        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_get_ini_heading);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 752, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        __pyx_t_91 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_tmp_state), __pyx_slice__67);<span class='error_goto'> if (unlikely(!__pyx_t_91)) __PYX_ERR(0, 752, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_91);
        __pyx_t_2 = NULL;
        __pyx_t_6 = 0;
        if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
          __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
          if (likely(__pyx_t_2)) {
            PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
            <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
            __pyx_t_6 = 1;
          }
        }
        #if CYTHON_FAST_PYCALL
        if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
          PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_91, __pyx_v_ini_headings};
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 752, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
          PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_91, __pyx_v_ini_headings};
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-__pyx_t_6, 2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 752, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
        } else
        #endif
        {
          __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_6);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 752, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
          if (__pyx_t_2) {
            <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, __pyx_t_2); __pyx_t_2 = NULL;
          }
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_91);
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0+__pyx_t_6, __pyx_t_91);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_ini_headings);
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_v_ini_headings);
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1+__pyx_t_6, __pyx_v_ini_headings);
          __pyx_t_91 = 0;
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_7, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 752, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        }
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_33 = __Pyx_PyInt_As_npy_int32(__pyx_t_1); if (unlikely((__pyx_t_33 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 752, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_96 = 14;
        *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_96, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_33;
/* … */
  __pyx_slice__67 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_4, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__67)) __PYX_ERR(0, 752, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__67);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__67);
</pre><pre class="cython line score-0">&#xA0;<span class="">753</span>:             <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-8" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">754</span>:                 <span class="k">if</span> <span class="n">head</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-8 '>      /*else*/ {
        __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_head, __pyx_int_0, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 754, __pyx_L1_error)</span>
        __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_16 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 754, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        if (__pyx_t_16) {
          goto __pyx_L24;
        }
</pre><pre class="cython line score-0">&#xA0;<span class="">755</span>:                     <span class="k">pass</span></pre>
<pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">756</span>:                 <span class="k">elif</span> <span class="n">head</span> <span class="o">==</span><span class="mf">3600</span><span class="p">:</span></pre>
<pre class='cython code score-5 '>        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_EqObjC</span>(__pyx_v_head, __pyx_int_3600, 0xE10, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 756, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_16 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 756, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        if (__pyx_t_16) {
/* … */
          goto __pyx_L24;
        }
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">757</span>:                     <span class="n">tmp_state</span><span class="p">[</span><span class="mf">14</span><span class="p">]</span> <span class="o">=</span> <span class="n">lhead</span></pre>
<pre class='cython code score-5 '>          __pyx_t_33 = __Pyx_PyInt_As_npy_int32(__pyx_v_lhead); if (unlikely((__pyx_t_33 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 757, __pyx_L1_error)</span>
          __pyx_t_97 = 14;
          *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_97, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_33;
</pre><pre class="cython line score-17" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">758</span>:                 <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="n">lhead</span> <span class="o">-</span> <span class="n">head</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1800</span><span class="p">:</span></pre>
<pre class='cython code score-17 '>        __pyx_t_1 = <span class='py_c_api'>PyNumber_Subtract</span>(__pyx_v_lhead, __pyx_v_head);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 758, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyNumber_Absolute</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 758, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_3, __pyx_int_1800, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 758, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_16 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 758, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        if (__pyx_t_16) {
/* … */
          goto __pyx_L24;
        }
</pre><pre class="cython line score-50" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">759</span>:                     <span class="n">tmp_state</span><span class="p">[</span><span class="mf">14</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">lhead</span><span class="o">+</span><span class="mf">50</span><span class="p">,</span> <span class="n">head</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">lhead</span> <span class="o">&lt;</span> <span class="n">head</span><span class="p">)</span> <span class="k">else</span> <span class="nb">max</span><span class="p">(</span><span class="n">lhead</span><span class="o">-</span><span class="mf">50</span><span class="p">,</span> <span class="n">head</span><span class="p">)</span> <span class="c"># 连续两帧航向偏转不超过10°</span></pre>
<pre class='cython code score-50 '>          __pyx_t_1 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_lhead, __pyx_v_head, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 759, __pyx_L1_error)</span>
          __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_1); if (unlikely(__pyx_t_16 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 759, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
          if (__pyx_t_16) {
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_head);
            __pyx_t_1 = __pyx_v_head;
            __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_AddObjC</span>(__pyx_v_lhead, __pyx_int_50, 50, 0);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 759, __pyx_L1_error)</span>
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
            __pyx_t_91 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_1, __pyx_t_3, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_91);<span class='error_goto'> if (unlikely(!__pyx_t_91)) __PYX_ERR(0, 759, __pyx_L1_error)</span>
            __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_91); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 759, __pyx_L1_error)</span>
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
            if (__pyx_t_50) {
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
              __pyx_t_7 = __pyx_t_1;
            } else {
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
              __pyx_t_7 = __pyx_t_3;
            }
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
            __pyx_t_35 = __Pyx_PyInt_As_npy_int32(__pyx_t_7); if (unlikely((__pyx_t_35 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 759, __pyx_L1_error)</span>
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
            __pyx_t_33 = __pyx_t_35;
          } else {
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_head);
            __pyx_t_7 = __pyx_v_head;
            __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_SubtractObjC</span>(__pyx_v_lhead, __pyx_int_50, 50, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 759, __pyx_L1_error)</span>
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
            __pyx_t_91 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_7, __pyx_t_1, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_91);<span class='error_goto'> if (unlikely(!__pyx_t_91)) __PYX_ERR(0, 759, __pyx_L1_error)</span>
            __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_91); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 759, __pyx_L1_error)</span>
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
            if (__pyx_t_50) {
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
              __pyx_t_3 = __pyx_t_7;
            } else {
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
              __pyx_t_3 = __pyx_t_1;
            }
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
            __pyx_t_35 = __Pyx_PyInt_As_npy_int32(__pyx_t_3); if (unlikely((__pyx_t_35 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 759, __pyx_L1_error)</span>
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
            __pyx_t_33 = __pyx_t_35;
          }
          __pyx_t_98 = 14;
          *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_98, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_33;
</pre><pre class="cython line score-0">&#xA0;<span class="">760</span>:                 <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-54" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">761</span>:                     <span class="n">tmp_state</span><span class="p">[</span><span class="mf">14</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">lhead</span><span class="o">+</span><span class="mf">50</span><span class="p">,</span> <span class="mf">3600</span><span class="o">+</span><span class="n">head</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">lhead</span> <span class="o">&gt;</span> <span class="n">head</span><span class="p">)</span> <span class="k">else</span> <span class="nb">max</span><span class="p">(</span><span class="mf">3600</span><span class="o">+</span><span class="n">lhead</span><span class="o">-</span><span class="mf">50</span><span class="p">,</span> <span class="n">head</span><span class="p">)</span></pre>
<pre class='cython code score-54 '>        /*else*/ {
          __pyx_t_3 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_lhead, __pyx_v_head, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 761, __pyx_L1_error)</span>
          __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_3); if (unlikely(__pyx_t_16 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 761, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
          if (__pyx_t_16) {
            __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_AddCObj</span>(__pyx_int_3600, __pyx_v_head, 0xE10, 0);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 761, __pyx_L1_error)</span>
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
            __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_AddObjC</span>(__pyx_v_lhead, __pyx_int_50, 50, 0);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 761, __pyx_L1_error)</span>
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
            __pyx_t_91 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_3, __pyx_t_7, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_91);<span class='error_goto'> if (unlikely(!__pyx_t_91)) __PYX_ERR(0, 761, __pyx_L1_error)</span>
            __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_91); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 761, __pyx_L1_error)</span>
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
            if (__pyx_t_50) {
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
              __pyx_t_1 = __pyx_t_3;
            } else {
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
              __pyx_t_1 = __pyx_t_7;
            }
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
            __pyx_t_35 = __Pyx_PyInt_As_npy_int32(__pyx_t_1); if (unlikely((__pyx_t_35 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 761, __pyx_L1_error)</span>
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
            __pyx_t_33 = __pyx_t_35;
          } else {
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_head);
            __pyx_t_1 = __pyx_v_head;
            __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_AddCObj</span>(__pyx_int_3600, __pyx_v_lhead, 0xE10, 0);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 761, __pyx_L1_error)</span>
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
            __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyInt_SubtractObjC</span>(__pyx_t_3, __pyx_int_50, 50, 0);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 761, __pyx_L1_error)</span>
            <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
            __pyx_t_91 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_1, __pyx_t_7, Py_GT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_91);<span class='error_goto'> if (unlikely(!__pyx_t_91)) __PYX_ERR(0, 761, __pyx_L1_error)</span>
            __pyx_t_50 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_91); if (unlikely(__pyx_t_50 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 761, __pyx_L1_error)</span>
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
            if (__pyx_t_50) {
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
              __pyx_t_3 = __pyx_t_1;
            } else {
              <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_7);
              __pyx_t_3 = __pyx_t_7;
            }
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
            __pyx_t_35 = __Pyx_PyInt_As_npy_int32(__pyx_t_3); if (unlikely((__pyx_t_35 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 761, __pyx_L1_error)</span>
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
            __pyx_t_33 = __pyx_t_35;
          }
          __pyx_t_99 = 14;
          *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_99, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_33;
        }
        __pyx_L24:;
      }
      __pyx_L23:;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">762</span>:             <span class="k">if</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">14</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mf">3600</span><span class="p">:</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">14</span><span class="p">]</span> <span class="o">-=</span> <span class="mf">3600</span> <span class="c">#</span></pre>
<pre class='cython code score-0 '>      __pyx_t_100 = 14;
      __pyx_t_16 = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_100, __pyx_pybuffernd_tmp_state.diminfo[0].strides)) &gt;= 0xE10) != 0);
      if (__pyx_t_16) {
        __pyx_t_101 = 14;
        *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_101, __pyx_pybuffernd_tmp_state.diminfo[0].strides) -= 0xE10;
      }
</pre><pre class="cython line score-0">&#xA0;<span class="">763</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">764</span>:             <span class="c">#if tmp_state[0] == 4:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">765</span>:             <span class="c">#    print(&quot;heading_1:&quot;,heading_1)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">766</span>:             <span class="c">#    print(&quot;tmp_state:\n&quot;, tmp_state)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">767</span>:             <span class="c">#    print(&quot;heading:&quot;,tmp_state[14])</span></pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">768</span>:             <span class="n">lidar_state</span><span class="p">[</span><span class="n">ll</span><span class="p">],</span> <span class="n">ll</span> <span class="o">=</span> <span class="n">tmp_state</span><span class="p">,</span> <span class="n">ll</span><span class="o">+</span><span class="mf">1</span>  <span class="c"># 将当前目标置入target_state中</span></pre>
<pre class='cython code score-4 '>      __pyx_t_3 = ((PyObject *)__pyx_v_tmp_state);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      __pyx_t_17 = (__pyx_v_ll + 1);
      if (unlikely(<span class='pyx_c_api'>__Pyx_SetItemInt</span>(((PyObject *)__pyx_v_lidar_state), __pyx_v_ll, __pyx_t_3, long, 1, __Pyx_PyInt_From_long, 0, 0, 0) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 768, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_v_ll = __pyx_t_17;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">769</span>:             <span class="n">selected</span><span class="p">[</span><span class="n">idex</span><span class="p">]</span> <span class="o">=</span> <span class="n">idex</span></pre>
<pre class='cython code score-0 '>      __pyx_t_102 = __pyx_v_idex;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer.buf, __pyx_t_102, __pyx_pybuffernd_selected.diminfo[0].strides) = __pyx_v_idex;
</pre><pre class="cython line score-117" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">770</span>:     <span class="n">selected</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">selected</span> <span class="o">&lt;</span> <span class="mf">0</span><span class="p">)[</span><span class="mf">0</span><span class="p">])</span> <span class="c"># &lt;0的都是没有找到被对应的</span></pre>
<pre class='cython code score-117 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_7 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_91 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_91)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_91);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_91, __pyx_n_s_where);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
  __pyx_t_91 = <span class='py_c_api'>PyObject_RichCompare</span>(((PyObject *)__pyx_v_selected), __pyx_int_0, Py_LT); <span class='refnanny'>__Pyx_XGOTREF</span>(__pyx_t_91);<span class='error_goto'> if (unlikely(!__pyx_t_91)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
  __pyx_t_5 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
    }
  }
  if (!__pyx_t_5) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_2, __pyx_t_91);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_91};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
      PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_91};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_91); __pyx_t_91 = 0;
    } else
    #endif
    {
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_5); __pyx_t_5 = NULL;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_91);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+1, __pyx_t_91);
      __pyx_t_91 = 0;
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_1, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_7))) {
    __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_7);
    if (likely(__pyx_t_1)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_7);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_7, function);
    }
  }
  if (!__pyx_t_1) {
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_7, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_7)) {
      PyObject *__pyx_temp[2] = {__pyx_t_1, __pyx_t_2};
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_7)) {
      PyObject *__pyx_temp[2] = {__pyx_t_1, __pyx_t_2};
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_7, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    {
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_1); __pyx_t_1 = NULL;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+1, __pyx_t_2);
      __pyx_t_2 = 0;
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_7, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 770, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
  if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 770, __pyx_L1_error)</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_3);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
    __pyx_t_6 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_6 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_11, &amp;__pyx_t_10, &amp;__pyx_t_9);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_selected, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_9);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_11, __pyx_t_10, __pyx_t_9);
      }
      __pyx_t_11 = __pyx_t_10 = __pyx_t_9 = 0;
    }
    __pyx_pybuffernd_selected.diminfo[0].strides = __pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_selected.diminfo[0].shape = __pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_6 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 770, __pyx_L1_error)</span>
  }
  __pyx_t_8 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_selected, ((PyArrayObject *)__pyx_t_3));
  __pyx_t_3 = 0;
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">771</span>:     <span class="k">return</span> <span class="n">selected</span><span class="p">,</span> <span class="n">lidar_state</span><span class="p">,</span> <span class="n">ll</span></pre>
<pre class='cython code score-13 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_ll);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 771, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_7 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_7)) __PYX_ERR(0, 771, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_selected));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_selected));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 0, ((PyObject *)__pyx_v_selected));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_lidar_state));
  <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_lidar_state));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 1, ((PyObject *)__pyx_v_lidar_state));
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_7, 2, __pyx_t_3);
  __pyx_t_3 = 0;
  __pyx_r = __pyx_t_7;
  __pyx_t_7 = 0;
  goto __pyx_L0;
</pre><pre class="cython line score-0">&#xA0;<span class="">772</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">773</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">boundscheck</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">774</span>: <span class="nd">@cython</span><span class="o">.</span><span class="n">wraparound</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">775</span>: <span class="c"># lidar_data: xc, yc, xmin, xmax, ymin, ymax, zmin, zmax, I</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">776</span>: <span class="c"># lidar_state: ID[0], class[1], xc[2], yc[3], vx[4], vy[5], xmin[6], xmax[7], ymin[8], ymax[9], </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">777</span>: <span class="c">#              zmin[10], zmax[11], I[12], life[13], heading[14]</span></pre>
<pre class="cython line score-218" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">778</span>: <span class="k">def</span> <span class="nf">lidar_movement</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">lidar_data</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">last_lidar_state</span><span class="p">,</span></pre>
<pre class='cython code score-218 '>/* Python wrapper */
static PyObject *__pyx_pw_10Lidar_core_39lidar_movement(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_10Lidar_core_39lidar_movement = {"lidar_movement", (PyCFunction)__pyx_pw_10Lidar_core_39lidar_movement, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_pw_10Lidar_core_39lidar_movement(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_lidar_data = 0;
  PyArrayObject *__pyx_v_last_lidar_state = 0;
  PyArrayObject *__pyx_v_lidar_position = 0;
  long __pyx_v_ini_life;
  long __pyx_v_full_life;
  long __pyx_v_next_ID;
  PyArrayObject *__pyx_v_R_c2w = 0;
  PyArrayObject *__pyx_v_P0_UTM = 0;
  double __pyx_v_dt;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("lidar_movement (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s_lidar_data,&amp;__pyx_n_s_last_lidar_state,&amp;__pyx_n_s_lidar_position,&amp;__pyx_n_s_ini_life,&amp;__pyx_n_s_full_life,&amp;__pyx_n_s_next_ID,&amp;__pyx_n_s_R_c2w,&amp;__pyx_n_s_P0_UTM,&amp;__pyx_n_s_dt,0};
    PyObject* values[9] = {0,0,0,0,0,0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case  9: values[8] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 8);
        CYTHON_FALLTHROUGH;
        case  8: values[7] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7);
        CYTHON_FALLTHROUGH;
        case  7: values[6] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6);
        CYTHON_FALLTHROUGH;
        case  6: values[5] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5);
        CYTHON_FALLTHROUGH;
        case  5: values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
        CYTHON_FALLTHROUGH;
        case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        CYTHON_FALLTHROUGH;
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        CYTHON_FALLTHROUGH;
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        CYTHON_FALLTHROUGH;
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        CYTHON_FALLTHROUGH;
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_lidar_data)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        CYTHON_FALLTHROUGH;
        case  1:
        if (likely((values[1] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_last_lidar_state)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lidar_movement", 0, 8, 9, 1); <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  2:
        if (likely((values[2] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_lidar_position)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lidar_movement", 0, 8, 9, 2); <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  3:
        if (likely((values[3] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_ini_life)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lidar_movement", 0, 8, 9, 3); <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  4:
        if (likely((values[4] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_full_life)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lidar_movement", 0, 8, 9, 4); <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  5:
        if (likely((values[5] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_next_ID)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lidar_movement", 0, 8, 9, 5); <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  6:
        if (likely((values[6] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_R_c2w)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lidar_movement", 0, 8, 9, 6); <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  7:
        if (likely((values[7] = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_P0_UTM)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lidar_movement", 0, 8, 9, 7); <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L3_error)</span>
        }
        CYTHON_FALLTHROUGH;
        case  8:
        if (kw_args &gt; 0) {
          PyObject* value = <span class='pyx_c_api'>__Pyx_PyDict_GetItemStr</span>(__pyx_kwds, __pyx_n_s_dt);
          if (value) { values[8] = value; kw_args--; }
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "lidar_movement") &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L3_error)</span>
      }
    } else {
      switch (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)) {
        case  9: values[8] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 8);
        CYTHON_FALLTHROUGH;
        case  8: values[7] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7);
        values[6] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6);
        values[5] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5);
        values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
        values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        break;
        default: goto __pyx_L5_argtuple_error;
      }
    }
    __pyx_v_lidar_data = ((PyArrayObject *)values[0]);
    __pyx_v_last_lidar_state = ((PyArrayObject *)values[1]);
    __pyx_v_lidar_position = ((PyArrayObject *)values[2]);
    __pyx_v_ini_life = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(values[3]); if (unlikely((__pyx_v_ini_life == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 779, __pyx_L3_error)</span>
    __pyx_v_full_life = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(values[4]); if (unlikely((__pyx_v_full_life == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 779, __pyx_L3_error)</span>
    __pyx_v_next_ID = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(values[5]); if (unlikely((__pyx_v_next_ID == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 779, __pyx_L3_error)</span>
    __pyx_v_R_c2w = ((PyArrayObject *)values[6]);
    __pyx_v_P0_UTM = ((PyArrayObject *)values[7]);
    if (values[8]) {
      __pyx_v_dt = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(values[8]); if (unlikely((__pyx_v_dt == (double)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 780, __pyx_L3_error)</span>
    } else {
      __pyx_v_dt = ((double)0.1);
    }
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("lidar_movement", 0, 8, 9, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args)); <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L3_error)</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.lidar_movement", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_lidar_data), __pyx_ptype_5numpy_ndarray, 1, "lidar_data", 0))) <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_last_lidar_state), __pyx_ptype_5numpy_ndarray, 1, "last_lidar_state", 0))) <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_lidar_position), __pyx_ptype_5numpy_ndarray, 1, "lidar_position", 0))) <span class='error_goto'>__PYX_ERR(0, 779, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_R_c2w), __pyx_ptype_5numpy_ndarray, 1, "R_c2w", 0))) <span class='error_goto'>__PYX_ERR(0, 780, __pyx_L1_error)</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_P0_UTM), __pyx_ptype_5numpy_ndarray, 1, "P0_UTM", 0))) <span class='error_goto'>__PYX_ERR(0, 780, __pyx_L1_error)</span>
  __pyx_r = __pyx_pf_10Lidar_core_38lidar_movement(__pyx_self, __pyx_v_lidar_data, __pyx_v_last_lidar_state, __pyx_v_lidar_position, __pyx_v_ini_life, __pyx_v_full_life, __pyx_v_next_ID, __pyx_v_R_c2w, __pyx_v_P0_UTM, __pyx_v_dt);

  /* function exit code */
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}

static PyObject *__pyx_pf_10Lidar_core_38lidar_movement(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_lidar_data, PyArrayObject *__pyx_v_last_lidar_state, PyArrayObject *__pyx_v_lidar_position, long __pyx_v_ini_life, long __pyx_v_full_life, long __pyx_v_next_ID, PyArrayObject *__pyx_v_R_c2w, PyArrayObject *__pyx_v_P0_UTM, double __pyx_v_dt) {
  long __pyx_v_lidar_ID;
  CYTHON_UNUSED long __pyx_v_ini_heading;
  long __pyx_v_i;
  long __pyx_v_j;
  long __pyx_v_ll;
  long __pyx_v_dx;
  long __pyx_v_dy;
  CYTHON_UNUSED long __pyx_v_Kd_fusion;
  CYTHON_UNUSED long __pyx_v_Kd;
  long __pyx_v_X;
  long __pyx_v_Y;
  PyArrayObject *__pyx_v_selected = 0;
  PyArrayObject *__pyx_v_tmp_state = 0;
  PyArrayObject *__pyx_v_targets_square = 0;
  CYTHON_UNUSED PyArrayObject *__pyx_v_target = 0;
  PyArrayObject *__pyx_v_target_3Dlist_num = 0;
  PyArrayObject *__pyx_v_ini_headings = 0;
  CYTHON_UNUSED PyArrayObject *__pyx_v_fusion_target = 0;
  PyArrayObject *__pyx_v_lidar_state = 0;
  PyArrayObject *__pyx_v_lidar_predict = 0;
  PyArrayObject *__pyx_v_target_3Dlist = 0;
  PyObject *__pyx_v_delta_t = NULL;
  PyObject *__pyx_v_new_targets = NULL;
  PyObject *__pyx_v_tracked_num = NULL;
  PyObject *__pyx_v_coordinate_rotation = NULL;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_P0_UTM;
  __Pyx_Buffer __pyx_pybuffer_P0_UTM;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_R_c2w;
  __Pyx_Buffer __pyx_pybuffer_R_c2w;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_fusion_target;
  __Pyx_Buffer __pyx_pybuffer_fusion_target;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_ini_headings;
  __Pyx_Buffer __pyx_pybuffer_ini_headings;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_last_lidar_state;
  __Pyx_Buffer __pyx_pybuffer_last_lidar_state;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_lidar_data;
  __Pyx_Buffer __pyx_pybuffer_lidar_data;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_lidar_position;
  __Pyx_Buffer __pyx_pybuffer_lidar_position;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_lidar_predict;
  __Pyx_Buffer __pyx_pybuffer_lidar_predict;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_lidar_state;
  __Pyx_Buffer __pyx_pybuffer_lidar_state;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_selected;
  __Pyx_Buffer __pyx_pybuffer_selected;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target;
  __Pyx_Buffer __pyx_pybuffer_target;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target_3Dlist;
  __Pyx_Buffer __pyx_pybuffer_target_3Dlist;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_target_3Dlist_num;
  __Pyx_Buffer __pyx_pybuffer_target_3Dlist_num;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_targets_square;
  __Pyx_Buffer __pyx_pybuffer_targets_square;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_tmp_state;
  __Pyx_Buffer __pyx_pybuffer_tmp_state;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='refnanny'>__Pyx_RefNannySetupContext</span>("lidar_movement", 0);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_lidar_data);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>((PyObject *)__pyx_v_last_lidar_state);
  __pyx_pybuffer_selected.pybuffer.buf = NULL;
  __pyx_pybuffer_selected.refcount = 0;
  __pyx_pybuffernd_selected.data = NULL;
  __pyx_pybuffernd_selected.rcbuffer = &amp;__pyx_pybuffer_selected;
  __pyx_pybuffer_tmp_state.pybuffer.buf = NULL;
  __pyx_pybuffer_tmp_state.refcount = 0;
  __pyx_pybuffernd_tmp_state.data = NULL;
  __pyx_pybuffernd_tmp_state.rcbuffer = &amp;__pyx_pybuffer_tmp_state;
  __pyx_pybuffer_targets_square.pybuffer.buf = NULL;
  __pyx_pybuffer_targets_square.refcount = 0;
  __pyx_pybuffernd_targets_square.data = NULL;
  __pyx_pybuffernd_targets_square.rcbuffer = &amp;__pyx_pybuffer_targets_square;
  __pyx_pybuffer_target.pybuffer.buf = NULL;
  __pyx_pybuffer_target.refcount = 0;
  __pyx_pybuffernd_target.data = NULL;
  __pyx_pybuffernd_target.rcbuffer = &amp;__pyx_pybuffer_target;
  __pyx_pybuffer_target_3Dlist_num.pybuffer.buf = NULL;
  __pyx_pybuffer_target_3Dlist_num.refcount = 0;
  __pyx_pybuffernd_target_3Dlist_num.data = NULL;
  __pyx_pybuffernd_target_3Dlist_num.rcbuffer = &amp;__pyx_pybuffer_target_3Dlist_num;
  __pyx_pybuffer_ini_headings.pybuffer.buf = NULL;
  __pyx_pybuffer_ini_headings.refcount = 0;
  __pyx_pybuffernd_ini_headings.data = NULL;
  __pyx_pybuffernd_ini_headings.rcbuffer = &amp;__pyx_pybuffer_ini_headings;
  __pyx_pybuffer_fusion_target.pybuffer.buf = NULL;
  __pyx_pybuffer_fusion_target.refcount = 0;
  __pyx_pybuffernd_fusion_target.data = NULL;
  __pyx_pybuffernd_fusion_target.rcbuffer = &amp;__pyx_pybuffer_fusion_target;
  __pyx_pybuffer_lidar_state.pybuffer.buf = NULL;
  __pyx_pybuffer_lidar_state.refcount = 0;
  __pyx_pybuffernd_lidar_state.data = NULL;
  __pyx_pybuffernd_lidar_state.rcbuffer = &amp;__pyx_pybuffer_lidar_state;
  __pyx_pybuffer_lidar_predict.pybuffer.buf = NULL;
  __pyx_pybuffer_lidar_predict.refcount = 0;
  __pyx_pybuffernd_lidar_predict.data = NULL;
  __pyx_pybuffernd_lidar_predict.rcbuffer = &amp;__pyx_pybuffer_lidar_predict;
  __pyx_pybuffer_target_3Dlist.pybuffer.buf = NULL;
  __pyx_pybuffer_target_3Dlist.refcount = 0;
  __pyx_pybuffernd_target_3Dlist.data = NULL;
  __pyx_pybuffernd_target_3Dlist.rcbuffer = &amp;__pyx_pybuffer_target_3Dlist;
  __pyx_pybuffer_lidar_data.pybuffer.buf = NULL;
  __pyx_pybuffer_lidar_data.refcount = 0;
  __pyx_pybuffernd_lidar_data.data = NULL;
  __pyx_pybuffernd_lidar_data.rcbuffer = &amp;__pyx_pybuffer_lidar_data;
  __pyx_pybuffer_last_lidar_state.pybuffer.buf = NULL;
  __pyx_pybuffer_last_lidar_state.refcount = 0;
  __pyx_pybuffernd_last_lidar_state.data = NULL;
  __pyx_pybuffernd_last_lidar_state.rcbuffer = &amp;__pyx_pybuffer_last_lidar_state;
  __pyx_pybuffer_lidar_position.pybuffer.buf = NULL;
  __pyx_pybuffer_lidar_position.refcount = 0;
  __pyx_pybuffernd_lidar_position.data = NULL;
  __pyx_pybuffernd_lidar_position.rcbuffer = &amp;__pyx_pybuffer_lidar_position;
  __pyx_pybuffer_R_c2w.pybuffer.buf = NULL;
  __pyx_pybuffer_R_c2w.refcount = 0;
  __pyx_pybuffernd_R_c2w.data = NULL;
  __pyx_pybuffernd_R_c2w.rcbuffer = &amp;__pyx_pybuffer_R_c2w;
  __pyx_pybuffer_P0_UTM.pybuffer.buf = NULL;
  __pyx_pybuffer_P0_UTM.refcount = 0;
  __pyx_pybuffernd_P0_UTM.data = NULL;
  __pyx_pybuffernd_P0_UTM.rcbuffer = &amp;__pyx_pybuffer_P0_UTM;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_data, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_lidar_data.diminfo[0].strides = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_data.diminfo[0].shape = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_data.diminfo[1].strides = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_data.diminfo[1].shape = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_last_lidar_state, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_last_lidar_state.diminfo[0].strides = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_last_lidar_state.diminfo[0].shape = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_last_lidar_state.diminfo[1].strides = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_last_lidar_state.diminfo[1].shape = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_position, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 3, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_lidar_position.diminfo[0].strides = __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_position.diminfo[0].shape = __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_position.diminfo[1].strides = __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_position.diminfo[1].shape = __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.shape[1]; __pyx_pybuffernd_lidar_position.diminfo[2].strides = __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.strides[2]; __pyx_pybuffernd_lidar_position.diminfo[2].shape = __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.shape[2];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_R_c2w, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_float64_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_R_c2w.diminfo[0].strides = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_R_c2w.diminfo[0].shape = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_R_c2w.diminfo[1].strides = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_R_c2w.diminfo[1].shape = __pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_P0_UTM, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L1_error)</span>
  }
  __pyx_pybuffernd_P0_UTM.diminfo[0].strides = __pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_P0_UTM.diminfo[0].shape = __pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer.shape[0];
/* … */
  /* function exit code */
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    __Pyx_PyThreadState_declare
    __Pyx_PyThreadState_assign
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_fusion_target.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_targets_square.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("Lidar_core.lidar_movement", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_P0_UTM.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_R_c2w.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_fusion_target.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_targets_square.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_selected);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_tmp_state);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_targets_square);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_target);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_target_3Dlist_num);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_ini_headings);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_fusion_target);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_lidar_state);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_lidar_predict);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_target_3Dlist);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_delta_t);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_new_targets);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_tracked_num);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_coordinate_rotation);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_lidar_data);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_last_lidar_state);
  <span class='refnanny'>__Pyx_XGIVEREF</span>(__pyx_r);
  <span class='refnanny'>__Pyx_RefNannyFinishContext</span>();
  return __pyx_r;
}
/* … */
  __pyx_tuple__156 = <span class='py_c_api'>PyTuple_Pack</span>(48, __pyx_n_s_lidar_data, __pyx_n_s_last_lidar_state, __pyx_n_s_lidar_position, __pyx_n_s_ini_life, __pyx_n_s_full_life, __pyx_n_s_next_ID, __pyx_n_s_R_c2w, __pyx_n_s_P0_UTM, __pyx_n_s_dt, __pyx_n_s_lidar_ID, __pyx_n_s_ini_heading, __pyx_n_s_i, __pyx_n_s_j, __pyx_n_s_ll, __pyx_n_s_dx, __pyx_n_s_dy, __pyx_n_s_idex, __pyx_n_s_Kd_fusion, __pyx_n_s_Kd, __pyx_n_s_xmin, __pyx_n_s_xmax, __pyx_n_s_ymin, __pyx_n_s_ymax, __pyx_n_s_zmin, __pyx_n_s_zmax, __pyx_n_s_I, __pyx_n_s_X, __pyx_n_s_Y, __pyx_n_s_area_predict, __pyx_n_s_area, __pyx_n_s_selected, __pyx_n_s_dr, __pyx_n_s_tmp_state, __pyx_n_s_targets_square, __pyx_n_s_target, __pyx_n_s_trace_d, __pyx_n_s_target_3Dlist_num, __pyx_n_s_ini_headings, __pyx_n_s_fusion_target, __pyx_n_s_lidar_state, __pyx_n_s_targetx, __pyx_n_s_trace_bias, __pyx_n_s_lidar_predict, __pyx_n_s_target_3Dlist, __pyx_n_s_delta_t, __pyx_n_s_new_targets, __pyx_n_s_tracked_num, __pyx_n_s_coordinate_rotation);<span class='error_goto'> if (unlikely(!__pyx_tuple__156)) __PYX_ERR(0, 778, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__156);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__156);
/* … */
  __pyx_t_2 = PyCFunction_NewEx(&amp;__pyx_mdef_10Lidar_core_39lidar_movement, NULL, __pyx_n_s_Lidar_core);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 778, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_lidar_movement, __pyx_t_2) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 778, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_codeobj__157 = (PyObject*)<span class='pyx_c_api'>__Pyx_PyCode_New</span>(9, 0, 48, 0, CO_OPTIMIZED|CO_NEWLOCALS, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_tuple__156, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_Lidar_core_pyx, __pyx_n_s_lidar_movement, 778, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_codeobj__157)) __PYX_ERR(0, 778, __pyx_L1_error)</span>
</pre><pre class="cython line score-0">&#xA0;<span class="">779</span>:                    <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">3</span><span class="p">]</span> <span class="n">lidar_position</span><span class="p">,</span> <span class="nb">long</span> <span class="n">ini_life</span><span class="p">,</span> <span class="nb">long</span> <span class="n">full_life</span><span class="p">,</span> <span class="nb">long</span> <span class="n">next_ID</span><span class="p">,</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">780</span>:                    <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">R_c2w</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">int32_t</span><span class="p">,</span> <span class="n">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">P0_UTM</span><span class="p">,</span> <span class="n">double</span> <span class="n">dt</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">781</span>:     <span class="c">#print(&quot;last_lidar_state.shape[1]:&quot;, last_lidar_state.shape[1])</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">782</span>:     <span class="n">ini_life</span> <span class="o">=</span> <span class="o">-</span><span class="mf">2</span></pre>
<pre class='cython code score-0 '>  __pyx_v_ini_life = -2L;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">783</span>:     <span class="n">full_life</span> <span class="o">=</span> <span class="mf">5</span></pre>
<pre class='cython code score-0 '>  __pyx_v_full_life = 5;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">784</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">lidar_ID</span> <span class="o">=</span> <span class="mf">0</span></pre>
<pre class='cython code score-0 '>  __pyx_v_lidar_ID = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">785</span>:     <span class="c">#print(&quot;next_ID:&quot;, next_ID)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">786</span>:     <span class="c"># next_ID = next_ID + 1</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">787</span>:     <span class="c">#print(&quot;ini_life, full_life&quot;, ini_life, full_life)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">788</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">ini_heading</span> <span class="o">=</span> <span class="mf">1200</span></pre>
<pre class='cython code score-0 '>  __pyx_v_ini_heading = 0x4B0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">789</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">i</span><span class="p">,</span> <span class="nf">j</span><span class="p">,</span> <span class="nf">ll</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">idex</span><span class="p">,</span> <span class="n">Kd_fusion</span> <span class="o">=</span> <span class="mf">50</span><span class="p">,</span> <span class="n">Kd</span> <span class="o">=</span> <span class="mf">300</span></pre>
<pre class='cython code score-0 '>  __pyx_v_ll = 0;
  __pyx_v_Kd_fusion = 50;
  __pyx_v_Kd = 0x12C;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">790</span>:     <span class="k">cdef</span> <span class="kt">long</span> <span class="nf">xmin</span><span class="p">,</span> <span class="nf">xmax</span><span class="p">,</span> <span class="nf">ymin</span><span class="p">,</span> <span class="nf">ymax</span><span class="p">,</span> <span class="nf">zmin</span><span class="p">,</span> <span class="nf">zmax</span><span class="p">,</span> <span class="nf">I</span><span class="p">,</span> <span class="nf">X</span> <span class="o">=</span> <span class="mf">0</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>  __pyx_v_X = 0;
  __pyx_v_Y = 1;
</pre><pre class="cython line score-0">&#xA0;<span class="">791</span>:     <span class="k">cdef</span> <span class="kt">double</span> <span class="nf">area_predict</span><span class="p">,</span> <span class="nf">area</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">792</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">1</span><span class="p">]</span> <span class="n">selected</span><span class="p">,</span> <span class="n">dr</span><span class="p">,</span> <span class="n">tmp_state</span><span class="p">,</span> <span class="n">targets_square</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">trace_d</span><span class="p">,</span> <span class="n">target_3Dlist_num</span><span class="p">,</span> <span class="n">ini_headings</span></pre>
<pre class="cython line score-66" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">793</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">2</span><span class="p">]</span> <span class="n">fusion_target</span><span class="p">,</span> <span class="n">lidar_state</span><span class="p">,</span> <span class="n">targetx</span><span class="p">,</span> <span class="n">trace_bias</span><span class="p">,</span> <span class="n">lidar_predict</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">last_lidar_state</span><span class="p">[:,</span><span class="mf">1</span><span class="p">:</span><span class="mf">10</span><span class="p">])</span></pre>
<pre class='cython code score-66 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 793, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_copy);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 793, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
/* … */
  __pyx_slice__68 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__68)) __PYX_ERR(0, 793, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__68);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__68);
  __pyx_slice__69 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_1, __pyx_int_10, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__69)) __PYX_ERR(0, 793, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__69);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__69);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_last_lidar_state), __pyx_tuple__70);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 793, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_3))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_3);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_3, function);
    }
  }
  if (!__pyx_t_4) {
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_3, __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 793, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_2};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 793, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_3)) {
      PyObject *__pyx_temp[2] = {__pyx_t_4, __pyx_t_2};
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_3, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 793, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    {
      __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 793, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+1, __pyx_t_2);
      __pyx_t_2 = 0;
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 793, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 793, __pyx_L1_error)</span>
  __pyx_t_6 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_6, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 2, 0, __pyx_stack) == -1)) {
      __pyx_v_lidar_predict = ((PyArrayObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None); __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf = NULL;
      <span class='error_goto'>__PYX_ERR(0, 793, __pyx_L1_error)</span>
    } else {__pyx_pybuffernd_lidar_predict.diminfo[0].strides = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_predict.diminfo[0].shape = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_predict.diminfo[1].strides = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_predict.diminfo[1].shape = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.shape[1];
    }
  }
  __pyx_t_6 = 0;
  __pyx_v_lidar_predict = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_tuple__70 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_slice__68, __pyx_slice__69);<span class='error_goto'> if (unlikely(!__pyx_tuple__70)) __PYX_ERR(0, 793, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__70);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__70);
</pre><pre class="cython line score-0">&#xA0;<span class="">794</span>:     <span class="k">cdef</span> <span class="kt">np</span>.<span class="kt">ndarray</span>[<span class="kt">np</span>.<span class="nf">int32_t</span><span class="p">,</span> <span class="nf">ndim</span><span class="o">=</span><span class="mf">3</span><span class="p">]</span> <span class="n">target_3Dlist</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">795</span>: </pre>
<pre class="cython line score-71" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">796</span>:     <span class="n">target</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span> <span class="c"># lidar_data.shape[1] = 9</span></pre>
<pre class='cython code score-71 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 796, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 796, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[1]));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 796, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 796, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 796, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_5))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_5);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_5, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_5)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_3, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 796, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_5)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_3, __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 796, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 796, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    if (__pyx_t_2) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0+__pyx_t_7, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 1+__pyx_t_7, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_t_8, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 796, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 796, __pyx_L1_error)</span>
  __pyx_t_9 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_9, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_10, &amp;__pyx_t_11, &amp;__pyx_t_12);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_12);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_10, __pyx_t_11, __pyx_t_12);
      }
      __pyx_t_10 = __pyx_t_11 = __pyx_t_12 = 0;
    }
    __pyx_pybuffernd_target.diminfo[0].strides = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target.diminfo[0].shape = __pyx_pybuffernd_target.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 796, __pyx_L1_error)</span>
  }
  __pyx_t_9 = 0;
  __pyx_v_target = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-80" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">797</span>:     <span class="n">fusion_target</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-80 '>  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 797, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 797, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 797, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[1]));<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 797, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 797, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_t_4);
  __pyx_t_5 = 0;
  __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 797, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 797, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_8))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_8);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_8, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_8)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_3, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 797, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_8)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_3, __pyx_t_5};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 797, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  } else
  #endif
  {
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 797, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (__pyx_t_4) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_7, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_7, __pyx_t_5);
    __pyx_t_3 = 0;
    __pyx_t_5 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_8, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 797, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 797, __pyx_L1_error)</span>
  __pyx_t_6 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_fusion_target.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_fusion_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_6, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_12, &amp;__pyx_t_11, &amp;__pyx_t_10);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_fusion_target.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_fusion_target, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_12); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_12, __pyx_t_11, __pyx_t_10);
      }
      __pyx_t_12 = __pyx_t_11 = __pyx_t_10 = 0;
    }
    __pyx_pybuffernd_fusion_target.diminfo[0].strides = __pyx_pybuffernd_fusion_target.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_fusion_target.diminfo[0].shape = __pyx_pybuffernd_fusion_target.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_fusion_target.diminfo[1].strides = __pyx_pybuffernd_fusion_target.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_fusion_target.diminfo[1].shape = __pyx_pybuffernd_fusion_target.rcbuffer-&gt;pybuffer.shape[1];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 797, __pyx_L1_error)</span>
  }
  __pyx_t_6 = 0;
  __pyx_v_fusion_target = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-80" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">798</span>:     <span class="n">lidar_state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">last_lidar_state</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">last_lidar_state</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span> <span class="c"># 14列</span></pre>
<pre class='cython code score-80 '>  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 798, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_8, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 798, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>(((__pyx_v_lidar_data-&gt;dimensions[0]) + (__pyx_v_last_lidar_state-&gt;dimensions[0])));<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 798, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_last_lidar_state-&gt;dimensions[1]));<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 798, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 798, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_8);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_t_5);
  __pyx_t_8 = 0;
  __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 798, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 798, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_2))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_2);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_2, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_3, __pyx_t_8};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 798, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_2)) {
    PyObject *__pyx_temp[3] = {__pyx_t_5, __pyx_t_3, __pyx_t_8};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_2, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 798, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  } else
  #endif
  {
    __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 798, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (__pyx_t_5) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+__pyx_t_7, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1+__pyx_t_7, __pyx_t_8);
    __pyx_t_3 = 0;
    __pyx_t_8 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 798, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 798, __pyx_L1_error)</span>
  __pyx_t_6 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_6, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 2, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_10, &amp;__pyx_t_11, &amp;__pyx_t_12);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_state, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 2, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_12);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_10, __pyx_t_11, __pyx_t_12);
      }
      __pyx_t_10 = __pyx_t_11 = __pyx_t_12 = 0;
    }
    __pyx_pybuffernd_lidar_state.diminfo[0].strides = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_state.diminfo[0].shape = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_state.diminfo[1].strides = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_state.diminfo[1].shape = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.shape[1];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 798, __pyx_L1_error)</span>
  }
  __pyx_t_6 = 0;
  __pyx_v_lidar_state = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-71" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">799</span>:     <span class="n">tmp_state</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">last_lidar_state</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span> <span class="c"># tmp_state.shape[0] = 15</span></pre>
<pre class='cython code score-71 '>  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 799, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 799, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_last_lidar_state-&gt;dimensions[1]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 799, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 799, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_8, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 799, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_t_8 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
    __pyx_t_8 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
    if (likely(__pyx_t_8)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_2, __pyx_t_3};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 799, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_8, __pyx_t_2, __pyx_t_3};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 799, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  {
    __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 799, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    if (__pyx_t_8) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_8); __pyx_t_8 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+__pyx_t_7, __pyx_t_2);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1+__pyx_t_7, __pyx_t_3);
    __pyx_t_2 = 0;
    __pyx_t_3 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 799, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 799, __pyx_L1_error)</span>
  __pyx_t_9 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_9, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_12, &amp;__pyx_t_11, &amp;__pyx_t_10);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_tmp_state, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_12); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_12, __pyx_t_11, __pyx_t_10);
      }
      __pyx_t_12 = __pyx_t_11 = __pyx_t_10 = 0;
    }
    __pyx_pybuffernd_tmp_state.diminfo[0].strides = __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_tmp_state.diminfo[0].shape = __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 799, __pyx_L1_error)</span>
  }
  __pyx_t_9 = 0;
  __pyx_v_tmp_state = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-71" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">800</span>:     <span class="n">targets_square</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span> <span class="c"># 雷达检测目标的占地面积</span></pre>
<pre class='cython code score-71 '>  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 800, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 800, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 800, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 800, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 800, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_5))) {
    __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_5);
    if (likely(__pyx_t_3)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_5, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_5)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_4, __pyx_t_2};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 800, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_5)) {
    PyObject *__pyx_temp[3] = {__pyx_t_3, __pyx_t_4, __pyx_t_2};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 800, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  {
    __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 800, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    if (__pyx_t_3) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_t_3); __pyx_t_3 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0+__pyx_t_7, __pyx_t_4);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 1+__pyx_t_7, __pyx_t_2);
    __pyx_t_4 = 0;
    __pyx_t_2 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_t_8, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 800, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 800, __pyx_L1_error)</span>
  __pyx_t_9 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_targets_square.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_targets_square.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_9, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_10, &amp;__pyx_t_11, &amp;__pyx_t_12);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_targets_square.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_targets_square, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_12);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_10, __pyx_t_11, __pyx_t_12);
      }
      __pyx_t_10 = __pyx_t_11 = __pyx_t_12 = 0;
    }
    __pyx_pybuffernd_targets_square.diminfo[0].strides = __pyx_pybuffernd_targets_square.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_targets_square.diminfo[0].shape = __pyx_pybuffernd_targets_square.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 800, __pyx_L1_error)</span>
  }
  __pyx_t_9 = 0;
  __pyx_v_targets_square = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-83" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">801</span>:     <span class="n">target_3Dlist</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">last_lidar_state</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">1</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-83 '>  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_5, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_last_lidar_state-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_data-&gt;dimensions[1]));<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_5);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_t_2);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 2, __pyx_t_4);
  __pyx_t_5 = 0;
  __pyx_t_2 = 0;
  __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_8))) {
    __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_8);
    if (likely(__pyx_t_4)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_8, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_8)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_3, __pyx_t_2};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_8)) {
    PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_3, __pyx_t_2};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  } else
  #endif
  {
    __pyx_t_5 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    if (__pyx_t_4) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0, __pyx_t_4); __pyx_t_4 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 0+__pyx_t_7, __pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_5, 1+__pyx_t_7, __pyx_t_2);
    __pyx_t_3 = 0;
    __pyx_t_2 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_8, __pyx_t_5, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 801, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 801, __pyx_L1_error)</span>
  __pyx_t_13 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_13, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 3, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_12, &amp;__pyx_t_11, &amp;__pyx_t_10);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target_3Dlist, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 3, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_12); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_12, __pyx_t_11, __pyx_t_10);
      }
      __pyx_t_12 = __pyx_t_11 = __pyx_t_10 = 0;
    }
    __pyx_pybuffernd_target_3Dlist.diminfo[0].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target_3Dlist.diminfo[0].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_target_3Dlist.diminfo[1].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_target_3Dlist.diminfo[1].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[1]; __pyx_pybuffernd_target_3Dlist.diminfo[2].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[2]; __pyx_pybuffernd_target_3Dlist.diminfo[2].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[2];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 801, __pyx_L1_error)</span>
  }
  __pyx_t_13 = 0;
  __pyx_v_target_3Dlist = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-71" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">802</span>:     <span class="n">target_3Dlist_num</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">last_lidar_state</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span></pre>
<pre class='cython code score-71 '>  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 802, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_8, __pyx_n_s_zeros);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 802, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_last_lidar_state-&gt;dimensions[0]));<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 802, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 802, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 802, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_5))) {
    __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_5);
    if (likely(__pyx_t_2)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_5, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_5)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_8, __pyx_t_3};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 802, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_5)) {
    PyObject *__pyx_temp[3] = {__pyx_t_2, __pyx_t_8, __pyx_t_3};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_5, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 802, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  } else
  #endif
  {
    __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 802, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (__pyx_t_2) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_2); __pyx_t_2 = NULL;
    }
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+__pyx_t_7, __pyx_t_8);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1+__pyx_t_7, __pyx_t_3);
    __pyx_t_8 = 0;
    __pyx_t_3 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_5, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 802, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 802, __pyx_L1_error)</span>
  __pyx_t_9 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_9, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_10, &amp;__pyx_t_11, &amp;__pyx_t_12);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target_3Dlist_num, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_12);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_10, __pyx_t_11, __pyx_t_12);
      }
      __pyx_t_10 = __pyx_t_11 = __pyx_t_12 = 0;
    }
    __pyx_pybuffernd_target_3Dlist_num.diminfo[0].strides = __pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target_3Dlist_num.diminfo[0].shape = __pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 802, __pyx_L1_error)</span>
  }
  __pyx_t_9 = 0;
  __pyx_v_target_3Dlist_num = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class="cython line score-34" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">803</span>:     <span class="n">delta_t</span> <span class="o">=</span> <span class="n">dt</span><span class="o">*</span><span class="p">(</span><span class="n">lidar_position</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">(</span><span class="mf">1</span><span class="p">))</span> <span class="c"># 用距离计算速度所需要的时间</span></pre>
<pre class='cython code score-34 '>  __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_dt);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 803, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  __pyx_t_5 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_position-&gt;dimensions[2]));<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 803, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 803, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 803, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_3, __pyx_tuple__71, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 803, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyNumber_Subtract</span>(__pyx_t_5, __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 803, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='py_c_api'>PyNumber_Multiply</span>(__pyx_t_1, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 803, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_v_delta_t = __pyx_t_4;
  __pyx_t_4 = 0;
/* … */
  __pyx_tuple__71 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_int_1);<span class='error_goto'> if (unlikely(!__pyx_tuple__71)) __PYX_ERR(0, 803, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__71);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__71);
</pre><pre class="cython line score-0">&#xA0;<span class="">804</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">805</span>:     <span class="c"># 预测历史上每个目标的位置</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">806</span>:     <span class="c"># lidar_predict:id(0) class(1), xc(2), yc(3), vx(4), vy(5), xmin(6), xmax(7), ymin(8), ymax(9)</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">807</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lidar_predict</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_14 = (__pyx_v_lidar_predict-&gt;dimensions[0]);
  __pyx_t_15 = __pyx_t_14;
  for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
    __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-32" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">808</span>:         <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="n">last_lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">4</span><span class="p">]</span><span class="o">*</span><span class="n">dt</span><span class="p">),</span> <span class="nb">long</span><span class="p">(</span><span class="n">last_lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">5</span><span class="p">]</span><span class="o">*</span><span class="n">dt</span><span class="p">)</span></pre>
<pre class='cython code score-32 '>    __pyx_t_17 = __pyx_v_i;
    __pyx_t_18 = 4;
    __pyx_t_4 = <span class='py_c_api'>PyFloat_FromDouble</span>(((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_17, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_18, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides)) * __pyx_v_dt));<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 808, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 808, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_19 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_3); if (unlikely((__pyx_t_19 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 808, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_20 = __pyx_v_i;
    __pyx_t_21 = 5;
    __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>(((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_20, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_21, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides)) * __pyx_v_dt));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 808, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 808, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_22 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_4); if (unlikely((__pyx_t_22 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 808, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_dx = __pyx_t_19;
    __pyx_v_dy = __pyx_t_22;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">809</span>:         <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">1</span><span class="p">],</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">1</span><span class="p">]</span><span class="o">+</span><span class="n">dx</span><span class="p">,</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">2</span><span class="p">]</span><span class="o">+</span><span class="n">dy</span> <span class="c"># xc, yc</span></pre>
<pre class='cython code score-0 '>    __pyx_t_23 = __pyx_v_i;
    __pyx_t_24 = 1;
    __pyx_t_22 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_23, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_24, __pyx_pybuffernd_lidar_predict.diminfo[1].strides)) + __pyx_v_dx);
    __pyx_t_25 = __pyx_v_i;
    __pyx_t_26 = 2;
    __pyx_t_19 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_25, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_26, __pyx_pybuffernd_lidar_predict.diminfo[1].strides)) + __pyx_v_dy);
    __pyx_t_27 = __pyx_v_i;
    __pyx_t_28 = 1;
    *__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_27, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_28, __pyx_pybuffernd_lidar_predict.diminfo[1].strides) = __pyx_t_22;
    __pyx_t_29 = __pyx_v_i;
    __pyx_t_30 = 2;
    *__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_29, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_30, __pyx_pybuffernd_lidar_predict.diminfo[1].strides) = __pyx_t_19;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">810</span>:         <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">5</span><span class="p">],</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">5</span><span class="p">]</span><span class="o">+</span><span class="n">dx</span><span class="p">,</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">7</span><span class="p">]</span><span class="o">+</span><span class="n">dy</span> <span class="c"># xmin, ymin</span></pre>
<pre class='cython code score-0 '>    __pyx_t_31 = __pyx_v_i;
    __pyx_t_32 = 5;
    __pyx_t_19 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_31, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_32, __pyx_pybuffernd_lidar_predict.diminfo[1].strides)) + __pyx_v_dx);
    __pyx_t_33 = __pyx_v_i;
    __pyx_t_34 = 7;
    __pyx_t_22 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_33, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_34, __pyx_pybuffernd_lidar_predict.diminfo[1].strides)) + __pyx_v_dy);
    __pyx_t_35 = __pyx_v_i;
    __pyx_t_36 = 5;
    *__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_35, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_36, __pyx_pybuffernd_lidar_predict.diminfo[1].strides) = __pyx_t_19;
    __pyx_t_37 = __pyx_v_i;
    __pyx_t_38 = 7;
    *__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_37, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_38, __pyx_pybuffernd_lidar_predict.diminfo[1].strides) = __pyx_t_22;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">811</span>:         <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">6</span><span class="p">],</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">8</span><span class="p">]</span> <span class="o">=</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">6</span><span class="p">]</span><span class="o">+</span><span class="n">dx</span><span class="p">,</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">8</span><span class="p">]</span><span class="o">+</span><span class="n">dy</span> <span class="c"># xmax, ymax</span></pre>
<pre class='cython code score-0 '>    __pyx_t_39 = __pyx_v_i;
    __pyx_t_40 = 6;
    __pyx_t_22 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_39, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_40, __pyx_pybuffernd_lidar_predict.diminfo[1].strides)) + __pyx_v_dx);
    __pyx_t_41 = __pyx_v_i;
    __pyx_t_42 = 8;
    __pyx_t_19 = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_41, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_42, __pyx_pybuffernd_lidar_predict.diminfo[1].strides)) + __pyx_v_dy);
    __pyx_t_43 = __pyx_v_i;
    __pyx_t_44 = 6;
    *__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_43, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_44, __pyx_pybuffernd_lidar_predict.diminfo[1].strides) = __pyx_t_22;
    __pyx_t_45 = __pyx_v_i;
    __pyx_t_46 = 8;
    *__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.buf, __pyx_t_45, __pyx_pybuffernd_lidar_predict.diminfo[0].strides, __pyx_t_46, __pyx_pybuffernd_lidar_predict.diminfo[1].strides) = __pyx_t_19;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">812</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">813</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lidar_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span>  <span class="c"># 计算当前时刻被测物占地面积</span></pre>
<pre class='cython code score-0 '>  __pyx_t_14 = (__pyx_v_lidar_data-&gt;dimensions[0]);
  __pyx_t_15 = __pyx_t_14;
  for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
    __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">814</span>:         <span class="n">targets_square</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">lidar_data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">3</span><span class="p">]</span><span class="o">-</span><span class="n">lidar_data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">2</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="n">lidar_data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">5</span><span class="p">]</span><span class="o">-</span><span class="n">lidar_data</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">4</span><span class="p">])</span></pre>
<pre class='cython code score-0 '>    __pyx_t_47 = __pyx_v_i;
    __pyx_t_48 = 3;
    __pyx_t_49 = __pyx_v_i;
    __pyx_t_50 = 2;
    __pyx_t_51 = __pyx_v_i;
    __pyx_t_52 = 5;
    __pyx_t_53 = __pyx_v_i;
    __pyx_t_54 = 4;
    __pyx_t_55 = __pyx_v_i;
    *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_targets_square.rcbuffer-&gt;pybuffer.buf, __pyx_t_55, __pyx_pybuffernd_targets_square.diminfo[0].strides) = (((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.buf, __pyx_t_47, __pyx_pybuffernd_lidar_data.diminfo[0].strides, __pyx_t_48, __pyx_pybuffernd_lidar_data.diminfo[1].strides)) - (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.buf, __pyx_t_49, __pyx_pybuffernd_lidar_data.diminfo[0].strides, __pyx_t_50, __pyx_pybuffernd_lidar_data.diminfo[1].strides))) * ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.buf, __pyx_t_51, __pyx_pybuffernd_lidar_data.diminfo[0].strides, __pyx_t_52, __pyx_pybuffernd_lidar_data.diminfo[1].strides)) - (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.buf, __pyx_t_53, __pyx_pybuffernd_lidar_data.diminfo[0].strides, __pyx_t_54, __pyx_pybuffernd_lidar_data.diminfo[1].strides))));
  }
</pre><pre class="cython line score-73" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">815</span>:     <span class="n">lidar_data</span> <span class="o">=</span> <span class="n">lidar_data</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="o">-</span><span class="n">targets_square</span><span class="p">)]</span> <span class="c"># 被测物面积从大到小排序</span></pre>
<pre class='cython code score-73 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 815, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s_argsort);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 815, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyNumber_Negative</span>(((PyObject *)__pyx_v_targets_square));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 815, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_5 = NULL;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
    }
  }
  if (!__pyx_t_5) {
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_1, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 815, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  } else {
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_1)) {
      PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_3};
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 815, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_1)) {
      PyObject *__pyx_temp[2] = {__pyx_t_5, __pyx_t_3};
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 815, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    } else
    #endif
    {
      __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 815, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_t_5); __pyx_t_5 = NULL;
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0+1, __pyx_t_3);
      __pyx_t_3 = 0;
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_8, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 815, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    }
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_data), __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 815, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 815, __pyx_L1_error)</span>
  __pyx_t_56 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_56, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_12, &amp;__pyx_t_11, &amp;__pyx_t_10);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_data, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_12); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_12, __pyx_t_11, __pyx_t_10);
      }
      __pyx_t_12 = __pyx_t_11 = __pyx_t_10 = 0;
    }
    __pyx_pybuffernd_lidar_data.diminfo[0].strides = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_data.diminfo[0].shape = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_data.diminfo[1].strides = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_data.diminfo[1].shape = __pyx_pybuffernd_lidar_data.rcbuffer-&gt;pybuffer.shape[1];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 815, __pyx_L1_error)</span>
  }
  __pyx_t_56 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_lidar_data, ((PyArrayObject *)__pyx_t_1));
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">816</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">817</span>:     <span class="c">#区分lidar_data中的新目标和跟踪成功的目标，并获取跟踪成功的目标与历史目标的对应关系</span></pre>
<pre class="cython line score-129" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">818</span>:     <span class="n">new_targets</span><span class="p">,</span> <span class="n">target_3Dlist</span><span class="p">,</span> <span class="n">target_3Dlist_num</span> <span class="o">=</span> <span class="n">track_process</span><span class="p">(</span><span class="n">lidar_data</span><span class="p">,</span> <span class="n">lidar_predict</span><span class="p">)</span></pre>
<pre class='cython code score-129 '>  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_track_process);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 818, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_8 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_4))) {
    __pyx_t_8 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_4);
    if (likely(__pyx_t_8)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_4, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_8, ((PyObject *)__pyx_v_lidar_data), ((PyObject *)__pyx_v_lidar_predict)};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 818, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_4)) {
    PyObject *__pyx_temp[3] = {__pyx_t_8, ((PyObject *)__pyx_v_lidar_data), ((PyObject *)__pyx_v_lidar_predict)};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_4, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 818, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  } else
  #endif
  {
    __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 818, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    if (__pyx_t_8) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_8); __pyx_t_8 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_lidar_data));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_lidar_data));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0+__pyx_t_7, ((PyObject *)__pyx_v_lidar_data));
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_lidar_predict));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_lidar_predict));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1+__pyx_t_7, ((PyObject *)__pyx_v_lidar_predict));
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 818, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_1))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = <span class='pyx_c_api'>__Pyx_PySequence_SIZE</span>(sequence);
    if (unlikely(size != 3)) {
      if (size &gt; 3) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(3);
      else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
      <span class='error_goto'>__PYX_ERR(0, 818, __pyx_L1_error)</span>
    }
    #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
    if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
      __pyx_t_4 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
      __pyx_t_3 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
      __pyx_t_8 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 2); 
    } else {
      __pyx_t_4 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
      __pyx_t_3 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
      __pyx_t_8 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 2); 
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_8);
    #else
    __pyx_t_4 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 818, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_3 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 818, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    __pyx_t_8 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 2);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 818, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    #endif
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_5 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_5)) __PYX_ERR(0, 818, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_5);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_57 = Py_TYPE(__pyx_t_5)-&gt;tp_iternext;
    index = 0; __pyx_t_4 = __pyx_t_57(__pyx_t_5); if (unlikely(!__pyx_t_4)) goto __pyx_L7_unpacking_failed;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    index = 1; __pyx_t_3 = __pyx_t_57(__pyx_t_5); if (unlikely(!__pyx_t_3)) goto __pyx_L7_unpacking_failed;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    index = 2; __pyx_t_8 = __pyx_t_57(__pyx_t_5); if (unlikely(!__pyx_t_8)) goto __pyx_L7_unpacking_failed;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_57(__pyx_t_5), 3) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 818, __pyx_L1_error)</span>
    __pyx_t_57 = NULL;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    goto __pyx_L8_unpacking_done;
    __pyx_L7_unpacking_failed:;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    __pyx_t_57 = NULL;
    if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
    <span class='error_goto'>__PYX_ERR(0, 818, __pyx_L1_error)</span>
    __pyx_L8_unpacking_done:;
  }
  if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 818, __pyx_L1_error)</span>
  if (!(likely(((__pyx_t_8) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_8, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 818, __pyx_L1_error)</span>
  __pyx_v_new_targets = __pyx_t_4;
  __pyx_t_4 = 0;
  __pyx_t_13 = ((PyArrayObject *)__pyx_t_3);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_13, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 3, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_10, &amp;__pyx_t_11, &amp;__pyx_t_12);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target_3Dlist, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 3, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_12);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_10, __pyx_t_11, __pyx_t_12);
      }
      __pyx_t_10 = __pyx_t_11 = __pyx_t_12 = 0;
    }
    __pyx_pybuffernd_target_3Dlist.diminfo[0].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target_3Dlist.diminfo[0].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_target_3Dlist.diminfo[1].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_target_3Dlist.diminfo[1].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[1]; __pyx_pybuffernd_target_3Dlist.diminfo[2].strides = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.strides[2]; __pyx_pybuffernd_target_3Dlist.diminfo[2].shape = __pyx_pybuffernd_target_3Dlist.rcbuffer-&gt;pybuffer.shape[2];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 818, __pyx_L1_error)</span>
  }
  __pyx_t_13 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_target_3Dlist, ((PyArrayObject *)__pyx_t_3));
  __pyx_t_3 = 0;
  __pyx_t_9 = ((PyArrayObject *)__pyx_t_8);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_9, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_12, &amp;__pyx_t_11, &amp;__pyx_t_10);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_target_3Dlist_num, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_12); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_12, __pyx_t_11, __pyx_t_10);
      }
      __pyx_t_12 = __pyx_t_11 = __pyx_t_10 = 0;
    }
    __pyx_pybuffernd_target_3Dlist_num.diminfo[0].strides = __pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_target_3Dlist_num.diminfo[0].shape = __pyx_pybuffernd_target_3Dlist_num.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 818, __pyx_L1_error)</span>
  }
  __pyx_t_9 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_target_3Dlist_num, ((PyArrayObject *)__pyx_t_8));
  __pyx_t_8 = 0;
</pre><pre class="cython line score-0">&#xA0;<span class="">819</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">820</span>:     <span class="c">#分别对新目标、跟踪到的目标、未跟踪到的目标进行处理，组建lidar_state    </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">821</span>:     <span class="c">#1.处理跟踪到的目标</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">822</span>:     <span class="c">#print(&quot;111111 ll:&quot;, ll)</span></pre>
<pre class="cython line score-43" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">823</span>:     <span class="n">selected</span><span class="p">,</span> <span class="n">lidar_state</span><span class="p">,</span> <span class="n">tracked_num</span> <span class="o">=</span> <span class="n">tracked_targets_process</span><span class="p">(</span><span class="n">target_3Dlist</span><span class="p">,</span> <span class="n">target_3Dlist_num</span><span class="p">,</span> <span class="n">lidar_state</span><span class="p">,</span></pre>
<pre class='cython code score-43 '>  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_tracked_targets_process);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 823, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
/* … */
  if (!(likely(((__pyx_t_8) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_8, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 823, __pyx_L1_error)</span>
  if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 823, __pyx_L1_error)</span>
  __pyx_t_9 = ((PyArrayObject *)__pyx_t_8);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_9, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_10, &amp;__pyx_t_11, &amp;__pyx_t_12);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_selected, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_12);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_10, __pyx_t_11, __pyx_t_12);
      }
      __pyx_t_10 = __pyx_t_11 = __pyx_t_12 = 0;
    }
    __pyx_pybuffernd_selected.diminfo[0].strides = __pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_selected.diminfo[0].shape = __pyx_pybuffernd_selected.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 823, __pyx_L1_error)</span>
  }
  __pyx_t_9 = 0;
  __pyx_v_selected = ((PyArrayObject *)__pyx_t_8);
  __pyx_t_8 = 0;
  __pyx_t_6 = ((PyArrayObject *)__pyx_t_2);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_6, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 2, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_12, &amp;__pyx_t_11, &amp;__pyx_t_10);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_state, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 2, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_12); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_12, __pyx_t_11, __pyx_t_10);
      }
      __pyx_t_12 = __pyx_t_11 = __pyx_t_10 = 0;
    }
    __pyx_pybuffernd_lidar_state.diminfo[0].strides = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_state.diminfo[0].shape = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_state.diminfo[1].strides = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_state.diminfo[1].shape = __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.shape[1];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 823, __pyx_L1_error)</span>
  }
  __pyx_t_6 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_lidar_state, ((PyArrayObject *)__pyx_t_2));
  __pyx_t_2 = 0;
  __pyx_v_tracked_num = __pyx_t_4;
  __pyx_t_4 = 0;
</pre><pre class="cython line score-108" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">824</span>:                                                         <span class="n">last_lidar_state</span><span class="p">,</span> <span class="n">lidar_predict</span><span class="p">,</span> <span class="n">full_life</span><span class="p">,</span> <span class="n">R_c2w</span><span class="p">,</span> <span class="n">P0_UTM</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span></pre>
<pre class='cython code score-108 '>  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_full_life);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 824, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='py_c_api'>PyFloat_FromDouble</span>(__pyx_v_dt);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 824, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_5 = NULL;
  __pyx_t_7 = 0;
  if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_8))) {
    __pyx_t_5 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_8);
    if (likely(__pyx_t_5)) {
      PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_5);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
      <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_8, function);
      __pyx_t_7 = 1;
    }
  }
  #if CYTHON_FAST_PYCALL
  if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_8)) {
    PyObject *__pyx_temp[10] = {__pyx_t_5, ((PyObject *)__pyx_v_target_3Dlist), ((PyObject *)__pyx_v_target_3Dlist_num), ((PyObject *)__pyx_v_lidar_state), ((PyObject *)__pyx_v_last_lidar_state), ((PyObject *)__pyx_v_lidar_predict), __pyx_t_3, ((PyObject *)__pyx_v_R_c2w), ((PyObject *)__pyx_v_P0_UTM), __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 9+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 823, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  #if CYTHON_FAST_PYCCALL
  if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_8)) {
    PyObject *__pyx_temp[10] = {__pyx_t_5, ((PyObject *)__pyx_v_target_3Dlist), ((PyObject *)__pyx_v_target_3Dlist_num), ((PyObject *)__pyx_v_lidar_state), ((PyObject *)__pyx_v_last_lidar_state), ((PyObject *)__pyx_v_lidar_predict), __pyx_t_3, ((PyObject *)__pyx_v_R_c2w), ((PyObject *)__pyx_v_P0_UTM), __pyx_t_4};
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_8, __pyx_temp+1-__pyx_t_7, 9+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 823, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_5); __pyx_t_5 = 0;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  } else
  #endif
  {
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(9+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 823, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    if (__pyx_t_5) {
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_5); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_5); __pyx_t_5 = NULL;
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_target_3Dlist));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_target_3Dlist));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_7, ((PyObject *)__pyx_v_target_3Dlist));
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_target_3Dlist_num));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_target_3Dlist_num));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_7, ((PyObject *)__pyx_v_target_3Dlist_num));
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_lidar_state));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_lidar_state));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 2+__pyx_t_7, ((PyObject *)__pyx_v_lidar_state));
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_last_lidar_state));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_last_lidar_state));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 3+__pyx_t_7, ((PyObject *)__pyx_v_last_lidar_state));
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_lidar_predict));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_lidar_predict));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 4+__pyx_t_7, ((PyObject *)__pyx_v_lidar_predict));
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 5+__pyx_t_7, __pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_R_c2w));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_R_c2w));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 6+__pyx_t_7, ((PyObject *)__pyx_v_R_c2w));
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_P0_UTM));
    <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_P0_UTM));
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 7+__pyx_t_7, ((PyObject *)__pyx_v_P0_UTM));
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 8+__pyx_t_7, __pyx_t_4);
    __pyx_t_3 = 0;
    __pyx_t_4 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_8, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 823, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  }
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  if ((likely(<span class='py_c_api'>PyTuple_CheckExact</span>(__pyx_t_1))) || (<span class='py_c_api'>PyList_CheckExact</span>(__pyx_t_1))) {
    PyObject* sequence = __pyx_t_1;
    Py_ssize_t size = <span class='pyx_c_api'>__Pyx_PySequence_SIZE</span>(sequence);
    if (unlikely(size != 3)) {
      if (size &gt; 3) <span class='pyx_c_api'>__Pyx_RaiseTooManyValuesError</span>(3);
      else if (size &gt;= 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(size);
      <span class='error_goto'>__PYX_ERR(0, 823, __pyx_L1_error)</span>
    }
    #if CYTHON_ASSUME_SAFE_MACROS &amp;&amp; !CYTHON_AVOID_BORROWED_REFS
    if (likely(<span class='py_c_api'>PyTuple_CheckExact</span>(sequence))) {
      __pyx_t_8 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 0); 
      __pyx_t_2 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 1); 
      __pyx_t_4 = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(sequence, 2); 
    } else {
      __pyx_t_8 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 0); 
      __pyx_t_2 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 1); 
      __pyx_t_4 = <span class='py_macro_api'>PyList_GET_ITEM</span>(sequence, 2); 
    }
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_8);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
    #else
    __pyx_t_8 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 0);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 823, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    __pyx_t_2 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 823, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_4 = <span class='py_macro_api'>PySequence_ITEM</span>(sequence, 2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 823, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    #endif
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  } else {
    Py_ssize_t index = -1;
    __pyx_t_3 = <span class='py_c_api'>PyObject_GetIter</span>(__pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 823, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_57 = Py_TYPE(__pyx_t_3)-&gt;tp_iternext;
    index = 0; __pyx_t_8 = __pyx_t_57(__pyx_t_3); if (unlikely(!__pyx_t_8)) goto __pyx_L9_unpacking_failed;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    index = 1; __pyx_t_2 = __pyx_t_57(__pyx_t_3); if (unlikely(!__pyx_t_2)) goto __pyx_L9_unpacking_failed;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    index = 2; __pyx_t_4 = __pyx_t_57(__pyx_t_3); if (unlikely(!__pyx_t_4)) goto __pyx_L9_unpacking_failed;
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (<span class='pyx_c_api'>__Pyx_IternextUnpackEndCheck</span>(__pyx_t_57(__pyx_t_3), 3) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 823, __pyx_L1_error)</span>
    __pyx_t_57 = NULL;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    goto __pyx_L10_unpacking_done;
    __pyx_L9_unpacking_failed:;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_57 = NULL;
    if (<span class='pyx_c_api'>__Pyx_IterFinish</span>() == 0) <span class='pyx_c_api'>__Pyx_RaiseNeedMoreValuesError</span>(index);
    <span class='error_goto'>__PYX_ERR(0, 823, __pyx_L1_error)</span>
    __pyx_L10_unpacking_done:;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">825</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">826</span>:     <span class="c">#2.处理未跟踪到的目标</span></pre>
<pre class="cython line score-7" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">827</span>:     <span class="n">ll</span> <span class="o">=</span> <span class="n">tracked_num</span></pre>
<pre class='cython code score-7 '>  __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_v_tracked_num); if (unlikely((__pyx_t_16 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 827, __pyx_L1_error)</span>
  __pyx_v_ll = __pyx_t_16;
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">828</span>:     <span class="n">last_lidar_state</span> <span class="o">=</span> <span class="n">last_lidar_state</span><span class="p">[</span><span class="n">selected</span><span class="p">]</span></pre>
<pre class='cython code score-23 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_last_lidar_state), ((PyObject *)__pyx_v_selected));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 828, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 828, __pyx_L1_error)</span>
  __pyx_t_58 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_58, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_10, &amp;__pyx_t_11, &amp;__pyx_t_12);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_last_lidar_state, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 2, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_12);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_10, __pyx_t_11, __pyx_t_12);
      }
      __pyx_t_10 = __pyx_t_11 = __pyx_t_12 = 0;
    }
    __pyx_pybuffernd_last_lidar_state.diminfo[0].strides = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_last_lidar_state.diminfo[0].shape = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_last_lidar_state.diminfo[1].strides = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_last_lidar_state.diminfo[1].shape = __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.shape[1];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 828, __pyx_L1_error)</span>
  }
  __pyx_t_58 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_last_lidar_state, ((PyArrayObject *)__pyx_t_1));
  __pyx_t_1 = 0;
</pre><pre class="cython line score-23" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">829</span>:     <span class="n">lidar_predict</span> <span class="o">=</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">selected</span><span class="p">]</span></pre>
<pre class='cython code score-23 '>  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_predict), ((PyObject *)__pyx_v_selected));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 829, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 829, __pyx_L1_error)</span>
  __pyx_t_6 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_6, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 2, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_12, &amp;__pyx_t_11, &amp;__pyx_t_10);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_lidar_predict, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES| PyBUF_WRITABLE, 2, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_12); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_10);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_12, __pyx_t_11, __pyx_t_10);
      }
      __pyx_t_12 = __pyx_t_11 = __pyx_t_10 = 0;
    }
    __pyx_pybuffernd_lidar_predict.diminfo[0].strides = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_lidar_predict.diminfo[0].shape = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_lidar_predict.diminfo[1].strides = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_lidar_predict.diminfo[1].shape = __pyx_pybuffernd_lidar_predict.rcbuffer-&gt;pybuffer.shape[1];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 829, __pyx_L1_error)</span>
  }
  __pyx_t_6 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_v_lidar_predict, ((PyArrayObject *)__pyx_t_1));
  __pyx_t_1 = 0;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">830</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">last_lidar_state</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_14 = (__pyx_v_last_lidar_state-&gt;dimensions[0]);
  __pyx_t_15 = __pyx_t_14;
  for (__pyx_t_16 = 0; __pyx_t_16 &lt; __pyx_t_15; __pyx_t_16+=1) {
    __pyx_v_i = __pyx_t_16;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">831</span>:         <span class="n">tmp_state</span><span class="p">[</span><span class="mf">13</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">13</span><span class="p">]</span> <span class="o">-</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>    __pyx_t_59 = __pyx_v_i;
    __pyx_t_60 = 13;
    __pyx_t_61 = 13;
    *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_61, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = ((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_59, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_60, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides)) - 1);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">832</span>:         <span class="k">if</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">13</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mf">0</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>    __pyx_t_62 = 13;
    __pyx_t_63 = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_62, __pyx_pybuffernd_tmp_state.diminfo[0].strides)) &lt;= 0) != 0);
    if (__pyx_t_63) {
/* … */
    }
</pre><pre class="cython line score-32" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">833</span>:             <span class="n">lidar_position</span><span class="p">[:,</span> <span class="n">last_lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">0</span><span class="p">],</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span></pre>
<pre class='cython code score-32 '>      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 833, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_nan);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 833, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_64 = __pyx_v_i;
      __pyx_t_65 = 0;
      __pyx_t_1 = __Pyx_PyInt_From_npy_int32((*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_64, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_65, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 833, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
/* … */
  __pyx_slice__72 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__72)) __PYX_ERR(0, 833, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__72);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__72);
      __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 833, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__72);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__72);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_slice__72);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, __pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__73);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__73);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 2, __pyx_slice__73);
      __pyx_t_1 = 0;
      if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_lidar_position), __pyx_t_2, __pyx_t_4) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 833, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_slice__73 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__73)) __PYX_ERR(0, 833, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__73);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__73);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">834</span>:             <span class="k">continue</span>  <span class="c"># 生命值终结，放弃跟踪</span></pre>
<pre class='cython code score-0 '>      goto __pyx_L11_continue;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">835</span>:         <span class="n">tmp_state</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span> <span class="c"># ID, class</span></pre>
<pre class='cython code score-0 '>    __pyx_t_66 = __pyx_v_i;
    __pyx_t_67 = 0;
    __pyx_t_68 = 0;
    *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_68, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_66, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_67, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides));
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">836</span>:         <span class="n">tmp_state</span><span class="p">[</span><span class="mf">1</span><span class="p">:</span><span class="mf">10</span><span class="p">]</span> <span class="o">=</span> <span class="n">lidar_predict</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="c"># lidar_predict: class(0), xc(1), yc(2), vx(3), vy(4), xmin(5), xmax(6), ymin(7), ymax(8)</span></pre>
<pre class='cython code score-13 '>    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(((PyObject *)__pyx_v_lidar_predict), __pyx_v_i, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 836, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_tmp_state), __pyx_slice__74, __pyx_t_4) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 836, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
/* … */
  __pyx_slice__74 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_1, __pyx_int_10, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__74)) __PYX_ERR(0, 836, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__74);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__74);
</pre><pre class="cython line score-29" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">837</span>:         <span class="n">tmp_state</span><span class="p">[</span><span class="mf">10</span><span class="p">:</span><span class="mf">13</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">10</span><span class="p">:</span><span class="mf">13</span><span class="p">]</span> <span class="c"># zmin, zmax, I</span></pre>
<pre class='cython code score-29 '>    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 837, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 837, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__75);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__75);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1, __pyx_slice__75);
    __pyx_t_4 = 0;
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_last_lidar_state), __pyx_t_2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 837, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
/* … */
  __pyx_slice__75 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_10, __pyx_int_13, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__75)) __PYX_ERR(0, 837, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__75);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__75);
    if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_tmp_state), __pyx_slice__76, __pyx_t_4) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 837, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_slice__76 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_10, __pyx_int_13, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__76)) __PYX_ERR(0, 837, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__76);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__76);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">838</span>:         <span class="n">tmp_state</span><span class="p">[</span><span class="mf">14</span><span class="p">]</span> <span class="o">=</span> <span class="n">last_lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mf">14</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_69 = __pyx_v_i;
    __pyx_t_70 = 14;
    __pyx_t_71 = 14;
    *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_71, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_last_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_69, __pyx_pybuffernd_last_lidar_state.diminfo[0].strides, __pyx_t_70, __pyx_pybuffernd_last_lidar_state.diminfo[1].strides));
</pre><pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">839</span>:         <span class="n">lidar_state</span><span class="p">[</span><span class="n">ll</span><span class="p">],</span> <span class="n">ll</span> <span class="o">=</span> <span class="n">tmp_state</span><span class="p">,</span> <span class="n">ll</span><span class="o">+</span><span class="mf">1</span>  <span class="c"># 将当前目标置入target_state中</span></pre>
<pre class='cython code score-4 '>    __pyx_t_4 = ((PyObject *)__pyx_v_tmp_state);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
    __pyx_t_19 = (__pyx_v_ll + 1);
    if (unlikely(<span class='pyx_c_api'>__Pyx_SetItemInt</span>(((PyObject *)__pyx_v_lidar_state), __pyx_v_ll, __pyx_t_4, long, 1, __Pyx_PyInt_From_long, 0, 0, 0) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 839, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_v_ll = __pyx_t_19;
    __pyx_L11_continue:;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">840</span>:     <span class="c">#print(&quot;3333333 ll:&quot;, ll)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">841</span>: </pre>
<pre class="cython line score-0">&#xA0;<span class="">842</span>:     <span class="c">#3.处理新目标</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">843</span>:     <span class="c">#print(&quot;lidar_movement new_targets.shape[0]:&quot;, new_targets.shape[0])</span></pre>
<pre class="cython line score-60" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">844</span>:     <span class="n">ini_headings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="mf">3309</span><span class="p">,</span><span class="mf">1509</span><span class="p">,</span><span class="mf">1959</span><span class="p">,</span><span class="mf">2409</span><span class="p">,</span><span class="mf">609</span><span class="p">,</span><span class="mf">1059</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;int32&#39;</span><span class="p">)</span></pre>
<pre class='cython code score-60 '>  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 844, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s_asarray);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 844, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='py_c_api'>PyList_New</span>(6);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 844, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_3309);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_3309);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 0, __pyx_int_3309);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1509);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1509);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 1, __pyx_int_1509);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1959);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1959);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 2, __pyx_int_1959);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2409);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_2409);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 3, __pyx_int_2409);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_609);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_609);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 4, __pyx_int_609);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_1059);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_1059);
  <span class='py_macro_api'>PyList_SET_ITEM</span>(__pyx_t_4, 5, __pyx_int_1059);
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 844, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_4);
  __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyDict_NewPresized</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 844, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_4, __pyx_n_s_dtype, __pyx_n_s_int32) &lt; 0) <span class='error_goto'>__PYX_ERR(0, 844, __pyx_L1_error)</span>
  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_2, __pyx_t_1, __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 844, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  if (!(likely(((__pyx_t_8) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_8, __pyx_ptype_5numpy_ndarray))))) <span class='error_goto'>__PYX_ERR(0, 844, __pyx_L1_error)</span>
  __pyx_t_9 = ((PyArrayObject *)__pyx_t_8);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer);
    __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_9, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack);
    if (unlikely(__pyx_t_7 &lt; 0)) {
      <span class='py_c_api'>PyErr_Fetch</span>(&amp;__pyx_t_10, &amp;__pyx_t_11, &amp;__pyx_t_12);
      if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_ini_headings, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_int32_t, PyBUF_FORMAT| PyBUF_STRIDES, 1, 0, __pyx_stack) == -1)) {
        Py_XDECREF(__pyx_t_10); Py_XDECREF(__pyx_t_11); Py_XDECREF(__pyx_t_12);
        <span class='pyx_c_api'>__Pyx_RaiseBufferFallbackError</span>();
      } else {
        <span class='py_c_api'>PyErr_Restore</span>(__pyx_t_10, __pyx_t_11, __pyx_t_12);
      }
      __pyx_t_10 = __pyx_t_11 = __pyx_t_12 = 0;
    }
    __pyx_pybuffernd_ini_headings.diminfo[0].strides = __pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_ini_headings.diminfo[0].shape = __pyx_pybuffernd_ini_headings.rcbuffer-&gt;pybuffer.shape[0];
    if (unlikely(__pyx_t_7 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 844, __pyx_L1_error)</span>
  }
  __pyx_t_9 = 0;
  __pyx_v_ini_headings = ((PyArrayObject *)__pyx_t_8);
  __pyx_t_8 = 0;
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">845</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">new_targets</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">0</span><span class="p">]):</span></pre>
<pre class='cython code score-13 '>  __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_v_new_targets, __pyx_n_s_shape);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 845, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_t_8, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 845, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
  __pyx_t_16 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_4); if (unlikely((__pyx_t_16 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 845, __pyx_L1_error)</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_19 = __pyx_t_16;
  for (__pyx_t_22 = 0; __pyx_t_22 &lt; __pyx_t_19; __pyx_t_22+=1) {
    __pyx_v_i = __pyx_t_22;
</pre><pre class="cython line score-0">&#xA0;<span class="">846</span>:         <span class="c">#print((new_targets[i] == 0).all())</span></pre>
<pre class="cython line score-27" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">847</span>:         <span class="k">if</span><span class="p">((</span><span class="n">new_targets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0</span><span class="p">)</span><span class="o">.</span><span class="n">all</span><span class="p">()):</span></pre>
<pre class='cython code score-27 '>    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_v_new_targets, __pyx_v_i, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 847, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_EqObjC</span>(__pyx_t_8, __pyx_int_0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 847, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_all);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 847, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = NULL;
    if (CYTHON_UNPACK_METHODS &amp;&amp; likely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_8))) {
      __pyx_t_1 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_8);
      if (likely(__pyx_t_1)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_8);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_8, function);
      }
    }
    if (__pyx_t_1) {
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_8, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 847, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    } else {
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_CallNoArg</span>(__pyx_t_8);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 847, __pyx_L1_error)</span>
    }
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    __pyx_t_63 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_4); if (unlikely(__pyx_t_63 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 847, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    if (__pyx_t_63) {
/* … */
    }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">848</span>:             <span class="k">continue</span></pre>
<pre class='cython code score-0 '>      goto __pyx_L14_continue;
</pre><pre class="cython line score-0">&#xA0;<span class="">849</span>:         <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">850</span>:             <span class="c"># zmin(10), zmax(11), I(12), life(13)</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">851</span>:             <span class="c">#ID_list, lidar_ID = np.hstack((lidar_state[:ll,0], last_lidar_state[:,0])), 1  # 已经存在的ID, 初始赋值</span></pre>
<pre class="cython line score-0">&#xA0;<span class="">852</span>:             <span class="c">#while lidar_ID in ID_list: </span></pre>
<pre class="cython line score-0">&#xA0;<span class="">853</span>:             <span class="c">#    lidar_ID += 1</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">854</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1</span></pre>
<pre class='cython code score-0 '>    /*else*/ {
      __pyx_t_72 = 0;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_72, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = -1;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">855</span>:             <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mf">999</span><span class="p">):</span> <span class="c"># 999次后，next_ID又回到原样</span></pre>
<pre class='cython code score-0 '>      for (__pyx_t_73 = 0; __pyx_t_73 &lt; 0x3E7; __pyx_t_73+=1) {
        __pyx_v_j = __pyx_t_73;
</pre><pre class="cython line score-43" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">856</span>:                 <span class="k">if</span> <span class="n">next_ID</span> <span class="ow">in</span> <span class="n">last_lidar_state</span><span class="p">[:,</span><span class="mf">0</span><span class="p">]</span> <span class="ow">or</span> <span class="n">next_ID</span> <span class="ow">in</span> <span class="n">lidar_state</span><span class="p">[:</span><span class="n">ll</span><span class="p">,</span><span class="mf">0</span><span class="p">]:</span> <span class="c"># 查看当前ID有无被占用</span></pre>
<pre class='cython code score-43 '>        __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_next_ID);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 856, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
/* … */
  __pyx_slice__77 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__77)) __PYX_ERR(0, 856, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__77);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__77);
        __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_last_lidar_state), __pyx_tuple__78);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 856, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
        __pyx_t_74 = (<span class='pyx_c_api'>__Pyx_PySequence_ContainsTF</span>(__pyx_t_4, __pyx_t_8, Py_EQ)); if (unlikely(__pyx_t_74 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 856, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
        __pyx_t_75 = (__pyx_t_74 != 0);
        if (!__pyx_t_75) {
        } else {
          __pyx_t_63 = __pyx_t_75;
          goto __pyx_L20_bool_binop_done;
        }
        __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_next_ID);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 856, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
        __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_ll);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 856, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
        __pyx_t_1 = <span class='py_c_api'>PySlice_New</span>(Py_None, __pyx_t_4, Py_None);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 856, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 856, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_0);
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_int_0);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1, __pyx_int_0);
        __pyx_t_1 = 0;
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_state), __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 856, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        __pyx_t_75 = (<span class='pyx_c_api'>__Pyx_PySequence_ContainsTF</span>(__pyx_t_8, __pyx_t_1, Py_EQ)); if (unlikely(__pyx_t_75 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 856, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        __pyx_t_74 = (__pyx_t_75 != 0);
        __pyx_t_63 = __pyx_t_74;
        __pyx_L20_bool_binop_done:;
        if (__pyx_t_63) {
/* … */
          goto __pyx_L19;
        }
  __pyx_tuple__78 = <span class='py_c_api'>PyTuple_Pack</span>(2, __pyx_slice__77, __pyx_int_0);<span class='error_goto'> if (unlikely(!__pyx_tuple__78)) __PYX_ERR(0, 856, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__78);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__78);
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">857</span>:                     <span class="n">next_ID</span> <span class="o">+=</span> <span class="mf">1</span> <span class="k">if</span> <span class="n">next_ID</span> <span class="o">&lt;</span> <span class="mf">999</span> <span class="k">else</span> <span class="o">-</span> <span class="mf">998</span></pre>
<pre class='cython code score-0 '>          if (((__pyx_v_next_ID &lt; 0x3E7) != 0)) {
            __pyx_t_76 = 1;
          } else {
            __pyx_t_76 = -998L;
          }
          __pyx_v_next_ID = (__pyx_v_next_ID + __pyx_t_76);
</pre><pre class="cython line score-0">&#xA0;<span class="">858</span>:                 <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">859</span>:                     <span class="n">tmp_state</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">next_ID</span></pre>
<pre class='cython code score-0 '>        /*else*/ {
          __pyx_t_77 = 0;
          *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_77, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_v_next_ID;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">860</span>:                     <span class="k">break</span></pre>
<pre class='cython code score-0 '>          goto __pyx_L18_break;
        }
        __pyx_L19:;
      }
      __pyx_L18_break:;
</pre><pre class="cython line score-0">&#xA0;<span class="">861</span>:             <span class="c"># tmp_state[0] = lidar_ID </span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">862</span>:             <span class="k">if</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mf">1</span><span class="p">:</span> <span class="k">continue</span></pre>
<pre class='cython code score-0 '>      __pyx_t_78 = 0;
      __pyx_t_63 = (((*__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_78, __pyx_pybuffernd_tmp_state.diminfo[0].strides)) == -1L) != 0);
      if (__pyx_t_63) {
        goto __pyx_L14_continue;
      }
</pre><pre class="cython line score-49" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">863</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">lidar_class_new</span><span class="p">(</span><span class="n">new_targets</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c"># 判断目标物类型</span></pre>
<pre class='cython code score-49 '>      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_lidar_class_new);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 863, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_v_new_targets, __pyx_v_i, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 863, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_2 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_8))) {
        __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_8);
        if (likely(__pyx_t_2)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_8);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_8, function);
        }
      }
      if (!__pyx_t_2) {
        __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_8, __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 863, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      } else {
        #if CYTHON_FAST_PYCALL
        if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_8)) {
          PyObject *__pyx_temp[2] = {__pyx_t_2, __pyx_t_4};
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_8, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 863, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_8)) {
          PyObject *__pyx_temp[2] = {__pyx_t_2, __pyx_t_4};
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_8, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 863, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        } else
        #endif
        {
          __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 863, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_2); __pyx_t_2 = NULL;
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0+1, __pyx_t_4);
          __pyx_t_4 = 0;
          __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_8, __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 863, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        }
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_79 = __Pyx_PyInt_As_npy_int32(__pyx_t_1); if (unlikely((__pyx_t_79 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 863, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_80 = 1;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_80, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_79;
</pre><pre class="cython line score-58" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">864</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">2</span><span class="p">:</span><span class="mf">4</span><span class="p">],</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">6</span><span class="p">:</span><span class="mf">13</span><span class="p">],</span> <span class="n">tmp_state</span><span class="p">[</span><span class="mf">13</span><span class="p">]</span><span class="o">=</span> <span class="n">new_targets</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mf">0</span><span class="p">:</span><span class="mf">2</span><span class="p">],</span> <span class="n">new_targets</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mf">2</span><span class="p">:],</span> <span class="n">ini_life</span>  <span class="c"># 新目标假设速度为0            </span></pre>
<pre class='cython code score-58 '>      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 864, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 864, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__79);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__79);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 1, __pyx_slice__79);
      __pyx_t_1 = 0;
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_new_targets, __pyx_t_8);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 864, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 864, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
/* … */
  __pyx_slice__79 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_0, __pyx_int_2, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__79)) __PYX_ERR(0, 864, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__79);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__79);
      __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 864, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__80);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__80);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_slice__80);
      __pyx_t_8 = 0;
      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(__pyx_v_new_targets, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 864, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_73 = __pyx_v_ini_life;
  __pyx_slice__80 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__80)) __PYX_ERR(0, 864, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__80);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__80);
      if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_tmp_state), __pyx_slice__81, __pyx_t_1) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 864, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_slice__81 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_4, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__81)) __PYX_ERR(0, 864, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__81);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__81);
      if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_tmp_state), __pyx_slice__82, __pyx_t_8) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 864, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_81 = 13;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_81, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_73;
  __pyx_slice__82 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_6, __pyx_int_13, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__82)) __PYX_ERR(0, 864, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__82);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__82);
</pre><pre class="cython line score-0">&#xA0;<span class="">865</span>:             <span class="c"># tmp_state[14] = ini_heading</span></pre>
<pre class="cython line score-53" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">866</span>:             <span class="n">tmp_state</span><span class="p">[</span><span class="mf">14</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_ini_heading</span><span class="p">(</span><span class="n">tmp_state</span><span class="p">[</span><span class="mf">2</span><span class="p">:</span><span class="mf">4</span><span class="p">],</span> <span class="n">ini_headings</span><span class="p">)</span></pre>
<pre class='cython code score-53 '>      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_get_ini_heading);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 866, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_tmp_state), __pyx_slice__83);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 866, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_4 = NULL;
      __pyx_t_7 = 0;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
        __pyx_t_4 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
        if (likely(__pyx_t_4)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
          __pyx_t_7 = 1;
        }
      }
      #if CYTHON_FAST_PYCALL
      if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_1)) {
        PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_3, ((PyObject *)__pyx_v_ini_headings)};
        __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 866, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      #if CYTHON_FAST_PYCCALL
      if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_1)) {
        PyObject *__pyx_temp[3] = {__pyx_t_4, __pyx_t_3, ((PyObject *)__pyx_v_ini_headings)};
        __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_7, 2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 866, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      } else
      #endif
      {
        __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(2+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 866, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
        if (__pyx_t_4) {
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_4); __pyx_t_4 = NULL;
        }
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0+__pyx_t_7, __pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_ini_headings));
        <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_ini_headings));
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 1+__pyx_t_7, ((PyObject *)__pyx_v_ini_headings));
        __pyx_t_3 = 0;
        __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_2, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 866, __pyx_L1_error)</span>
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_79 = __Pyx_PyInt_As_npy_int32(__pyx_t_8); if (unlikely((__pyx_t_79 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 866, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_82 = 14;
      *__Pyx_BufPtrStrided1d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_tmp_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_82, __pyx_pybuffernd_tmp_state.diminfo[0].strides) = __pyx_t_79;
/* … */
  __pyx_slice__83 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_4, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__83)) __PYX_ERR(0, 866, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__83);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__83);
</pre><pre class="cython line score-0">&#xA0;<span class="">867</span>:             <span class="c"># print(tmp_state[0],tmp_state[2:4], tmp_state[14])</span></pre>
<pre class="cython line score-4" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">868</span>:             <span class="n">lidar_state</span><span class="p">[</span><span class="n">ll</span><span class="p">],</span> <span class="n">ll</span> <span class="o">=</span> <span class="n">tmp_state</span><span class="p">,</span> <span class="n">ll</span><span class="o">+</span><span class="mf">1</span>  <span class="c"># 将当前目标置入target_state中</span></pre>
<pre class='cython code score-4 '>      __pyx_t_8 = ((PyObject *)__pyx_v_tmp_state);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_8);
      __pyx_t_73 = (__pyx_v_ll + 1);
      if (unlikely(<span class='pyx_c_api'>__Pyx_SetItemInt</span>(((PyObject *)__pyx_v_lidar_state), __pyx_v_ll, __pyx_t_8, long, 1, __Pyx_PyInt_From_long, 0, 0, 0) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 868, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_v_ll = __pyx_t_73;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">869</span>:             <span class="k">if</span> <span class="n">next_ID</span> <span class="o">&lt;</span> <span class="mf">999</span><span class="p">:</span></pre>
<pre class='cython code score-0 '>      __pyx_t_63 = ((__pyx_v_next_ID &lt; 0x3E7) != 0);
      if (__pyx_t_63) {
/* … */
        goto __pyx_L23;
      }
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">870</span>:                 <span class="n">next_ID</span> <span class="o">=</span> <span class="n">next_ID</span> <span class="o">+</span> <span class="mf">1</span></pre>
<pre class='cython code score-0 '>        __pyx_v_next_ID = (__pyx_v_next_ID + 1);
</pre><pre class="cython line score-0">&#xA0;<span class="">871</span>:             <span class="k">else</span><span class="p">:</span></pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">872</span>:                 <span class="n">next_ID</span> <span class="o">=</span> <span class="n">next_ID</span> <span class="o">-</span> <span class="mf">998</span></pre>
<pre class='cython code score-0 '>      /*else*/ {
        __pyx_v_next_ID = (__pyx_v_next_ID - 0x3E6);
      }
      __pyx_L23:;
    }
    __pyx_L14_continue:;
  }
</pre><pre class="cython line score-0">&#xA0;<span class="">873</span>: </pre>
<pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">874</span>:     <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ll</span><span class="p">):</span></pre>
<pre class='cython code score-0 '>  __pyx_t_16 = __pyx_v_ll;
  __pyx_t_19 = __pyx_t_16;
  for (__pyx_t_22 = 0; __pyx_t_22 &lt; __pyx_t_19; __pyx_t_22+=1) {
    __pyx_v_i = __pyx_t_22;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">875</span>:         <span class="n">lidar_ID</span> <span class="o">=</span> <span class="n">lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-0 '>    __pyx_t_83 = __pyx_v_i;
    __pyx_t_84 = 0;
    __pyx_v_lidar_ID = (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_83, __pyx_pybuffernd_lidar_state.diminfo[0].strides, __pyx_t_84, __pyx_pybuffernd_lidar_state.diminfo[1].strides));
</pre><pre class="cython line score-61" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">876</span>:         <span class="n">coordinate_rotation</span> <span class="o">=</span> <span class="n">lidar2UTM</span><span class="p">(</span><span class="n">lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mf">2</span><span class="p">:</span><span class="mf">4</span><span class="p">],</span> <span class="n">R_c2w</span><span class="p">,</span> <span class="n">P0_UTM</span><span class="p">)</span></pre>
<pre class='cython code score-61 '>    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_lidar2UTM);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 876, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_i);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 876, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 876, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__84);
    <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__84);
    <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 1, __pyx_slice__84);
    __pyx_t_2 = 0;
    __pyx_t_2 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_state), __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_2)) __PYX_ERR(0, 876, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_2);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
    __pyx_t_3 = NULL;
    __pyx_t_7 = 0;
    if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_1))) {
      __pyx_t_3 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_1);
      if (likely(__pyx_t_3)) {
        PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_1);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_3);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
        <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_1, function);
        __pyx_t_7 = 1;
      }
    }
    #if CYTHON_FAST_PYCALL
    if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_1)) {
      PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_t_2, ((PyObject *)__pyx_v_R_c2w), ((PyObject *)__pyx_v_P0_UTM)};
      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_7, 3+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 876, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    #if CYTHON_FAST_PYCCALL
    if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_1)) {
      PyObject *__pyx_temp[4] = {__pyx_t_3, __pyx_t_2, ((PyObject *)__pyx_v_R_c2w), ((PyObject *)__pyx_v_P0_UTM)};
      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_1, __pyx_temp+1-__pyx_t_7, 3+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 876, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
    } else
    #endif
    {
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(3+__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 876, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      if (__pyx_t_3) {
        <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_3); __pyx_t_3 = NULL;
      }
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0+__pyx_t_7, __pyx_t_2);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_R_c2w));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_R_c2w));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1+__pyx_t_7, ((PyObject *)__pyx_v_R_c2w));
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_P0_UTM));
      <span class='refnanny'>__Pyx_GIVEREF</span>(((PyObject *)__pyx_v_P0_UTM));
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 2+__pyx_t_7, ((PyObject *)__pyx_v_P0_UTM));
      __pyx_t_2 = 0;
      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_1, __pyx_t_4, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 876, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    }
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_coordinate_rotation, __pyx_t_8);
    __pyx_t_8 = 0;
/* … */
  __pyx_slice__84 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_2, __pyx_int_4, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__84)) __PYX_ERR(0, 876, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__84);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__84);
</pre><pre class="cython line score-30" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">877</span>:         <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lidar_position</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">(</span><span class="mf">1</span><span class="p">)):</span></pre>
<pre class='cython code score-30 '>    __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_From_Py_intptr_t</span>((__pyx_v_lidar_position-&gt;dimensions[2]));<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 877, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 877, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_int32);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 877, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_4, __pyx_tuple__85, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 877, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_4 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_8, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 877, __pyx_L1_error)</span>
    <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
    __pyx_t_73 = <span class='pyx_c_api'>__Pyx_PyInt_As_long</span>(__pyx_t_4); if (unlikely((__pyx_t_73 == (long)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 877, __pyx_L1_error)</span>
    <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
    __pyx_t_76 = __pyx_t_73;
    for (__pyx_t_85 = 0; __pyx_t_85 &lt; __pyx_t_76; __pyx_t_85+=1) {
      __pyx_v_j = __pyx_t_85;
/* … */
  __pyx_tuple__85 = <span class='py_c_api'>PyTuple_Pack</span>(1, __pyx_int_1);<span class='error_goto'> if (unlikely(!__pyx_tuple__85)) __PYX_ERR(0, 877, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_tuple__85);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_tuple__85);
</pre><pre class="cython line score-52" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">878</span>:             <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="n">lidar_position</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">2</span><span class="p">]</span> <span class="ow">or</span> <span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">lidar_position</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">lidar_ID</span><span class="p">,</span> <span class="n">j</span><span class="p">]):</span></pre>
<pre class='cython code score-52 '>      __pyx_t_74 = ((__pyx_v_j == (__pyx_v_lidar_position-&gt;dimensions[2])) != 0);
      if (!__pyx_t_74) {
      } else {
        __pyx_t_63 = __pyx_t_74;
        goto __pyx_L29_bool_binop_done;
      }
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s_np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 878, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s_isnan);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 878, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_86 = __pyx_v_X;
      __pyx_t_87 = __pyx_v_lidar_ID;
      __pyx_t_88 = __pyx_v_j;
      __pyx_t_1 = <span class='py_c_api'>PyFloat_FromDouble</span>((*__Pyx_BufPtrStrided3d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.buf, __pyx_t_86, __pyx_pybuffernd_lidar_position.diminfo[0].strides, __pyx_t_87, __pyx_pybuffernd_lidar_position.diminfo[1].strides, __pyx_t_88, __pyx_pybuffernd_lidar_position.diminfo[2].strides)));<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 878, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      __pyx_t_2 = NULL;
      if (CYTHON_UNPACK_METHODS &amp;&amp; unlikely(<span class='py_c_api'>PyMethod_Check</span>(__pyx_t_8))) {
        __pyx_t_2 = <span class='py_macro_api'>PyMethod_GET_SELF</span>(__pyx_t_8);
        if (likely(__pyx_t_2)) {
          PyObject* function = <span class='py_macro_api'>PyMethod_GET_FUNCTION</span>(__pyx_t_8);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_t_2);
          <span class='pyx_macro_api'>__Pyx_INCREF</span>(function);
          <span class='pyx_macro_api'>__Pyx_DECREF_SET</span>(__pyx_t_8, function);
        }
      }
      if (!__pyx_t_2) {
        __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(__pyx_t_8, __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 878, __pyx_L1_error)</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      } else {
        #if CYTHON_FAST_PYCALL
        if (<span class='py_c_api'>PyFunction_Check</span>(__pyx_t_8)) {
          PyObject *__pyx_temp[2] = {__pyx_t_2, __pyx_t_1};
          __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyFunction_FastCall</span>(__pyx_t_8, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 878, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        } else
        #endif
        #if CYTHON_FAST_PYCCALL
        if (<span class='pyx_c_api'>__Pyx_PyFastCFunction_Check</span>(__pyx_t_8)) {
          PyObject *__pyx_temp[2] = {__pyx_t_2, __pyx_t_1};
          __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyCFunction_FastCall</span>(__pyx_t_8, __pyx_temp+1-1, 1+1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 878, __pyx_L1_error)</span>
          <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
        } else
        #endif
        {
          __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1+1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 878, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_2); <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_2); __pyx_t_2 = NULL;
          <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
          <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0+1, __pyx_t_1);
          __pyx_t_1 = 0;
          __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyObject_Call</span>(__pyx_t_8, __pyx_t_3, NULL);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 878, __pyx_L1_error)</span>
          <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
        }
      }
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_74 = <span class='pyx_c_api'>__Pyx_PyObject_IsTrue</span>(__pyx_t_4); if (unlikely(__pyx_t_74 &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 878, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_63 = __pyx_t_74;
      __pyx_L29_bool_binop_done:;
      if (__pyx_t_63) {
/* … */
      }
    }
    __pyx_L27_break:;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">879</span>:                 <span class="k">break</span>  <span class="c"># j表示还未被赋值的列数</span></pre>
<pre class='cython code score-0 '>        goto __pyx_L27_break;
</pre><pre class="cython line score-0" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">880</span>:         <span class="k">if</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">lidar_position</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mf">2</span><span class="p">]:</span> <span class="c"># 此时lidar_position未集齐足够position, 直接跟在后面赋值</span></pre>
<pre class='cython code score-0 '>    __pyx_t_63 = ((__pyx_v_j &lt; (__pyx_v_lidar_position-&gt;dimensions[2])) != 0);
    if (__pyx_t_63) {
/* … */
      goto __pyx_L31;
    }
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">881</span>:             <span class="n">lidar_position</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">lidar_ID</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">coordinate_rotation</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span></pre>
<pre class='cython code score-13 '>      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_v_coordinate_rotation, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 881, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_89 = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(__pyx_t_4); if (unlikely((__pyx_t_89 == ((npy_float64)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 881, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_90 = __pyx_v_X;
      __pyx_t_91 = __pyx_v_lidar_ID;
      __pyx_t_92 = __pyx_v_j;
      *__Pyx_BufPtrStrided3d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.buf, __pyx_t_90, __pyx_pybuffernd_lidar_position.diminfo[0].strides, __pyx_t_91, __pyx_pybuffernd_lidar_position.diminfo[1].strides, __pyx_t_92, __pyx_pybuffernd_lidar_position.diminfo[2].strides) = __pyx_t_89;
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">882</span>:             <span class="n">lidar_position</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="n">lidar_ID</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">coordinate_rotation</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span></pre>
<pre class='cython code score-13 '>      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_v_coordinate_rotation, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 882, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_89 = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(__pyx_t_4); if (unlikely((__pyx_t_89 == ((npy_float64)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 882, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_93 = __pyx_v_Y;
      __pyx_t_94 = __pyx_v_lidar_ID;
      __pyx_t_95 = __pyx_v_j;
      *__Pyx_BufPtrStrided3d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.buf, __pyx_t_93, __pyx_pybuffernd_lidar_position.diminfo[0].strides, __pyx_t_94, __pyx_pybuffernd_lidar_position.diminfo[1].strides, __pyx_t_95, __pyx_pybuffernd_lidar_position.diminfo[2].strides) = __pyx_t_89;
</pre><pre class="cython line score-0">&#xA0;<span class="">883</span>:         <span class="k">else</span><span class="p">:</span> <span class="c"># j = lidar_position.shape[2]</span></pre>
<pre class="cython line score-58" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">884</span>:             <span class="n">lidar_position</span><span class="p">[:,</span> <span class="n">lidar_ID</span><span class="p">,</span> <span class="mf">0</span><span class="p">:</span><span class="n">j</span><span class="o">-</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">lidar_position</span><span class="p">[:,</span> <span class="n">lidar_ID</span><span class="p">,</span> <span class="mf">1</span><span class="p">:</span><span class="n">j</span><span class="p">]</span></pre>
<pre class='cython code score-58 '>    /*else*/ {
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_lidar_ID);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 884, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_j);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 884, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      __pyx_t_3 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_1, __pyx_t_8, Py_None);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 884, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
      __pyx_t_8 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 884, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__86);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__86);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 0, __pyx_slice__86);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 1, __pyx_t_4);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_8, 2, __pyx_t_3);
      __pyx_t_4 = 0;
      __pyx_t_3 = 0;
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_position), __pyx_t_8);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 884, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
/* … */
  __pyx_slice__86 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__86)) __PYX_ERR(0, 884, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__86);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__86);
      __pyx_t_8 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_lidar_ID);<span class='error_goto'> if (unlikely(!__pyx_t_8)) __PYX_ERR(0, 884, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_8);
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>((__pyx_v_j - 1));<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 884, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      __pyx_t_1 = <span class='py_c_api'>PySlice_New</span>(__pyx_int_0, __pyx_t_4, Py_None);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 884, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(3);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 884, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_slice__87);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__87);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_slice__87);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_8);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 1, __pyx_t_8);
      <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_1);
      <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 2, __pyx_t_1);
      __pyx_t_8 = 0;
      __pyx_t_1 = 0;
      if (unlikely(<span class='py_c_api'>PyObject_SetItem</span>(((PyObject *)__pyx_v_lidar_position), __pyx_t_4, __pyx_t_3) &lt; 0)) <span class='error_goto'>__PYX_ERR(0, 884, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_slice__87 = <span class='py_c_api'>PySlice_New</span>(Py_None, Py_None, Py_None);<span class='error_goto'> if (unlikely(!__pyx_slice__87)) __PYX_ERR(0, 884, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_slice__87);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_slice__87);
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">885</span>:             <span class="n">lidar_position</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">lidar_ID</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">coordinate_rotation</span><span class="p">[</span><span class="mf">0</span><span class="p">]</span> <span class="c"># xc</span></pre>
<pre class='cython code score-13 '>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_v_coordinate_rotation, 0, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 885, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_89 = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(__pyx_t_3); if (unlikely((__pyx_t_89 == ((npy_float64)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 885, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_96 = __pyx_v_X;
      __pyx_t_97 = __pyx_v_lidar_ID;
      __pyx_t_98 = (__pyx_v_j - 1);
      *__Pyx_BufPtrStrided3d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.buf, __pyx_t_96, __pyx_pybuffernd_lidar_position.diminfo[0].strides, __pyx_t_97, __pyx_pybuffernd_lidar_position.diminfo[1].strides, __pyx_t_98, __pyx_pybuffernd_lidar_position.diminfo[2].strides) = __pyx_t_89;
</pre><pre class="cython line score-13" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">886</span>:             <span class="n">lidar_position</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="n">lidar_ID</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mf">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">coordinate_rotation</span><span class="p">[</span><span class="mf">1</span><span class="p">]</span> <span class="c"># yc</span></pre>
<pre class='cython code score-13 '>      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetItemInt</span>(__pyx_v_coordinate_rotation, 1, long, 1, __Pyx_PyInt_From_long, 0, 0, 0);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 886, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_89 = __pyx_<span class='py_c_api'>PyFloat_AsDouble</span>(__pyx_t_3); if (unlikely((__pyx_t_89 == ((npy_float64)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 886, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_99 = __pyx_v_Y;
      __pyx_t_100 = __pyx_v_lidar_ID;
      __pyx_t_101 = (__pyx_v_j - 1);
      *__Pyx_BufPtrStrided3d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.buf, __pyx_t_99, __pyx_pybuffernd_lidar_position.diminfo[0].strides, __pyx_t_100, __pyx_pybuffernd_lidar_position.diminfo[1].strides, __pyx_t_101, __pyx_pybuffernd_lidar_position.diminfo[2].strides) = __pyx_t_89;
</pre><pre class="cython line score-24" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">887</span>:             <span class="n">lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">4</span><span class="p">]</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="mf">0.8</span><span class="o">*</span><span class="p">(</span><span class="n">lidar_position</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">lidar_ID</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mf">1</span><span class="p">]</span><span class="o">-</span><span class="n">lidar_position</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">lidar_ID</span><span class="p">,</span> <span class="mf">0</span><span class="p">])</span><span class="o">/</span><span class="n">delta_t</span> <span class="o">+</span>  \</pre>
<pre class='cython code score-24 '>      __pyx_t_102 = __pyx_v_X;
      __pyx_t_103 = __pyx_v_lidar_ID;
      __pyx_t_104 = (__pyx_v_j - 1);
      __pyx_t_105 = __pyx_v_X;
      __pyx_t_106 = __pyx_v_lidar_ID;
      __pyx_t_107 = 0;
      __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>((0.8 * ((*__Pyx_BufPtrStrided3d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.buf, __pyx_t_102, __pyx_pybuffernd_lidar_position.diminfo[0].strides, __pyx_t_103, __pyx_pybuffernd_lidar_position.diminfo[1].strides, __pyx_t_104, __pyx_pybuffernd_lidar_position.diminfo[2].strides)) - (*__Pyx_BufPtrStrided3d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.buf, __pyx_t_105, __pyx_pybuffernd_lidar_position.diminfo[0].strides, __pyx_t_106, __pyx_pybuffernd_lidar_position.diminfo[1].strides, __pyx_t_107, __pyx_pybuffernd_lidar_position.diminfo[2].strides)))));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 887, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyNumber_Divide</span>(__pyx_t_3, __pyx_v_delta_t);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 887, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
/* … */
      __pyx_t_1 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_4, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 887, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 887, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      __pyx_t_79 = __Pyx_PyInt_As_npy_int32(__pyx_t_3); if (unlikely((__pyx_t_79 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 887, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_110 = __pyx_v_i;
      __pyx_t_111 = 4;
      *__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_110, __pyx_pybuffernd_lidar_state.diminfo[0].strides, __pyx_t_111, __pyx_pybuffernd_lidar_state.diminfo[1].strides) = __pyx_t_79;
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">888</span>:                                     <span class="mf">0.2</span><span class="o">*</span><span class="n">lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">4</span><span class="p">])</span> <span class="c"># Vx</span></pre>
<pre class='cython code score-5 '>      __pyx_t_108 = __pyx_v_i;
      __pyx_t_109 = 4;
      __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>((0.2 * (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_108, __pyx_pybuffernd_lidar_state.diminfo[0].strides, __pyx_t_109, __pyx_pybuffernd_lidar_state.diminfo[1].strides))));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 888, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
</pre><pre class="cython line score-24" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">889</span>:             <span class="n">lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">5</span><span class="p">]</span> <span class="o">=</span> <span class="nb">long</span><span class="p">(</span><span class="mf">0.8</span><span class="o">*</span><span class="p">(</span><span class="n">lidar_position</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="n">lidar_ID</span><span class="p">,</span> <span class="n">j</span><span class="o">-</span><span class="mf">1</span><span class="p">]</span><span class="o">-</span><span class="n">lidar_position</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="n">lidar_ID</span><span class="p">,</span> <span class="mf">0</span><span class="p">])</span><span class="o">/</span><span class="n">delta_t</span> <span class="o">+</span>  \</pre>
<pre class='cython code score-24 '>      __pyx_t_112 = __pyx_v_Y;
      __pyx_t_113 = __pyx_v_lidar_ID;
      __pyx_t_114 = (__pyx_v_j - 1);
      __pyx_t_115 = __pyx_v_Y;
      __pyx_t_116 = __pyx_v_lidar_ID;
      __pyx_t_117 = 0;
      __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>((0.8 * ((*__Pyx_BufPtrStrided3d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.buf, __pyx_t_112, __pyx_pybuffernd_lidar_position.diminfo[0].strides, __pyx_t_113, __pyx_pybuffernd_lidar_position.diminfo[1].strides, __pyx_t_114, __pyx_pybuffernd_lidar_position.diminfo[2].strides)) - (*__Pyx_BufPtrStrided3d(__pyx_t_5numpy_float64_t *, __pyx_pybuffernd_lidar_position.rcbuffer-&gt;pybuffer.buf, __pyx_t_115, __pyx_pybuffernd_lidar_position.diminfo[0].strides, __pyx_t_116, __pyx_pybuffernd_lidar_position.diminfo[1].strides, __pyx_t_117, __pyx_pybuffernd_lidar_position.diminfo[2].strides)))));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 889, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      __pyx_t_1 = <span class='pyx_c_api'>__Pyx_PyNumber_Divide</span>(__pyx_t_3, __pyx_v_delta_t);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 889, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
/* … */
      __pyx_t_4 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_t_1, __pyx_t_3);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 889, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_CallOneArg</span>(((PyObject *)(&amp;PyLong_Type)), __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 889, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
      __pyx_t_79 = __Pyx_PyInt_As_npy_int32(__pyx_t_3); if (unlikely((__pyx_t_79 == ((npy_int32)-1)) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) <span class='error_goto'>__PYX_ERR(0, 889, __pyx_L1_error)</span>
      <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
      __pyx_t_120 = __pyx_v_i;
      __pyx_t_121 = 5;
      *__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_120, __pyx_pybuffernd_lidar_state.diminfo[0].strides, __pyx_t_121, __pyx_pybuffernd_lidar_state.diminfo[1].strides) = __pyx_t_79;
    }
    __pyx_L31:;
  }
</pre><pre class="cython line score-5" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">890</span>:                                     <span class="mf">0.2</span><span class="o">*</span><span class="n">lidar_state</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="mf">5</span><span class="p">])</span> <span class="c"># Vy</span></pre>
<pre class='cython code score-5 '>      __pyx_t_118 = __pyx_v_i;
      __pyx_t_119 = 5;
      __pyx_t_3 = <span class='py_c_api'>PyFloat_FromDouble</span>((0.2 * (*__Pyx_BufPtrStrided2d(__pyx_t_5numpy_int32_t *, __pyx_pybuffernd_lidar_state.rcbuffer-&gt;pybuffer.buf, __pyx_t_118, __pyx_pybuffernd_lidar_state.diminfo[0].strides, __pyx_t_119, __pyx_pybuffernd_lidar_state.diminfo[1].strides))));<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 890, __pyx_L1_error)</span>
      <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
</pre><pre class="cython line score-21" onclick="(function(s){s.display=s.display==='block'?'none':'block'})(this.nextElementSibling.style)">+<span class="">891</span>:     <span class="k">return</span> <span class="n">lidar_state</span><span class="p">[:</span><span class="n">ll</span><span class="p">],</span> <span class="n">next_ID</span></pre>
<pre class='cython code score-21 '>  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_ll);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 891, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  __pyx_t_4 = <span class='py_c_api'>PySlice_New</span>(Py_None, __pyx_t_3, Py_None);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 891, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_PyObject_GetItem</span>(((PyObject *)__pyx_v_lidar_state), __pyx_t_4);<span class='error_goto'> if (unlikely(!__pyx_t_3)) __PYX_ERR(0, 891, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_PyInt_From_long</span>(__pyx_v_next_ID);<span class='error_goto'> if (unlikely(!__pyx_t_4)) __PYX_ERR(0, 891, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_4);
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_1)) __PYX_ERR(0, 891, __pyx_L1_error)</span>
  <span class='refnanny'>__Pyx_GOTREF</span>(__pyx_t_1);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_3);
  <span class='refnanny'>__Pyx_GIVEREF</span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 1, __pyx_t_4);
  __pyx_t_3 = 0;
  __pyx_t_4 = 0;
  __pyx_r = __pyx_t_1;
  __pyx_t_1 = 0;
  goto __pyx_L0;
</pre></div></body></html>
